(this["webpackJsonpzwo-editor"]=this["webpackJsonpzwo-editor"]||[]).push([[0],{172:function(e,t,n){e.exports=n.p+"static/media/freeride.27f6b079.svg"},178:function(e,t,n){e.exports=n(268)},187:function(e,t,n){},238:function(e,t){},240:function(e,t){},268:function(e,t,n){"use strict";n.r(t);var r=n(0),a=n.n(r),i=n(6),o=n.n(i),c=n(23),l=(n(187),n(177)),u=n(11),s=n(2),d=n(9),f=n(13),p=n(5),m=n(3);function h(){var e=Object(s.a)(["\n  background-color: rgba(0, 0, 0, 0);\n  border: 0;\n  float: right;\n  color: white;\n  position: absolute;\n  top: 10px;\n  right: 10px;\n  color: black;\n"]);return h=function(){return e},e}function b(){var e=Object(s.a)(["\n  position: fixed;\n  position: fixed;\n  left: 50%;\n  top: 50%;\n  transform: translate(-50%, -50%);\n\n  padding: 10px;\n\n  align-self: center;\n  margin: 0 auto;\n  background-color: white;\n  border-radius: 5px;\n\n  box-shadow: -5px 1px 51px 0px rgba(0, 0, 0, 0.75);\n  -webkit-box-shadow: -5px 1px 51px 0px rgba(0, 0, 0, 0.75);\n  -moz-box-shadow: -5px 1px 51px 0px rgba(0, 0, 0, 0.75);\n\n  overflow-y: scroll;\n"]);return b=function(){return e},e}function g(){var e=Object(s.a)(["\n  position: fixed;\n  background-color: rgba(0, 0, 0, 0.5);\n  top: 0;\n  bottom: 0;\n  left: 0;\n  right: 0;\n  width: 100%;\n  height: 100%;\n  z-index: 1000;\n"]);return g=function(){return e},e}var v=m.b.div(g()),y=m.b.div(b()),x=m.b.button(h()),O=function(e){return a.a.createElement(v,null,a.a.createElement(y,{style:{width:e.width,height:e.height}},a.a.createElement(x,{onClick:e.onClose},a.a.createElement(f.a,{icon:p.n,size:"lg",fixedWidth:!0})),e.children))},E="https://github.com/nene/zwo-editor";function j(){var e=Object(s.a)(["\n  text-decoration: none;\n  color: #299965;\n"]);return j=function(){return e},e}function w(){var e=Object(s.a)(["\n  display: inline;\n  padding: 0 10px;\n  margin: 0;\n"]);return w=function(){return e},e}function k(){var e=Object(s.a)(["\n  list-style: none;\n  margin: 0;\n  padding: 0;\n"]);return k=function(){return e},e}function I(){var e=Object(s.a)(["\n  padding: 8px;\n  font-size: 12px;\n  text-align: center;\n  color: #484747;\n"]);return I=function(){return e},e}function C(){return a.a.createElement(T,null,a.a.createElement(S,null,a.a.createElement(R,null,"Zwift Workout v2.0 (",a.a.createElement(L,{href:"".concat(E,"/blob/master/LICENSE.md"),target:"blank"},"open source / MIT license"),")"),a.a.createElement(R,null,a.a.createElement(L,{href:"".concat(E,"/issues"),target:"blank"},"Report an issue"))))}var T=m.b.div(I()),S=m.b.ul(k()),R=m.b.li(w()),L=m.b.a(j()),F=n(25),W=n(4),z=n(14),D=n(75),Z=Object(z.b)("workout/clearWorkout"),P=Object(z.b)("workout/loadWorkout"),M={name:"Untitled workout",author:"",description:"",tags:[],sportType:"bike",lengthType:"time"},H=Object(z.d)({name:"meta",initialState:M,reducers:{setName:function(e,t){return Object(W.a)(Object(W.a)({},e),{},{name:t.payload})},setAuthor:function(e,t){return Object(W.a)(Object(W.a)({},e),{},{author:t.payload})},setDescription:function(e,t){return Object(W.a)(Object(W.a)({},e),{},{description:t.payload})},setTags:function(e,t){return Object(W.a)(Object(W.a)({},e),{},{tags:t.payload})},setSportType:function(e,t){return Object(W.a)(Object(W.a)({},e),{},{sportType:t.payload})},setLengthType:function(e,t){return Object(W.a)(Object(W.a)({},e),{},{lengthType:t.payload})}},extraReducers:function(e){e.addCase(Z,(function(e){return Object(W.a)(Object(W.a)({},e),{},{name:"Untitled workout",author:"",description:"",tags:[]})})).addCase(P,(function(e,t){var n=t.payload;return{name:n.name,author:n.author,description:n.description,tags:n.tags,sportType:n.sportType,lengthType:n.lengthType}}))}}),A=H.reducer,N=H.actions,U=N.setName,B=N.setAuthor,K=N.setDescription,G=N.setTags,$=N.setSportType,Y=N.setLengthType,V=function(e){return e.meta},J=Object(D.a)(V,(function(e){return e.name})),_=Object(D.a)(V,(function(e){return e.author})),q=Object(D.a)(V,(function(e){return e.description})),Q=Object(D.a)(V,(function(e){return e.tags})),X=Object(D.a)(V,(function(e){return e.sportType})),ee=Object(D.a)(V,(function(e){return e.lengthType}));function te(){var e=Object(s.a)(["\n  font-size: 10px;\n  text-align: center;\n  padding: 5px;\n"]);return te=function(){return e},e}var ne=m.b.label(te());function re(){var e=Object(s.a)(["\n  font-size: 16px;\n  color: gray;\n"]);return re=function(){return e},e}function ae(){var e=Object(s.a)(["\n  display: inline-block;\n  padding: 10px 10px 10px 0;\n"]);return ae=function(){return e},e}var ie=m.b.div(ae()),oe=Object(m.b)(ne)(re()),ce=function(e){return a.a.createElement(ie,null,a.a.createElement(oe,null,a.a.createElement("input",{type:"checkbox",name:e.label,checked:e.isSelected,onChange:function(t){return e.onCheckboxChange()},className:"form-check-input"}),e.label))};function le(){var e=Object(s.a)(["\n  display: block;\n  width: 100%;\n  padding: 10px;\n  margin-top: 10px;\n\n  font-size: 16px;\n  border: 1px solid #aaa;\n  border-radius: 5px;\n  box-sizing: border-box;\n"]);return le=function(){return e},e}function ue(){var e=Object(s.a)(["\n  font-size: 14px;\n  color: gray;\n  display: block;\n  text-align: left;\n"]);return ue=function(){return e},e}function se(){var e=Object(s.a)(["\n  margin: 10px 0;\n  width: 100%;\n"]);return se=function(){return e},e}function de(){var e=Object(s.a)(["\n  font-size: 34px;\n  font-weight: 200;\n  margin: 0;\n  text-transform: uppercase;\n"]);return de=function(){return e},e}var fe=["Recovery","Intervals","FTP","TT"],pe={setName:U,setAuthor:B,setDescription:K,setTags:G};var me,he=m.b.h2(de()),be=m.b.div(se()),ge=Object(m.b)(ne)(ue()),ve=m.b.input(le()),ye=Object(c.b)((function(e){return{name:J(e),author:_(e),description:q(e),tags:Q(e)}}),pe)((function(e){return a.a.createElement("div",null,a.a.createElement(he,null,"Workout metadata"),a.a.createElement(be,null,a.a.createElement(ge,{htmlFor:"name"},"Workout Title"),a.a.createElement(ve,{type:"text",id:"name",placeholder:"Workout title",value:e.name,onChange:function(t){return e.setName(t.target.value)}})),a.a.createElement(be,null,a.a.createElement(ge,{htmlFor:"description"},"Workout description"),a.a.createElement(ve,{as:"textarea",id:"description",placeholder:"Workout description",value:e.description,onChange:function(t){return e.setDescription(t.target.value)}})),a.a.createElement(be,null,a.a.createElement(ge,{htmlFor:"author"},"Workout Author"),a.a.createElement(ve,{type:"text",id:"author",placeholder:"Workout Author",value:e.author,onChange:function(t){return e.setAuthor(t.target.value)}})),a.a.createElement(be,null,a.a.createElement(ge,null,"Workout Tags"),fe.map((function(t){return a.a.createElement(ce,{key:t,label:t,isSelected:e.tags.includes(t),onCheckboxChange:function(){return e.setTags(function(e,t){return e.includes(t)?e.filter((function(e){return e!==t})):[].concat(Object(F.a)(e),[t])}(e.tags,t))}})}))))})),xe=n(163),Oe=function(e){var t=e.name,n=e.description;return a.a.createElement(xe.a,null,a.a.createElement("title",null,t?"".concat(t," - Zwift Workout Editor"):"My Workout - Zwift Workout Editor"),a.a.createElement("meta",{name:"description",content:n}))},Ee=n(176),je=(n(231),n(38)),we=n.n(je);!function(e){e[e.oneMile=0]="oneMile",e[e.fiveKm=1]="fiveKm",e[e.tenKm=2]="tenKm",e[e.halfMarathon=3]="halfMarathon",e[e.marathon=4]="marathon"}(me||(me={}));var ke=[1609.34,5e3,1e4,21097.5,42195];function Ie(){var e=Object(s.a)(["\n  display: flex;\n  flex-direction: column;\n"]);return Ie=function(){return e},e}var Ce=m.b.div(Ie());function Te(){var e=Object(s.a)(["\n  width: 120px;\n\n  & > input {\n    font-size: 18px;\n    font-family: monospace;\n    color: black;\n  }\n"]);return Te=function(){return e},e}function Se(){var e=Object(s.a)(["\n  .rc-time-picker-panel-input {\n    font-size: 18px;  \n    font-family: monospace;\n  }\n\n  .rc-time-picker-panel-select > ul > li {\n    font-size: 16px;  \n    font-family: monospace;\n  }\n"]);return Se=function(){return e},e}function Re(){var e=Object(s.a)(["\n  padding-right: 10px;\n  align-self: flex-end;\n"]);return Re=function(){return e},e}function Le(){var e=Object(s.a)(["\n  display: flex;\n  margin: 0 auto;\n  flex-direction: row;\n  width: 100%;\n  max-width: 1360px;\n"]);return Le=function(){return e},e}function Fe(e){var t=e.times,n=e.onChange,i=Object(r.useCallback)((function(){n(function(e){var t=[].concat(Object(F.a)(ke),[1609.34]),n=[].concat(Object(F.a)(e),[680]),r=[];return e.forEach((function(e,a){if(e)r[a]=e;else for(var i=0;i<n.length;i++)if(n[i]){r[a]=n[i]*(t[a]/t[i])*1.06;break}})),r}(t))}),[t,n]),o=function(e,r){var a=Object(F.a)(t);a[e]=r,n(a)};return a.a.createElement(We,null,a.a.createElement(De,{time:t[me.oneMile],onChange:function(e){return o(me.oneMile,e)}},"1 mile time"),a.a.createElement(De,{time:t[me.fiveKm],onChange:function(e){return o(me.fiveKm,e)}},"5 km time"),a.a.createElement(De,{time:t[me.tenKm],onChange:function(e){return o(me.tenKm,e)}},"10 km time"),a.a.createElement(De,{time:t[me.halfMarathon],onChange:function(e){return o(me.halfMarathon,e)}},"Half marathon time"),a.a.createElement(De,{time:t[me.marathon],onChange:function(e){return o(me.marathon,e)}},"Marathon time"),a.a.createElement(ze,null,a.a.createElement("button",{onClick:i,className:"btn"},"Estimate missing times")))}var We=m.b.div(Le()),ze=Object(m.b)(Ce)(Re()),De=function(e){var t=e.time,n=e.onChange,r=e.children;return a.a.createElement(ze,null,a.a.createElement(ne,null,a.a.createElement("abbr",{title:"hh:mm:ss"},r)),a.a.createElement(Ze,null),a.a.createElement(Pe,{value:0===t?void 0:we.a.utc(1e3*t),placeholder:"00:00:00",defaultOpenValue:we()("00:00:00"),onChange:function(e){return n(e?we.a.duration(e.format("HH:mm:ss")).asSeconds():0)}}))},Ze=Object(m.a)(Se()),Pe=Object(m.b)(Ee.a)(Te());var Me=n(169),He=n.n(Me);function Ae(){var e=Object(s.a)(["\n  padding: 5px;\n  color: ",";\n"]);return Ae=function(){return e},e}function Ne(){var e=Object(s.a)(["\n  display: flex;\n  flex-direction: row;\n  color: lightgray;\n"]);return Ne=function(){return e},e}function Ue(){var e=Object(s.a)(["\n  max-width: 120px;\n  padding: 0 10px;\n"]);return Ue=function(){return e},e}var Be=Object(m.b)(Ce)(Ue()),Ke=m.b.div(Ne()),Ge=Object(m.b)(f.a)(Ae(),(function(e){return e.$active?"#00C46A":"inherit"})),$e=function(e){var t=e.label,n=e.leftValue,r=e.rightValue,i=e.leftIcon,o=e.rightIcon,c=e.selected,l=e.onChange;return a.a.createElement(Be,null,a.a.createElement(ne,null,t),a.a.createElement(Ke,null,a.a.createElement(Ge,{$active:c===n,icon:i,size:"lg",fixedWidth:!0}),a.a.createElement(He.a,{onChange:function(){return l(c===n?r:n)},checked:c===r,checkedIcon:!1,uncheckedIcon:!1,onColor:"#00C46A",offColor:"#00C46A"}),a.a.createElement(Ge,{$active:c===r,icon:o,size:"lg",fixedWidth:!0})))},Ye=function(e){return a.a.createElement("div",{className:e.className,onKeyDown:function(t){if(!(t.target instanceof HTMLInputElement||t.target instanceof HTMLTextAreaElement))switch(t.keyCode){case 8:e.onBackspacePress(),t.preventDefault();break;case 37:e.onLeftPress();break;case 39:e.onRightPress();break;case 38:e.onUpPress();break;case 40:e.onDownPress()}},tabIndex:0},e.children)},Ve=n(273),Je=function(e){return{meters:e}},_e=function(e){return{seconds:e}},qe=function(e){return"meters"in e},Qe=function(e){return"seconds"in e},Xe=_e(300),et=Je(1e3),tt=me.oneMile,nt=function(e){return"time"===e.lengthType?Xe:et},rt=function(e,t){return Object(W.a)({type:"steady",id:Object(Ve.a)(),length:nt(t),intensity:1,cadence:void 0,pace:tt,instructions:[]},e)},at=function(e,t){return Object(W.a)({type:"ramp",id:Object(Ve.a)(),length:nt(t),startIntensity:.5,endIntensity:1,cadence:void 0,pace:tt,instructions:[]},e)},it=function(e,t){return Object(W.a)({type:"free",id:Object(Ve.a)(),length:nt(t),cadence:void 0,instructions:[]},e)},ot=function(e,t){return Object(W.a)({type:"repetition",id:Object(Ve.a)(),repeat:3,onLength:"time"===t.lengthType?_e(30):Je(200),offLength:"time"===t.lengthType?_e(120):Je(200),onIntensity:1,offIntensity:.5,onCadence:void 0,offCadence:void 0,pace:tt,instructions:[]},e)},ct=function(e){return Object(W.a)(Object(W.a)({},e),{},{id:Object(Ve.a)()})},lt=n(55),ut=n(56),st=n(82),dt=n(81);function ft(e,t){return Math.floor(e/t)*t}var pt=function(){function e(){Object(lt.a)(this,e),this.sportType=void 0,this.lengthType=void 0}return Object(ut.a)(e,[{key:"lengthToWidth",value:function(e){return Qe(e)?e.seconds/3:e.meters/10}},{key:"widthToLength",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{meters:200,seconds:5};return"time"===this.lengthType?_e(ft(3*e,t.seconds)):Je(ft(10*e,t.meters))}},{key:"fromLength",value:function(e){return Qe(e)?e.seconds:e.meters}},{key:"intensityToHeight",value:function(e){return 250*e}},{key:"heightToIntensity",value:function(e){return e/250}}]),e}(),mt=function(e){Object(st.a)(n,e);var t=Object(dt.a)(n);function n(e,r){var a;return Object(lt.a)(this,n),(a=t.call(this)).ftp=void 0,a.weight=void 0,a.sportType="bike",a.lengthType="time",a.ftp=e,a.weight=r,a}return Object(ut.a)(n,[{key:"power",value:function(e){return e*this.ftp}},{key:"wkg",value:function(e){return this.power(e)/this.weight}},{key:"duration",value:function(e){if(Qe(e))return e;throw new Error("Unexpected length:Distance encountered in BikeMode")}},{key:"intervalDuration",value:function(e){switch(e.type){case"free":case"steady":case"ramp":return this.duration(e.length);case"repetition":var t=this.duration(e.onLength),n=this.duration(e.offLength);return _e(e.repeat*(t.seconds+n.seconds))}}},{key:"intervalLength",value:function(e){return this.intervalDuration(e)}}]),n}(pt),ht=function(e){Object(st.a)(n,e);var t=Object(dt.a)(n);function n(e,r){var a;return Object(lt.a)(this,n),(a=t.call(this)).runningTimes=void 0,a.sportType="run",a.lengthType=void 0,a.runningTimes=e,a.lengthType=r,a}return Object(ut.a)(n,[{key:"speed",value:function(e,t){return ke[t]/this.runningTimes[t]*e}},{key:"distance",value:function(e,t,n){return Qe(e)?Je(this.speed(t,n)*e.seconds):e}},{key:"duration",value:function(e,t,n){return Qe(e)?e:_e(e.meters/this.speed(t,n))}},{key:"intervalDistance",value:function(e){switch(e.type){case"free":return qe(e.length)?e.length:Je(0);case"steady":return this.distance(e.length,e.intensity,e.pace);case"ramp":return this.distance(e.length,(e.startIntensity+e.endIntensity)/2,e.pace);case"repetition":var t=this.distance(e.onLength,e.onIntensity,e.pace),n=this.distance(e.offLength,e.offIntensity,e.pace);return Je(e.repeat*(t.meters+n.meters))}}},{key:"intervalDuration",value:function(e){switch(e.type){case"free":return Qe(e.length)?e.length:_e(0);case"steady":return this.duration(e.length,e.intensity,e.pace);case"ramp":return this.duration(e.length,(e.startIntensity+e.endIntensity)/2,e.pace);case"repetition":var t=this.duration(e.onLength,e.onIntensity,e.pace),n=this.duration(e.offLength,e.offIntensity,e.pace);return _e(e.repeat*(t.seconds+n.seconds))}}},{key:"intervalLength",value:function(e){return"time"===this.lengthType?this.intervalDuration(e):this.intervalDistance(e)}}]),n}(pt),bt=n(271);function gt(e,t){return Je(Object(bt.a)(e.map((function(e){return t.intervalDistance(e)})).map((function(e){return e.meters}))))}function vt(e,t){return _e(Object(bt.a)(e.map((function(e){return t.intervalDuration(e)})).map((function(e){return e.seconds}))))}n(142);var yt=function(e){return we.a.duration(e.seconds,"seconds").format("mm:ss",{trim:!1})},xt=function(e){return Math.round(e.meters)+" m"},Ot=function(e){return Math.round(e)+" W"},Et=function(e){return Math.round(100*e)+"%"},jt=function(e){return["1M","5K","10K","HM","M"][e]+" pace"},wt=function(e){if(0===e)return"";var t=1e3/e;return we.a.duration(t,"seconds").format("m:ss")+"/km"};function kt(){var e=Object(s.a)(["\n  font-size: 20px;\n  border: 1px solid lightgray;\n  text-align: center;\n"]);return kt=function(){return e},e}function It(){var e=Object(s.a)(["\n  max-width: 120px;\n  padding: 0 10px;\n"]);return It=function(){return e},e}var Ct=Object(m.b)(Ce)(It()),Tt=m.b.input(kt());function St(e,t,n){var r=0;return e.map((function(e){if("steady"===e.type&&e.intensity){var a=e.intensity*t,i=e.intensity;r+=n.intervalDuration(e).seconds*a*i}if("ramp"===e.type&&e.startIntensity&&e.endIntensity){var o=(e.startIntensity+e.endIntensity)/2*t,c=(e.startIntensity+e.endIntensity)/2;r+=n.intervalDuration(e).seconds*o*c}if("repetition"===e.type&&e.onIntensity&&e.offIntensity&&e.repeat&&e.onLength&&e.offLength){var l=e.onIntensity*t,u=e.onIntensity,s=n.intervalDuration(rt({length:e.onLength,intensity:e.onIntensity},n));r+=s.seconds*e.repeat*l*u;var d=e.offIntensity*t,f=e.offIntensity,p=n.intervalDuration(rt({length:e.offLength,intensity:e.offIntensity},n));r+=p.seconds*e.repeat*d*f}return!1})),(r/(3600*t)*100).toFixed(0)}var Rt=function(e){var t=e.intervals,n=e.ftp,r=e.mode;return a.a.createElement(a.a.Fragment,null,a.a.createElement(Ct,null,a.a.createElement(ne,null,"Workout Time"),a.a.createElement(Tt,{value:yt(vt(t,r)),disabled:!0})),r instanceof ht&&a.a.createElement(Ct,null,a.a.createElement(ne,null,"Workout Distance"),a.a.createElement(Tt,{value:xt(gt(t,r)),disabled:!0})),r instanceof mt&&a.a.createElement(Ct,null,a.a.createElement(ne,null,"TSS"),a.a.createElement(Tt,{value:St(t,n,r),disabled:!0})))};function Lt(){var e=Object(s.a)(["\n  font-style: italic;\n  margin: 10px 0 0 0;\n"]);return Lt=function(){return e},e}function Ft(){var e=Object(s.a)(["\n  margin-left: 10px;\n  font-size: 21px;\n  color: gray;\n"]);return Ft=function(){return e},e}function Wt(){var e=Object(s.a)(["\n  padding: 10px 0;\n  margin: 0;\n"]);return Wt=function(){return e},e}function zt(){var e=Object(s.a)(["\n  flex: 1;\n  cursor: pointer;\n"]);return zt=function(){return e},e}var Dt,Zt=m.b.div(zt()),Pt=m.b.h1(Wt()),Mt=Object(m.b)(f.a)(Ft()),Ht=m.b.p(Lt()),At=function(e){var t=e.name,n=e.author,r=e.description,i=e.onClick;return a.a.createElement(Zt,{onClick:i},a.a.createElement(Pt,null,t," ",a.a.createElement(Mt,{icon:p.j})),a.a.createElement("div",null,r),a.a.createElement(Ht,null,n?"by ".concat(n):""))},Nt=Object(z.d)({name:"athlete",initialState:{ftp:200,weight:75,runningTimes:[0,0,0,0,0]},reducers:{setFtp:function(e,t){return Object(W.a)(Object(W.a)({},e),{},{ftp:t.payload})},setWeight:function(e,t){return Object(W.a)(Object(W.a)({},e),{},{weight:t.payload})},setRunningTimes:function(e,t){return Object(W.a)(Object(W.a)({},e),{},{runningTimes:t.payload})}}}),Ut=Nt.reducer,Bt=Nt.actions,Kt=Bt.setFtp,Gt=Bt.setWeight,$t=Bt.setRunningTimes,Yt=function(e){return e.athlete},Vt=Object(D.a)(Yt,(function(e){return e.ftp})),Jt=Object(D.a)(Yt,(function(e){return e.weight})),_t=Object(D.a)(Yt,(function(e){return e.runningTimes}));!function(e){e.GRAY="#807F80",e.BLUE="#0E90D4",e.GREEN="#00C46A",e.YELLOW="#FFCB00",e.ORANGE="#FF6430",e.RED="#E90000",e.WHITE="#FFFFFF"}(Dt||(Dt={}));var qt={Z1:{min:.1,max:.605},Z2:{min:.605,max:.763},Z3:{min:.763,max:.901},Z4:{min:.901,max:1.053},Z5:{min:1.053,max:1.194},Z6:{min:1.194,max:2}},Qt=[[qt.Z1.min,qt.Z1.max],[qt.Z2.min,qt.Z2.max],[qt.Z3.min,qt.Z3.max],[qt.Z4.min,qt.Z4.max],[qt.Z5.min,qt.Z5.max],[qt.Z6.min,qt.Z6.max]],Xt=function(e){return e<qt.Z1.max?Dt.GRAY:e<qt.Z2.max?Dt.BLUE:e<qt.Z3.max?Dt.GREEN:e<qt.Z4.max?Dt.YELLOW:e<qt.Z5.max?Dt.ORANGE:Dt.RED},en=n(270),tn=n(272),nn=n(269);function rn(e,t,n){var r=n.findIndex(Object(en.a)("id",e));return-1===r?n:Object(tn.a)(r,t(n[r]),n)}function an(e,t,n,r){return rn(e,(function(e){if("steady"===e.type||"free"===e.type||"ramp"===e.type){var n=function(e,t){if(Qe(e)&&Qe(t))return _e(e.seconds+t.seconds);if(qe(e)&&qe(t))return Je(e.meters+t.meters);throw new Error("Unable to sum Distance with Duration")}(r.intervalLength(e),t);if(r.fromLength(n)>0)return Object(W.a)(Object(W.a)({},e),{},{length:n})}return e}),n)}function on(e,t){var n=t.findIndex(Object(en.a)("id",e.id));return-1===n?t:Object(tn.a)(n,e,t)}var cn=Object(z.d)({name:"selectedId",initialState:null,reducers:{setSelectedId:function(e,t){return t.payload},clearSelection:function(){return null}}}),ln=cn.reducer,un=cn.actions,sn=un.setSelectedId,dn=un.clearSelection,fn=function(e){return e.selectedId||void 0};var pn=Object(D.a)(X,Vt,Jt,_t,ee,(function(e,t,n,r,a){return function(e){var t=e.sportType,n=e.ftp,r=e.weight,a=e.runningTimes,i=e.lengthType;switch(t){case"bike":return new mt(n,r);case"run":return new ht(a,i)}}({sportType:e,ftp:t,weight:n,runningTimes:r,lengthType:a})})),mn=Object(z.d)({name:"intervals",initialState:[],reducers:{setIntervals:function(e,t){return t.payload},addInterval:function(e,t){return[].concat(Object(F.a)(e),[t.payload])},updateInterval:function(e,t){return on(t.payload,e)},removeInterval:function(e,t){var n=t.payload;return e.filter((function(e){return e.id!==n}))},removeInstruction:function(e,t){var n=t.payload;return hn({intervals:e,intervalId:n.intervalId,update:function(e){return e.filter((function(e){return e.id!==n.instructionId}))}})},updateInstruction:function(e,t){var n=t.payload;return hn({intervals:e,intervalId:n.intervalId,update:function(e){return on(n.instruction,e)}})},addInstruction:function(e,t){var n=t.payload;return hn({intervals:e,intervalId:n.intervalId,update:function(e){return[].concat(Object(F.a)(e),[n.instruction])}})}},extraReducers:function(e){e.addCase(Z,(function(){return[]})).addCase(P,(function(e,t){return t.payload.intervals}))}}),hn=function(e){var t=e.intervals,n=e.intervalId,r=e.update,a=t.find(Object(en.a)("id",n));return a?on(Object(W.a)(Object(W.a)({},a),{},{instructions:r(a.instructions)}),t):t},bn=mn.reducer,gn=mn.actions,vn=gn.setIntervals,yn=gn.addInterval,xn=gn.updateInterval,On=gn.removeInterval,En=gn.removeInstruction,jn=gn.updateInstruction,wn=gn.addInstruction,kn=Object(z.c)("intervals/removeSelectedInterval",(function(e,t){var n=t.getState,r=t.dispatch,a=fn(n());r(On(a)),r(dn())})),In=Object(z.c)("intervals/duplicateSelectedInterval",(function(e,t){var n=t.getState,r=t.dispatch,a=Fn(n());a&&r(yn(ct(a))),r(dn())})),Cn=Object(z.c)("intervals/adjustSelectedIntervalIntensity",(function(e,t){var n=t.getState,r=t.dispatch,a=fn(n());if(a){var i=Ln(n());r(vn(function(e,t,n){return rn(e,(function(e){if("steady"===e.type){var n=e.intensity+t;if(n>qt.Z1.min)return Object(W.a)(Object(W.a)({},e),{},{intensity:n})}return e}),n)}(a,e,i)))}})),Tn=Object(z.c)("intervals/adjustSelectedIntervalLength",(function(e,t){var n=t.getState,r=t.dispatch,a=fn(n());if(a){var i=Ln(n()),o=pn(n());r(vn(an(a,e,i,o)))}})),Sn=Object(z.c)("intervals/moveSelectedInterval",(function(e,t){var n=t.getState,r=t.dispatch,a=fn(n());if(a){var i=Ln(n());r(vn(function(e,t,n){var r=n.findIndex(Object(en.a)("id",e)),a=r+t;return r<0||a<0||a>=n.length?n:Object(nn.a)(r,a,n)}(a,e,i)))}})),Rn=Object(z.c)("intervals/setSelectedIntervalPace",(function(e,t){var n=t.getState,r=t.dispatch,a=Fn(n());a&&"steady"===a.type&&r(xn(Object(W.a)(Object(W.a)({},a),{},{pace:e})))})),Ln=function(e){return e.intervals},Fn=Object(D.a)(fn,Ln,(function(e,t){return t.find((function(t){return t.id===e}))})),Wn=Object(D.a)(Fn,(function(e){return e&&"free"!==e.type?e.pace:void 0})),zn=Object(D.a)(Fn,(function(e){return null===e||void 0===e?void 0:e.id})),Dn=n(29);function Zn(){return(Zn=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}function Pn(e,t){if(null==e)return{};var n,r,a=function(e,t){if(null==e)return{};var n,r,a={},i=Object.keys(e);for(r=0;r<i.length;r++)n=i[r],t.indexOf(n)>=0||(a[n]=e[n]);return a}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(r=0;r<i.length;r++)n=i[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(a[n]=e[n])}return a}var Mn=a.a.createElement("title",null,"Untitled"),Hn=a.a.createElement("desc",null,"Created with Sketch."),An=a.a.createElement("defs",null),Nn=a.a.createElement("g",{id:"Page-1",stroke:"none",strokeWidth:1,fill:"none",fillRule:"evenodd"},a.a.createElement("polygon",{id:"Rectangle",fill:"#7F7E7F",points:"180 65.2104719 240 85.8538747 240 171.707749 180 171.707749"}),a.a.createElement("polygon",{id:"Rectangle",fill:"#3F8FCF",points:"120 43.4859336 180 65.1100145 180 171.707749 120 171.707749"}),a.a.createElement("polygon",{id:"Rectangle",fill:"#58C073",points:"60 22.1649934 120 43.597184 120 171.707749 60 171.707749"}),a.a.createElement("polygon",{id:"Rectangle",fill:"#F8CC46",points:"0 0 60 22.0976562 60 171.707749 0 171.707749"})),Un=function(e){var t=e.svgRef,n=e.title,r=Pn(e,["svgRef","title"]);return a.a.createElement("svg",Zn({viewBox:"0 0 240 172",ref:t},r),void 0===n?Mn:n?a.a.createElement("title",null,n):null,Hn,An,Nn)},Bn=a.a.forwardRef((function(e,t){return a.a.createElement(Un,Zn({svgRef:t},e))}));n.p;function Kn(){return(Kn=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}function Gn(e,t){if(null==e)return{};var n,r,a=function(e,t){if(null==e)return{};var n,r,a={},i=Object.keys(e);for(r=0;r<i.length;r++)n=i[r],t.indexOf(n)>=0||(a[n]=e[n]);return a}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(r=0;r<i.length;r++)n=i[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(a[n]=e[n])}return a}var $n=a.a.createElement("title",null,"Untitled"),Yn=a.a.createElement("desc",null,"Created with Sketch."),Vn=a.a.createElement("defs",null),Jn=a.a.createElement("g",{id:"Page-1",stroke:"none",strokeWidth:1,fill:"none",fillRule:"evenodd"},a.a.createElement("polygon",{id:"Rectangle",fill:"#7F7E7F",points:"0 85.8538747 60 65.290624 60 171.707749 0 171.707749"}),a.a.createElement("polygon",{id:"Rectangle",fill:"#3F8FCF",points:"60 65.2906189 120 44 120 171.707749 60 171.707749"}),a.a.createElement("polygon",{id:"Rectangle",fill:"#58C073",points:"120 44 180 22 180 171.707749 120 171.707749"}),a.a.createElement("polygon",{id:"Rectangle",fill:"#F8CC46",points:"180 22 240 0 240 171.707749 180 171.707749"})),_n=function(e){var t=e.svgRef,n=e.title,r=Gn(e,["svgRef","title"]);return a.a.createElement("svg",Kn({viewBox:"0 0 240 172",ref:t},r),void 0===n?$n:n?a.a.createElement("title",null,n):null,Yn,Vn,Jn)},qn=a.a.forwardRef((function(e,t){return a.a.createElement(_n,Kn({svgRef:t},e))}));n.p;function Qn(){return(Qn=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}function Xn(e,t){if(null==e)return{};var n,r,a=function(e,t){if(null==e)return{};var n,r,a={},i=Object.keys(e);for(r=0;r<i.length;r++)n=i[r],t.indexOf(n)>=0||(a[n]=e[n]);return a}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(r=0;r<i.length;r++)n=i[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(a[n]=e[n])}return a}var er=a.a.createElement("title",null,"interval"),tr=a.a.createElement("desc",null,"Created with Sketch."),nr=a.a.createElement("defs",null),rr=a.a.createElement("g",{id:"Page-1",stroke:"none",strokeWidth:1,fill:"none",fillRule:"evenodd"},a.a.createElement("g",{id:"interval"},a.a.createElement("rect",{id:"Rectangle-2",fill:"#F8CC46",x:0,y:0,width:24,height:170}),a.a.createElement("rect",{id:"Rectangle-2",fill:"#F8CC46",x:166,y:0,width:24,height:170}),a.a.createElement("rect",{id:"Rectangle-2",fill:"#F8CC46",x:83,y:0,width:24,height:170}),a.a.createElement("rect",{id:"Rectangle-3",fill:"#3F8FCF",x:24,y:63,width:59,height:107}),a.a.createElement("rect",{id:"Rectangle-3",fill:"#3F8FCF",x:190,y:63,width:59,height:107}),a.a.createElement("rect",{id:"Rectangle-3",fill:"#3F8FCF",x:107,y:63,width:59,height:107}))),ar=function(e){var t=e.svgRef,n=e.title,r=Xn(e,["svgRef","title"]);return a.a.createElement("svg",Qn({viewBox:"0 0 249 170",ref:t},r),void 0===n?er:n?a.a.createElement("title",null,n):null,tr,nr,rr)},ir=a.a.forwardRef((function(e,t){return a.a.createElement(ar,Qn({svgRef:t},e))}));n.p;function or(){return(or=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}function cr(e,t){if(null==e)return{};var n,r,a=function(e,t){if(null==e)return{};var n,r,a={},i=Object.keys(e);for(r=0;r<i.length;r++)n=i[r],t.indexOf(n)>=0||(a[n]=e[n]);return a}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(r=0;r<i.length;r++)n=i[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(a[n]=e[n])}return a}var lr=a.a.createElement("title",null,"Rectangle"),ur=a.a.createElement("desc",null,"Created with Sketch."),sr=a.a.createElement("defs",null),dr=a.a.createElement("g",{id:"Page-1",stroke:"none",strokeWidth:1,fill:"none",fillRule:"evenodd"},a.a.createElement("g",{id:"warmup",fillRule:"nonzero",fill:"#F8CC46"},a.a.createElement("polygon",{id:"Rectangle",points:"0 0 40 0 40 121.707749 6.24500451e-16 121.707749"}))),fr=function(e){var t=e.svgRef,n=e.title,r=cr(e,["svgRef","title"]);return a.a.createElement("svg",or({viewBox:"0 0 40 30",ref:t},r),void 0===n?lr:n?a.a.createElement("title",null,n):null,ur,sr,dr)},pr=a.a.forwardRef((function(e,t){return a.a.createElement(fr,or({svgRef:t},e))}));n.p;function mr(){var e=Object(s.a)(["\n  max-width: 100px;\n"]);return mr=function(){return e},e}function hr(){var e=Object(s.a)(["\n  font-size: 20px;\n  border: 1px solid lightgray;\n  text-align: center;\n"]);return hr=function(){return e},e}var br=m.b.input(hr()),gr=Object(m.b)(Ce)(mr()),vr=function(e){var t=e.name,n=e.label,r=e.value,i=e.onChange;return a.a.createElement(gr,null,a.a.createElement(ne,{htmlFor:t},n),a.a.createElement(br,{type:"number",name:t,value:r,onChange:function(e){return i(parseInt(e.target.value))}}))},yr=n(123),xr=n.n(yr),Or=n(170);function Er(){var e=Object(s.a)(["\n  display: inline-block;\n  background-color: white;\n  border: none;\n  text-align: center;\n  font-size: 13px;\n  border-radius: 5px;\n  min-width: 50px;\n  box-shadow: 2px 2px 5px #bbb;\n  cursor: pointer;\n\n  &:hover {\n    box-shadow: 2px 2px 5px #999;\n  }\n  &:active {\n    position: relative;\n    top: 1px;\n    left: 1px;\n  }\n"]);return Er=function(){return e},e}var jr=m.b.button(Er());function wr(){var e=Object(s.a)(["\n  display: block;\n  margin: 0 auto;\n"]);return wr=function(){return e},e}var kr=Object(m.b)(f.a)(wr()),Ir=function(e){var t=e.icon,n=e.children,r=e.onClick;return a.a.createElement(jr,{onClick:r},a.a.createElement(kr,{icon:t,size:"lg",fixedWidth:!0})," ",n)},Cr=n(171),Tr=n.n(Cr);function Sr(e,t){var n,r,a=(n=t.sportType,r=t.lengthType,{author:"",name:"",description:"",sportType:n,lengthType:r,tags:[],intervals:[]});e=e.replace(/<!--(.*?)-->/gm,"");var i=Tr.a.xml2js(e).elements[0];if("workout_file"!==i.name)throw new Error("Invalid ZWO file");var o=i.elements.findIndex((function(e){return"sportType"===e.name}));-1!==o&&i.elements[o].elements&&(a.sportType=i.elements[o].elements[0].text);var c=i.elements.findIndex((function(e){return"durationType"===e.name}));-1!==c&&i.elements[c].elements&&(a.lengthType=i.elements[c].elements[0].text);var l=i.elements.findIndex((function(e){return"author"===e.name}));-1!==l&&i.elements[l].elements&&(a.author=i.elements[l].elements[0].text);var u=i.elements.findIndex((function(e){return"name"===e.name}));-1!==u&&i.elements[u].elements&&(a.name=i.elements[u].elements[0].text);var s=i.elements.findIndex((function(e){return"description"===e.name}));-1!==s&&i.elements[s].elements&&(a.description=i.elements[s].elements[0].text);var d=i.elements.findIndex((function(e){return"tags"===e.name}));-1!==d&&i.elements[d].elements&&(a.tags=i.elements[d].elements.map((function(e){return e.attributes.name})));var f=i.elements.find((function(e){return"workout"===e.name&&"elements"in e}));if(!f)return a;var p=function(e){return"time"===a.lengthType?_e(e):Je(e)};return f.elements.map((function(e){return"SteadyState"===e.name&&a.intervals.push(rt({intensity:parseFloat(e.attributes.Power||e.attributes.PowerLow),length:p(parseFloat(e.attributes.Duration)),cadence:e.attributes.Cadence?parseFloat(e.attributes.Cadence):void 0,pace:parseInt(e.attributes.pace||"0"),instructions:Rr(e.elements,p)},t)),"Ramp"!==e.name&&"Warmup"!==e.name&&"Cooldown"!==e.name||a.intervals.push(at({startIntensity:parseFloat(e.attributes.PowerLow),endIntensity:parseFloat(e.attributes.PowerHigh),length:p(parseFloat(e.attributes.Duration)),pace:parseInt(e.attributes.pace||"0"),cadence:e.attributes.Cadence?parseFloat(e.attributes.Cadence):void 0,instructions:Rr(e.elements,p)},t)),"IntervalsT"===e.name&&a.intervals.push(ot({repeat:parseFloat(e.attributes.Repeat),onLength:p(parseFloat(e.attributes.OnDuration)),offLength:p(parseFloat(e.attributes.OffDuration)),onIntensity:parseFloat(e.attributes.OnPower),offIntensity:parseFloat(e.attributes.OffPower),onCadence:e.attributes.Cadence?parseFloat(e.attributes.Cadence):void 0,offCadence:e.attributes.CadenceResting?parseFloat(e.attributes.CadenceResting):void 0,pace:parseInt(e.attributes.pace||"0"),instructions:Rr(e.elements,p)},t)),"FreeRide"===e.name&&a.intervals.push(it({length:p(parseFloat(e.attributes.Duration)),cadence:e.attributes.Cadence?parseFloat(e.attributes.Cadence):void 0,instructions:Rr(e.elements,p)},t)),!1})),a}function Rr(e,t){return e&&0!==e.length?e.filter((function(e){return"textevent"===e.name.toLowerCase()})).map((function(e){return{text:e.attributes.message||"",offset:t(parseFloat(e.attributes.timeoffset)),id:Object(Ve.a)()}})):[]}var Lr=function(e){var t=e.mode,n=e.onUpload;function r(){return(r=Object(Or.a)(xr.a.mark((function e(r){return xr.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.t0=n,e.t1=Sr,e.next=5,r.text();case 5:e.t2=e.sent,e.t3=t,e.t4=(0,e.t1)(e.t2,e.t3),(0,e.t0)(e.t4),e.next=14;break;case 11:e.prev=11,e.t5=e.catch(0),console.error(e.t5);case 14:case"end":return e.stop()}}),e,null,[[0,11]])})))).apply(this,arguments)}return a.a.createElement(a.a.Fragment,null,a.a.createElement("input",{accept:".xml,.zwo",id:"contained-button-file",type:"file",style:{display:"none"},onChange:function(e){return function(e){return r.apply(this,arguments)}(e.target.files[0])}}),a.a.createElement(Ir,{icon:p.q,onClick:function(){return document.getElementById("contained-button-file").click()}},"Upload"))};function Fr(){var e=Object(s.a)(["\n  color: white;\n  width: 50px;\n  height: 50px;\n  background-color: ",";\n"]);return Fr=function(){return e},e}var Wr=Object(m.b)(jr)(Fr(),(function(e){return e.color})),zr=n(39),Dr=n.n(zr);function Zr(e,t){var n=e.author,r=e.name,a=e.description,i=e.sportType,o=e.lengthType,c=e.tags,l=e.intervals,u=Dr.a.begin().ele("workout_file").ele("author",n).up().ele("name",r).up().ele("description",a).up().ele("sportType",i).up().ele("durationType",o).up().ele("tags");return c.forEach((function(e){var t;t=Dr.a.create("tag").att("name",e),u.importDocument(t)})),u=u.up().ele("workout"),l.forEach((function(e,n){var r,a;"steady"===e.type?(r=Dr.a.create("SteadyState").att("Duration",t.fromLength(e.length)).att("Power",e.intensity).att("pace",e.pace),0!==e.cadence&&r.att("Cadence",e.cadence)):"ramp"===e.type&&e.startIntensity&&e.endIntensity?(a="Ramp",0===n&&(a="Warmup"),n===l.length-1&&(a="Cooldown"),e.startIntensity,e.endIntensity,r=Dr.a.create(a).att("Duration",t.fromLength(e.length)).att("PowerLow",e.startIntensity).att("PowerHigh",e.endIntensity).att("pace",e.pace),void 0!==e.cadence&&r.att("Cadence",e.cadence)):"repetition"===e.type?(r=Dr.a.create("IntervalsT").att("Repeat",e.repeat).att("OnDuration",t.fromLength(e.onLength)).att("OffDuration",t.fromLength(e.offLength)).att("OnPower",e.onIntensity).att("OffPower",e.offIntensity).att("pace",e.pace),void 0!==e.onCadence&&r.att("Cadence",e.onCadence),void 0!==e.offCadence&&r.att("CadenceResting",e.offCadence)):(r=Dr.a.create("FreeRide").att("Duration",t.fromLength(e.length)).att("FlatRoad",0),void 0!==e.cadence&&r.att("Cadence",e.cadence));e.instructions.filter((function(n){return t.fromLength(n.offset)>=0&&t.fromLength(n.offset)<function(e){return t instanceof ht&&"distance"===t.lengthType?t.intervalDistance(e).meters:t.intervalDuration(e).seconds}(e)})).forEach((function(e){r.ele("textevent",{timeoffset:t.fromLength(e.offset),message:e.text})})),u.importDocument(r)})),u.end({pretty:!0})}var Pr=Object(c.b)((function(e){return{name:J(e),author:_(e),description:q(e),tags:Q(e),sportType:X(e),lengthType:ee(e),intervals:Ln(e),mode:pn(e)}}))((function(e){return a.a.createElement(Ir,{icon:p.i,onClick:function(){var t=function(){var t=Zr({name:e.name,author:e.author,description:e.description,tags:e.tags,sportType:e.sportType,lengthType:e.lengthType,intervals:e.intervals},e.mode);return new Blob([t],{type:"application/xml"})}(),n=window.URL.createObjectURL(t),r=document.createElement("a");document.body.appendChild(r),r.style.display="none",r.href=n,r.download="workout.zwo",r.click(),window.URL.revokeObjectURL(n)}},"Download")}));function Mr(){var e=Object(s.a)(["\n  width: 30px;\n  margin: 0 auto;\n  display: block;\n  margin: 0 auto;\n"]);return Mr=function(){return e},e}var Hr=m.b.svg(Mr()),Ar=function(e){var t=e.svg,n=e.children,r=e.onClick;return a.a.createElement(jr,{onClick:r},a.a.createElement(Hr,{as:t})," ",n)};function Nr(){var e=Object(s.a)(["\n  display: flex;\n  flex-direction: row;\n  flex-wrap: wrap;\n  margin: 10px auto;\n  padding: 20px;\n  background-color: white;\n\n  -webkit-box-shadow: 0px 0px 27px -9px rgba(0, 0, 0, 0.35);\n  -moz-box-shadow: 0px 0px 27px -9px rgba(0, 0, 0, 0.35);\n  box-shadow: 0px 0px 27px -9px rgba(0, 0, 0, 0.35);\n  border-radius: 5px;\n\n  & > * {\n    margin-right: 5px;\n  }\n  & > *:last-child {\n    margin-right: 0;\n  }\n"]);return Nr=function(){return e},e}var Ur={setFtp:Kt,setWeight:Gt,addInterval:yn,clearWorkout:Z,loadWorkout:P},Br=m.b.div(Nr()),Kr=Object(c.b)((function(e){return{sportType:X(e),ftp:Vt(e),weight:Jt(e),mode:pn(e)}}),Ur)((function(e){var t=e.mode,n=e.addInterval,r=Object(Dn.a)(e,["mode","addInterval"]);return a.a.createElement(Br,null,"bike"===r.sportType?a.a.createElement(a.a.Fragment,null,a.a.createElement(Wr,{color:Dt.GRAY,onClick:function(){return n(rt({intensity:.5},t))}},"Z1"),a.a.createElement(Wr,{color:Dt.BLUE,onClick:function(){return n(rt({intensity:qt.Z2.min},t))}},"Z2"),a.a.createElement(Wr,{color:Dt.GREEN,onClick:function(){return n(rt({intensity:qt.Z3.min},t))}},"Z3"),a.a.createElement(Wr,{color:Dt.YELLOW,onClick:function(){return n(rt({intensity:qt.Z4.min},t))}},"Z4"),a.a.createElement(Wr,{color:Dt.ORANGE,onClick:function(){return n(rt({intensity:qt.Z5.min},t))}},"Z5"),a.a.createElement(Wr,{color:Dt.RED,onClick:function(){return n(rt({intensity:qt.Z6.min},t))}},"Z6")):a.a.createElement(Ar,{svg:pr,onClick:function(){return n(rt({},t))}},"Steady Pace"),a.a.createElement(Ar,{svg:qn,onClick:function(){return n(at({startIntensity:.25,endIntensity:.75},t))}},"Warm up"),a.a.createElement(Ar,{svg:Bn,onClick:function(){return n(at({startIntensity:.75,endIntensity:.25},t))}},"Cool down"),a.a.createElement(Ar,{svg:ir,onClick:function(){return n(ot({},t))}},"Interval"),a.a.createElement(Ir,{icon:"bike"===r.sportType?p.c:p.m,onClick:function(){return n(it({},t))}},"bike"===r.sportType?"Free Ride":"Free Run"),"bike"===r.sportType&&a.a.createElement(vr,{name:"ftp",label:"FTP (W)",value:r.ftp,onChange:r.setFtp}),"bike"===r.sportType&&a.a.createElement(vr,{name:"weight",label:"Body Weight (kg)",value:r.weight,onChange:r.setWeight}),a.a.createElement(Ir,{icon:p.k,onClick:function(){window.confirm("Are you sure you want to create a new workout?")&&r.clearWorkout()}},"New"),a.a.createElement(Pr,null),a.a.createElement(Lr,{mode:t,onUpload:r.loadWorkout}))})),Gr=n(57),$r=n(79),Yr=n.n($r);function Vr(){var e=Object(s.a)(["\n  flex: 1;\n  display: inline-block;\n  font-size: 14px;\n  height: 19px;\n"]);return Vr=function(){return e},e}function Jr(){var e=Object(s.a)(["\n  background-color: rgba(255, 255, 255, 0.1);\n  color: white;\n  border: 0;\n  border-bottom: 0px solid white;\n  font-size: 14px;\n  min-width: 1px;\n  flex: 1;\n"]);return Jr=function(){return e},e}function _r(){var e=Object(s.a)(["\n  font-size: 14px;\n  padding-right: 5px;\n"]);return _r=function(){return e},e}function qr(){var e=Object(s.a)(["\n  display: flex;\n"]);return qr=function(){return e},e}function Qr(){var e=Object(s.a)(["\n  position: absolute;\n  z-index: 100;\n  top: -95px;\n  left: 0;\n  color: white;\n  background-color: rgba(0, 0, 0, 0.7);\n  width: 150px;\n  border-radius: 5px;\n  margin: 5px 0;\n  font-size: 14px;\n  padding: 5px;\n"]);return Qr=function(){return e},e}var Xr=m.b.div(Qr());function ea(e){var t,n=e.interval,r=e.mode,i=e.onCadenceChange;return a.a.createElement(a.a.Fragment,null,"steady"===n.type&&a.a.createElement(a.a.Fragment,null,a.a.createElement("div",null,a.a.createElement(f.a,{icon:p.e,fixedWidth:!0})," ",Ot(r.power(n.intensity))),a.a.createElement("div",null,(t=r.wkg(n.intensity),Math.round(10*t)/10+" W/kg")," \xb7"," ",Et(n.intensity)," FTP")),"ramp"===n.type&&a.a.createElement(a.a.Fragment,null,a.a.createElement("div",null,a.a.createElement(f.a,{icon:p.e,fixedWidth:!0})," ",Ot(r.power(n.startIntensity))," -"," ",Ot(r.power(n.endIntensity))),a.a.createElement("div",null,Et(n.startIntensity)," -"," ",Et(n.endIntensity)," FTP")),a.a.createElement(ta,{cadence:n.cadence,onChange:i}))}var ta=function(e){var t=e.cadence,n=e.onChange,i=Object(r.useState)(!1),o=Object(d.a)(i,2),c=o[0],l=o[1],u=Object(r.useState)(!1),s=Object(d.a)(u,2),f=s[0],p=s[1];return a.a.createElement(ra,{onMouseOver:function(){return l(!0)},onMouseOut:function(){return l(!1)}},a.a.createElement(aa,null,a.a.createElement("img",{src:Yr.a,width:"16",alt:"Cadence"})),c||f?a.a.createElement(ia,{$cadence:t,$onCadenceChange:n,onFocus:function(){return p(!0)},onBlur:function(){return p(!1)}}):a.a.createElement(oa,null,t?t+" rpm":"\u2014"))};function na(e){var t=e.interval,n=e.mode;return a.a.createElement(a.a.Fragment,null,a.a.createElement("div",null,a.a.createElement(f.a,{icon:p.l,fixedWidth:!0})," ",xt(n.intervalDistance(t))),"steady"===t.type&&a.a.createElement(a.a.Fragment,null,a.a.createElement("div",null,Et(t.intensity)," ",jt(t.pace)),a.a.createElement("div",null,wt(n.speed(t.intensity,t.pace)))),"ramp"===t.type&&a.a.createElement(a.a.Fragment,null,a.a.createElement("div",null,Et(t.startIntensity)," to"," ",Et(t.endIntensity)," ",jt(t.pace)),a.a.createElement("div",null,wt(n.speed(t.startIntensity,t.pace))," ","to"," ",wt(n.speed(t.endIntensity,t.pace)))))}var ra=m.b.div(qr()),aa=m.b.label(_r()),ia=m.b.input.attrs((function(e){return{type:"number",min:"40",max:"150",step:"5",value:e.$cadence||"",onChange:function(t){e.$onCadenceChange(t.target.value?parseInt(t.target.value):void 0)},onClick:function(e){e.stopPropagation()}}}))(Jr()),oa=m.b.span(Vr()),ca=function(e){var t=e.mode,n=Object(Dn.a)(e,["mode"]);return a.a.createElement(Xr,null,a.a.createElement("div",null,a.a.createElement(f.a,{icon:p.f,fixedWidth:!0})," ",yt(t.intervalDuration(n.interval))),t instanceof mt?a.a.createElement(ea,Object.assign({mode:t},n)):a.a.createElement(na,Object.assign({mode:t},n)))},la=n(172),ua=n.n(la);function sa(){var e=Object(s.a)(["\n  display: flex;\n  align-items: center;\n  & > span {\n    padding-left: 5px;\n  }\n"]);return sa=function(){return e},e}function da(){var e=Object(s.a)(["\n  position: absolute;\n  bottom: 0;\n  box-sizing: border-box;\n  padding: 2px;\n  color: white;\n  height: ","px;\n"]);return da=function(){return e},e}var fa=function(e){var t=e.cadence,n=e.instructions,r=e.height,i=e.className;return a.a.createElement(pa,{className:i,$height:r},t&&a.a.createElement(ma,null,a.a.createElement("img",{src:Yr.a,alt:"Has cadence",width:"16"}),a.a.createElement("span",null,t)),n.length>0&&a.a.createElement(ma,null,a.a.createElement(f.a,{icon:p.g,size:"sm",fixedWidth:!0,color:"white"}),a.a.createElement("span",null,n.length)))},pa=m.b.div(da(),(function(e){return e.$height})),ma=m.b.div(sa());function ha(){var e=Object(s.a)(["\n  padding-top: 25px;\n"]);return ha=function(){return e},e}function ba(){var e=Object(s.a)(['\n  border: 1px solid white;\n  background-image: url("','");\n']);return ba=function(){return e},e}function ga(){var e=Object(s.a)(["\n  position: relative;\n"]);return ga=function(){return e},e}var va=m.b.div(ga()),ya=Object(m.b)(Gr.a)(ba(),ua.a),xa=Object(m.b)(fa)(ha()),Oa=function(e){var t=e.interval,n=e.mode,i=Object(Dn.a)(e,["interval","mode"]),o=Object(r.useState)(n.lengthToWidth(t.length)),c=Object(d.a)(o,2),l=c[0],u=c[1],s=Object(r.useState)(!1),f=Object(d.a)(s,2),p=f[0],m=f[1],h=function(e){i.onChange(Object(W.a)(Object(W.a)({},t),{},{length:n.widthToLength(l+e)}))};return a.a.createElement(va,{onMouseEnter:function(){return m(!0)},onMouseLeave:function(){return m(!1)},style:i.selected?{zIndex:1}:{},onClick:function(){return i.onClick(t.id)}},(i.selected||p)&&a.a.createElement(ca,{interval:t,mode:n,onCadenceChange:function(e){return function(e){i.onChange(Object(W.a)(Object(W.a)({},t),{},{cadence:e}))}(e)}}),a.a.createElement(ya,{size:{width:n.lengthToWidth(t.length),height:160},minWidth:3,minHeight:160,maxHeight:160,enable:{right:!0},grid:[1,1],onResizeStop:function(e,t,n,r){return a=r.width,u(l+a),void h(a);var a},onResize:function(e,t,n,r){return h(r.width)}},a.a.createElement(xa,{height:160,cadence:t.cadence,instructions:t.instructions})))};function Ea(){var e=Object(s.a)(["\n  border-radius: 10px;\n  border: 1px solid white;\n"]);return Ea=function(){return e},e}function ja(){var e=Object(s.a)(["\n  position: relative;\n"]);return ja=function(){return e},e}var wa=m.b.div(ja()),ka=Object(m.b)(Gr.a)(Ea()),Ia=function(e){var t=e.interval,n=e.mode,i=Object(Dn.a)(e,["interval","mode"]),o={backgroundColor:Xt(t.intensity)},c=Object(r.useState)(n.lengthToWidth(t.length)),l=Object(d.a)(c,2),u=l[0],s=l[1],f=Object(r.useState)(n.intensityToHeight(t.intensity)),p=Object(d.a)(f,2),m=p[0],h=p[1],b=Object(r.useState)(!1),g=Object(d.a)(b,2),v=g[0],y=g[1],x=Object(r.useState)(i.selected),O=Object(d.a)(x,2),E=O[0],j=O[1];Object(r.useEffect)((function(){j(i.selected)}),[i.selected]);var w=function(e,r){i.onChange(Object(W.a)(Object(W.a)({},t),{},{length:n.widthToLength(u+e),intensity:n.heightToIntensity(m+r)}))};return a.a.createElement(wa,{onMouseEnter:function(){return y(!0)},onMouseLeave:function(){return y(!1)},onClick:function(){return i.onClick(t.id)},style:i.selected?{zIndex:10}:{}},(E||v)&&i.showTooltip&&a.a.createElement(ca,{interval:t,mode:n,onCadenceChange:function(e){return function(e){i.onChange(Object(W.a)(Object(W.a)({},t),{},{cadence:e}))}(e)}}),a.a.createElement(ka,{size:{width:n.lengthToWidth(t.length),height:n.intensityToHeight(t.intensity)},minWidth:3,minHeight:250*qt.Z1.min,maxHeight:250*qt.Z6.max,enable:{top:!0,right:!0},grid:[1,1],onResizeStop:function(e,t,n,r){return a=r.width,i=r.height,s(u+a),h(m+i),void w(a,i);var a,i},onResize:function(e,t,n,r){return w(r.width,r.height)},style:o},a.a.createElement(fa,{height:n.intensityToHeight(t.intensity),cadence:t.cadence,instructions:t.instructions})))};function Ca(){var e=Object(s.a)(["\n  fill: white;\n  display: hidden;\n"]);return Ca=function(){return e},e}function Ta(){var e=Object(s.a)(["\n  fill: transparent;\n"]);return Ta=function(){return e},e}function Sa(){var e=Object(s.a)(["\n  position: absolute;\n  bottom: 0;\n  left: 0;\n"]);return Sa=function(){return e},e}function Ra(){var e=Object(s.a)(["\n  &:first-child {\n    border-bottom-left-radius: 5px;\n  }\n  &:last-child {\n    border-bottom-right-radius: 5px;\n  }\n"]);return Ra=function(){return e},e}function La(){var e=Object(s.a)(["\n  position: absolute;\n  bottom: 0px;\n  left: 0;\n  width: 100%;\n  display: flex;\n"]);return La=function(){return e},e}function Fa(){var e=Object(s.a)(["\n  border-top: 1px dotted gray;\n  z-index: 5;\n"]);return Fa=function(){return e},e}function Wa(){var e=Object(s.a)(["\n  display: flex;\n  align-items: flex-end;\n"]);return Wa=function(){return e},e}function za(){var e=Object(s.a)(["\n  position: relative;\n"]);return za=function(){return e},e}var Da=m.b.div(za()),Za=m.b.div(Wa()),Pa=Object(m.b)(Gr.a)(Fa()),Ma=function(e){var t=e.interval,n=e.startHeight,r=e.endHeight,i=r>n?r:n,o=r>n?Na(t.startIntensity,t.endIntensity):Na(t.endIntensity,t.startIntensity),c=r>n?"row":"row-reverse";return a.a.createElement(Ha,{style:{height:i,flexDirection:c,backgroundColor:Xt(t.startIntensity)}},a.a.createElement(Aa,{style:{backgroundColor:Dt.GRAY,width:"".concat(100*o.Z1/Math.abs(t.endIntensity-t.startIntensity),"%")}}),a.a.createElement(Aa,{style:{backgroundColor:Dt.BLUE,width:"".concat(100*o.Z2/Math.abs(t.endIntensity-t.startIntensity),"%")}}),a.a.createElement(Aa,{style:{backgroundColor:Dt.GREEN,width:"".concat(100*o.Z3/Math.abs(t.endIntensity-t.startIntensity),"%")}}),a.a.createElement(Aa,{style:{backgroundColor:Dt.YELLOW,width:"".concat(100*o.Z4/Math.abs(t.endIntensity-t.startIntensity),"%")}}),a.a.createElement(Aa,{style:{backgroundColor:Dt.ORANGE,width:"".concat(100*o.Z5/Math.abs(t.endIntensity-t.startIntensity),"%")}}),a.a.createElement(Aa,{style:{backgroundColor:Dt.RED,width:"".concat(100*o.Z6/Math.abs(t.endIntensity-t.startIntensity),"%")}}))},Ha=m.b.div(La()),Aa=m.b.div(Ra());function Na(e,t){var n={};return Qt.forEach((function(r,a){e>=r[0]&&e<r[1]?n["Z"+(a+1)]=r[1]-e:t>=r[0]&&t<r[1]?n["Z"+(a+1)]=t-r[0]:t>=r[1]&&e<r[0]?n["Z"+(a+1)]=r[1]-r[0]:n["Z"+(a+1)]=0})),n}var Ua=function(e){var t=e.width,n=e.startHeight,r=e.endHeight,i=r>n?r:n,o=r>n?r-n:n-r,c=r>n?0:t,l=r>n?o:0,u=r>n?0:o;return a.a.createElement(Ba,{height:"".concat(i),width:"".concat(t)},a.a.createElement(Ka,{points:"0,".concat(l," 0,").concat(i," ").concat(t,",").concat(i," ").concat(t,",").concat(u)}),a.a.createElement(Ga,{points:"0,0 ".concat(c,",").concat(o," ").concat(t,",0")}))},Ba=m.b.svg(Sa()),Ka=m.b.polygon(Ta()),Ga=m.b.polygon(Ca()),$a=function(e){var t=e.interval,n=e.mode,i=Object(Dn.a)(e,["interval","mode"]),o=Object(r.useState)(!1),c=Object(d.a)(o,2),l=c[0],u=c[1],s=Object(r.useState)(!1),f=Object(d.a)(s,2),p=f[0],m=f[1],h=n.lengthToWidth(t.length),b=Object(r.useState)(h),g=Object(d.a)(b,2),v=g[0],y=g[1];Object(r.useEffect)((function(){p||y(n.lengthToWidth(t.length))}),[p,t.length,n]);var x=n.intensityToHeight(t.startIntensity),O=Object(r.useState)(x),E=Object(d.a)(O,2),j=E[0],w=E[1],k=n.intensityToHeight(t.endIntensity),I=Object(r.useState)(k),C=Object(d.a)(I,2),T=C[0],S=C[1];return a.a.createElement(Da,{onMouseEnter:function(){return u(!0)},onMouseLeave:function(){return u(!1)},style:i.selected?{zIndex:1}:{},onClick:function(){return i.onClick(t.id)}},(i.selected||l)&&a.a.createElement(ca,{interval:t,mode:n,onCadenceChange:function(e){return function(e){i.onChange(Object(W.a)(Object(W.a)({},t),{},{cadence:e}))}(e)}}),a.a.createElement(Za,{onClick:function(){return i.onClick(t.id)}},a.a.createElement(Pa,{size:{width:v/2,height:j},minWidth:3,minHeight:250*qt.Z1.min,maxHeight:250*qt.Z6.max,enable:{top:!0,right:!0},grid:[1,1],onResizeStart:function(){return m(!0)},onResizeStop:function(e,t,n,r){var a;a=r.height,w(j+a),m(!1)},onResize:function(e,r,a,o){return c=o.height,void i.onChange(Object(W.a)(Object(W.a)({},t),{},{startIntensity:n.heightToIntensity(j+c)}));var c}},a.a.createElement(fa,{height:x>k?k:x,cadence:t.cadence,instructions:t.instructions})),a.a.createElement(Pa,{size:{width:v/2,height:T},minWidth:3,minHeight:250*qt.Z1.min,maxHeight:250*qt.Z6.max,enable:{top:!0,right:!0},grid:[1,1],onResizeStart:function(){return m(!0)},onResizeStop:function(e,r,a,o){!function(e,r){var a=n.widthToLength(v+e);y(n.lengthToWidth(a)),S(T+r),i.onChange(Object(W.a)(Object(W.a)({},t),{},{length:a}))}(o.width,o.height),m(!1)},onResize:function(e,r,a,o){return c=o.width,l=o.height,void i.onChange(Object(W.a)(Object(W.a)({},t),{},{length:n.widthToLength(v+c,{meters:1,seconds:1}),startIntensity:n.heightToIntensity(j),endIntensity:n.heightToIntensity(T+l)}));var c,l}})),a.a.createElement(Ma,{interval:t,startHeight:x,endHeight:k}),a.a.createElement(Ua,{width:h,startHeight:x,endHeight:k}))},Ya=n(274);function Va(e,t,n){return function(r){return n.fromLength(r.offset)>=e&&n.fromLength(r.offset)<t}}function Ja(){var e=Object(s.a)(["\n  display: flex;\n  flex-direction: row;\n  align-items: flex-end;\n"]);return Ja=function(){return e},e}function _a(){var e=Object(s.a)(["\n  position: absolute;\n  margin-top: -30px;\n"]);return _a=function(){return e},e}var qa=m.b.div(_a()),Qa=m.b.div(Ja()),Xa=function(e){var t=e.interval,n=Object(Dn.a)(e,["interval"]),i=Object(r.useMemo)((function(){return function(e,t){return Object(Ya.a)(0,e.repeat).flatMap((function(n){var r=t.fromLength(e.onLength),a=t.fromLength(e.offLength),i=(r+a)*n;return[rt({length:e.onLength,intensity:e.onIntensity,cadence:e.onCadence,pace:e.pace,instructions:e.instructions.filter(Va(i,i+r,t))},t),rt({length:e.offLength,intensity:e.offIntensity,cadence:e.offCadence,pace:e.pace,instructions:e.instructions.filter(Va(i+r,i+r+a,t))},t)]}))}(t,n.mode)}),[t.repeat,t.instructions]);function o(e){for(var r=i.findIndex((function(t){return t.id===e.id})),a=0;a<i.length;a++)r%2===a%2&&(i[a].length=e.length,i[a].intensity=e.intensity,i[a].cadence=e.cadence);n.onChange(Object(W.a)(Object(W.a)({},t),{},{onCadence:i[0].cadence,offCadence:i[1].cadence,repeat:t.repeat,onLength:i[0].length,offLength:i[1].length,onIntensity:i[0].intensity,offIntensity:i[1].intensity}))}return a.a.createElement("div",null,a.a.createElement(qa,null,a.a.createElement("button",{onClick:function(){n.onChange(Object(W.a)(Object(W.a)({},t),{},{repeat:t.repeat+1}))}},"+"),a.a.createElement("button",{onClick:function(){t.repeat>1&&n.onChange(Object(W.a)(Object(W.a)({},t),{},{repeat:t.repeat-1}))}},"-")),a.a.createElement(Qa,null,i.map((function(e,r){return c=e,l=0===r||r===i.length-1,a.a.createElement(Ia,{key:c.id,interval:c,mode:n.mode,onChange:o,onClick:function(){return n.onClick(t.id)},selected:n.selected,showTooltip:l});var c,l}))))},ei=n(173),ti=n.n(ei);function ni(){var e=Object(s.a)(["\n  color: gray;\n  &:hover {\n    color: #666;\n  }\n"]);return ni=function(){return e},e}function ri(){var e=Object(s.a)(["\n  display: block;\n  padding: 5px;\n  width: 250px;\n  background-color: white;\n"]);return ri=function(){return e},e}function ai(){var e=Object(s.a)(["\n  font-size: 13px;\n"]);return ai=function(){return e},e}function ii(){var e=Object(s.a)(["\n  position: absolute;\n  top: 30px;\n  left: 0px;\n  right: 0;\n  height: 90vh;\n  width: 1px;\n  border-left: 1px dotted gray;\n  z-index: 0;\n"]);return ii=function(){return e},e}function oi(){var e=Object(s.a)(["\n  position: relative;\n  padding: 5px;\n"]);return oi=function(){return e},e}function ci(){var e=Object(s.a)(["\n  display: block;\n  opacity: 0.7;\n  &:hover {\n    opacity: 0.8;\n  }\n"]);return ci=function(){return e},e}function li(){var e=Object(s.a)(["\n  position: absolute;\n"]);return li=function(){return e},e}var ui={meters:10,seconds:5},si=m.b.div(li()),di=Object(m.b)(f.a).attrs((function(){return{icon:p.g,size:"lg",fixedWidth:!0,className:"handle"}}))(ci()),fi=m.b.div(oi()),pi=m.b.div(ii()),mi=m.b.span(ai()),hi=m.b.textarea(ri()),bi=Object(m.b)(f.a).attrs((function(){return{icon:p.p,fixedWidth:!0}}))(ni()),gi=function(e){var t=Object(r.useState)(e.instruction.text),n=Object(d.a)(t,2),i=n[0],o=n[1],c=Object(r.useState)(e.mode.lengthToWidth(e.instruction.offset)),l=Object(d.a)(c,2),u=l[0],s=l[1],f=Object(r.useState)(!1),p=Object(d.a)(f,2),m=p[0],h=p[1];var b;return a.a.createElement(ti.a,{axis:"x",handle:".handle",defaultPosition:{x:u,y:e.index%5*20},bounds:{left:0,right:e.width},scale:1,onStop:function(t,n){return r=n.x,void e.onChange({id:e.instruction.id,text:i,offset:e.mode.widthToLength(r,ui)});var r},onDrag:function(e,t){return n=t.x,h(!1),void s(n);var n}},a.a.createElement(si,null,a.a.createElement(di,{onMouseDown:function(){return h(!m)}}),m&&a.a.createElement(fi,null,a.a.createElement(bi,{onClick:function(){(""===i||window.confirm("Are you sure you want to delete this comment?"))&&e.onDelete(e.instruction.id)}}),a.a.createElement(mi,null,(b=e.instruction.offset,Qe(b)?yt(b):"".concat(b.meters," m"))),a.a.createElement(hi,{value:i,onChange:function(t){return n=t.target.value,o(n),void e.onChange({id:e.instruction.id,text:n,offset:e.mode.widthToLength(u,ui)});var n}})),a.a.createElement(pi,null)))};function vi(){var e=Object(s.a)(["\n  position: absolute;\n  top: 80px;\n  z-index: 11;\n"]);return vi=function(){return e},e}var yi=function(e){var t=e.instructions,n=e.mode,r=e.width,i=e.onChange,o=e.onDelete;return a.a.createElement(xi,null,t.map((function(e,t){return a.a.createElement(gi,{key:e.id,instruction:e,width:r,onChange:i,onDelete:o,index:t,mode:n})})))},xi=m.b.div(vi()),Oi=function(e){var t=e.interval,n=e.mode,r=e.selected,i=e.onChange,o=e.onClick;switch(t.type){case"steady":return a.a.createElement(Ia,{interval:t,mode:n,onChange:i,onClick:o,selected:r,showTooltip:!0});case"ramp":return a.a.createElement($a,{interval:t,mode:n,onChange:i,onClick:o,selected:r});case"free":return a.a.createElement(Oa,{interval:t,mode:n,onChange:i,onClick:o,selected:r});case"repetition":return a.a.createElement(Xa,{interval:t,mode:n,onChange:i,onClick:o,selected:r})}},Ei=function(e){return a.a.createElement("div",null,a.a.createElement(Oi,e),e.selected&&a.a.createElement(yi,{instructions:e.interval.instructions,mode:e.mode,width:e.mode.lengthToWidth(e.mode.intervalLength(e.interval)),onChange:function(t){return e.onInstructionChange({intervalId:e.interval.id,instruction:t})},onDelete:function(t){return e.onInstructionDelete({intervalId:e.interval.id,instructionId:t})}}))};function ji(){var e=Object(s.a)(['\n  position: relative;\n  display: inline-block;\n  margin-top: 20px;\n  padding: 0;\n\n  &::before {\n    content: "";\n    position: absolute;\n    width: 1px;\n    height: 10px;\n    top: -20px;\n    left: 0;\n    background-color: gray;\n  }\n']);return ji=function(){return e},e}function wi(){var e=Object(s.a)(["\n  position: absolute;\n  bottom: 0px;\n  border-top: 1px solid gray;\n  overflow: hidden;\n  min-width: 1320px;\n  width: ","px;\n"]);return wi=function(){return e},e}var ki=m.b.div(wi(),(function(e){return e.width})),Ii=m.b.span(ji());function Ci(){var e=Object(s.a)(["\n  width: 200px;\n"]);return Ci=function(){return e},e}var Ti=Object(m.b)(Ii)(Ci()),Si=function(e){var t,n=e.width;return a.a.createElement(ki,{width:n},(t=6,Object(F.a)(new Array(t)).flatMap((function(e,t){return["00","10","20","30","40","50"].map((function(e){return"".concat(t,":").concat(e)}))}))).map((function(e){return a.a.createElement(Ti,{key:e},e)})))};function Ri(){var e=Object(s.a)(["\n  position: absolute;\n  bottom: 0;\n  left: 0;\n  height: ","px;\n\n  /* Zone 6 has no upper bound */\n  &:not(:first-child) {\n    border-top: 1px solid gray;\n  }\n"]);return Ri=function(){return e},e}function Li(){var e=Object(s.a)(["\n  position: absolute;\n  bottom: 50px;\n  left: 2px;\n  color: gray;\n"]);return Li=function(){return e},e}var Fi=m.b.div(Li()),Wi=m.b.div(Ri(),(function(e){return 250*e.zone.max})),zi=function(){return a.a.createElement(Fi,null,Object.entries(qt).reverse().map((function(e){var t=Object(d.a)(e,2),n=t[0],r=t[1];return a.a.createElement(Wi,{key:n,zone:r},n)})))};function Di(){var e=Object(s.a)(["\n  width: 100px;\n"]);return Di=function(){return e},e}var Zi=Object(m.b)(Ii)(Di()),Pi=function(e){var t=e.width;return a.a.createElement(ki,{width:t},Object(F.a)(new Array(44)).map((function(e,t){return a.a.createElement(Zi,{key:t},t,"K")})))};function Mi(){var e=Object(s.a)(["\n  font-size: 16px;\n  background-color: rgba(0, 0, 0, 0.7);\n  color: white;\n  padding: 10px;\n  border-radius: 5px;\n"]);return Mi=function(){return e},e}var Hi=m.b.select(Mi()),Ai=function(e){var t=e.value,n=e.onChange;return a.a.createElement(Hi,{name:"pace",value:t,onChange:function(e){return n(parseInt(e.target.value))}},a.a.createElement("option",{value:"0"},"1 Mile Pace"),a.a.createElement("option",{value:"1"},"5K Pace"),a.a.createElement("option",{value:"2"},"10K Pace"),a.a.createElement("option",{value:"3"},"Half Marathon Pace"),a.a.createElement("option",{value:"4"},"Marathon Pace"))};function Ni(){var e=Object(s.a)(["\n  padding: 20px;\n  margin: 0 5px;\n  background-color: rgba(0, 0, 0, 0.7);\n  color: white;\n  border: 0;\n  border-radius: 50%;\n  cursor: pointer;\n\n  &:hover {\n    background-color: rgba(0, 0, 0, 0.8);\n  }\n"]);return Ni=function(){return e},e}var Ui=m.b.button(Ni()),Bi=function(e){var t=e.title,n=e.icon,r=e.onClick;return a.a.createElement(Ui,{onClick:r,title:t},a.a.createElement(f.a,{icon:n,size:"lg",fixedWidth:!0}))};function Ki(e,t){return Object(W.a)({id:Object(Ve.a)(),text:"",offset:"time"===t.lengthType?_e(0):Je(0)},e)}function Gi(){var e=Object(s.a)(["\n  position: absolute;\n  top: 0;\n  left: 0;\n  right: 0;\n\n  display: flex;\n  justify-content: center;\n  padding: 5px;\n  z-index: 10;\n"]);return Gi=function(){return e},e}var $i={setSelectedIntervalPace:Rn,removeSelectedInterval:kn,duplicateSelectedInterval:In,moveSelectedInterval:Sn,addInstruction:wn},Yi=m.b.div(Gi()),Vi=Object(c.b)((function(e){return{mode:pn(e),sportType:X(e),selectedIntervalPace:Wn(e),selectedIntervalId:zn(e)}}),$i)((function(e){var t=e.mode,n=e.sportType,r=e.selectedIntervalPace,i=e.selectedIntervalId,o=e.setSelectedIntervalPace,c=e.removeSelectedInterval,l=e.duplicateSelectedInterval,u=e.moveSelectedInterval,s=e.addInstruction;return a.a.createElement(Yi,null,a.a.createElement(Bi,{title:"Move Left",icon:p.a,onClick:function(){return u(-1)}}),a.a.createElement(Bi,{title:"Move Right",icon:p.b,onClick:function(){return u(1)}}),a.a.createElement(Bi,{title:"Delete",icon:p.o,onClick:c}),a.a.createElement(Bi,{title:"Duplicate",icon:p.h,onClick:l}),a.a.createElement(Bi,{title:"Add text event",icon:p.g,onClick:function(){i&&s({intervalId:i,instruction:Ki({},t)})}}),"run"===n&&a.a.createElement(Ai,{value:r,onChange:o}))})),Ji=n(174);function _i(){var e=Object(s.a)(["\n  position: absolute;\n  background-color: rgba(255, 255, 255, 0.9);\n  top: 0;\n  left: 0;\n  right: 0;\n  bottom: 0;\n  width: 50000px;\n  height: 100%;\n  z-index: 1;\n"]);return _i=function(){return e},e}function qi(){var e=Object(s.a)(["\n  position: absolute;\n  display: flex;\n  flex-wrap: nowrap;\n  justify-content: flex-start;\n  align-items: flex-end;\n  bottom: 0px;\n  top: 0px;\n  padding-bottom: 40px;\n  margin-right: 100px;\n"]);return qi=function(){return e},e}function Qi(){var e=Object(s.a)(["\n  position: absolute;\n  width: 100%;\n  max-width: 1320px;\n  height: 100%;\n  overflow-y: hidden;\n  overflow-x: visible;\n  bottom: 10px;\n"]);return Qi=function(){return e},e}function Xi(){var e=Object(s.a)(["\n  flex: 1;\n  position: relative;\n  white-space: nowrap;\n  background-color: white;\n\n  padding: 0px 40px;\n  margin: 10px auto;\n  overflow-x: hidden;\n  width: 100%;\n  max-width: 1280px;\n  -webkit-box-shadow: 0px 0px 27px -9px rgba(0, 0, 0, 0.35);\n  -moz-box-shadow: 0px 0px 27px -9px rgba(0, 0, 0, 0.35);\n  box-shadow: 0px 0px 27px -9px rgba(0, 0, 0, 0.35);\n  border-radius: 5px;\n"]);return Xi=function(){return e},e}var eo={updateInterval:xn,setSelectedId:sn,clearSelection:dn,updateInstruction:jn,removeInstruction:En},to=m.b.div(Xi()),no=m.b.div(Qi()),ro=m.b.div(qi()),ao=m.b.div(_i()),io=Object(c.b)((function(e){return{lengthType:ee(e),intervals:Ln(e),mode:pn(e),selectedId:fn(e)}}),eo)((function(e){var t=e.lengthType,n=e.intervals,i=e.mode,o=e.selectedId,c=e.updateInterval,l=e.setSelectedId,u=e.clearSelection,s=e.updateInstruction,f=e.removeInstruction,p=Object(r.useRef)(null),m=Object(r.useRef)(null),h=Object(r.useState)(1320),b=Object(d.a)(h,2),g=b[0],v=b[1];function y(e){e===o?u():l(e)}return Object(r.useEffect)(Object(Ji.debounce)((function(){var e,t,n=(null===(e=p.current)||void 0===e?void 0:e.scrollWidth)||0,r=(null===(t=m.current)||void 0===t?void 0:t.scrollWidth)||0;v(n<r?r:n)}),200),[p,m,n]),a.a.createElement(to,null,o&&a.a.createElement(Vi,null),a.a.createElement(no,{ref:m},o&&a.a.createElement(ao,{style:{width:g},onClick:u}),a.a.createElement(ro,{ref:p},n.map((function(e){return a.a.createElement(Ei,{key:e.id,interval:e,mode:i,onChange:c,onClick:y,onInstructionChange:s,onInstructionDelete:f,selected:e.id===o})}))),"time"===t?a.a.createElement(Si,{width:g}):a.a.createElement(Pi,{width:g})),a.a.createElement(zi,null))}));function oo(){var e=Object(s.a)(["\n  padding: 10px;\n  display: flex;\n  flex-direction: row;\n"]);return oo=function(){return e},e}function co(){var e=Object(s.a)(["\n  margin: 0 auto;\n  text-align: left;\n  max-width: 1360px;\n  width: 100%;\n  display: flex;\n  flex-direction: row;\n"]);return co=function(){return e},e}function lo(){var e=Object(s.a)(["\n  display: flex;\n  flex-direction: column;\n  min-height: 100%;\n  margin: 0px;\n  background-color: #eaeaea;\n  overflow-x: hidden;\n"]);return lo=function(){return e},e}var uo={setSportType:$,setLengthType:Y,setRunningTimes:$t,setIntervals:vn,adjustSelectedIntervalIntensity:Cn,adjustSelectedIntervalLength:Tn,updateInterval:xn,setSelectedId:sn,clearSelection:dn,removeSelectedInterval:kn},so=Object(m.b)(Ye)(lo()),fo=m.b.div(co()),po=m.b.div(oo()),mo=Object(c.b)((function(e){return{name:J(e),author:_(e),description:q(e),sportType:X(e),lengthType:ee(e),ftp:Vt(e),runningTimes:_t(e),intervals:Ln(e),mode:pn(e)}}),uo)((function(e){var t=e.name,n=e.author,i=e.description,o=e.sportType,c=e.lengthType,l=e.ftp,u=e.runningTimes,s=e.intervals,f=e.mode,m=e.setSportType,h=e.setLengthType,b=e.setRunningTimes,g=e.setIntervals,v=e.adjustSelectedIntervalIntensity,y=e.adjustSelectedIntervalLength,x=e.removeSelectedInterval,E=Object(r.useState)(!1),j=Object(d.a)(E,2),w=j[0],k=j[1],I=function(){return 0===s.length};function T(e){return"time"===f.lengthType?_e(5*e):Je(200*e)}return a.a.createElement(so,{onBackspacePress:x,onUpPress:function(){return v(.01)},onDownPress:function(){return v(-.01)},onLeftPress:function(){return y(T(-1))},onRightPress:function(){return y(T(1))}},a.a.createElement(Oe,{name:t,description:i}),w&&a.a.createElement(O,{width:"500px",onClose:function(){return k(!1)}},a.a.createElement(ye,null)),a.a.createElement(fo,null,a.a.createElement(At,{name:t,author:n,description:i,onClick:function(){return k(!0)}}),a.a.createElement(po,null,a.a.createElement(Rt,{intervals:s,ftp:l,mode:f}),"run"===o&&a.a.createElement($e,{label:"Duration Type",leftValue:"time",rightValue:"distance",leftIcon:p.f,rightIcon:p.l,selected:c,onChange:function(e){(I()||window.confirm("Switching from ".concat(c," to ").concat(e," will clear current workout. Are you sure?")))&&(g([]),h(e))}}),a.a.createElement($e,{label:"Sport Type",leftValue:"bike",rightValue:"run",leftIcon:p.d,rightIcon:p.m,selected:o,onChange:function(e){(I()||window.confirm("Switching from ".concat(o," to ").concat(e," will clear current workout. Are you sure?")))&&(g([]),m(e))}}))),"run"===o&&a.a.createElement(Fe,{times:u,onChange:b}),a.a.createElement(io,null),a.a.createElement(Kr,null),a.a.createElement(C,null))}));function ho(){return a.a.createElement(l.a,null,a.a.createElement(u.c,null,a.a.createElement(u.a,{path:"/"},a.a.createElement(mo,null))))}Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));var bo=n(80),go=n(175),vo=n.n(go),yo=Object(bo.a)({key:"root",storage:vo.a},{meta:A,athlete:Ut,intervals:bn,selectedId:ln}),xo=Object(z.a)({reducer:yo});Object(bo.b)(xo);o.a.render(a.a.createElement(a.a.StrictMode,null,a.a.createElement(c.a,{store:xo},a.a.createElement(ho,null))),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))},79:function(e,t,n){e.exports=n.p+"static/media/cadence.b638b56b.png"}},[[178,1,2]]]);
//# sourceMappingURL=main.e9b22bbf.chunk.js.map