{"version":3,"sources":["assets/freeride.svg","components/Popup/Popup.tsx","const.ts","components/Footer/Footer.tsx","rdx/state/workout.ts","rdx/state/meta.ts","components/Label/Label.tsx","components/Forms/Checkbox.tsx","components/Forms/SaveForm.tsx","types/PaceType.ts","components/Head/Head.tsx","types/runningDistances.ts","components/Layout/Column.tsx","components/EditorPage/RunningTimesEditor.tsx","components/EditorPage/LeftRightToggle.tsx","components/Keyboard/Keyboard.tsx","types/Length.ts","interval/intervalFactory.ts","utils/math.ts","modes/Mode.ts","components/Bar/multipliers.ts","modes/BikeMode.ts","modes/RunMode.ts","utils/distance.ts","utils/duration.ts","utils/format.ts","components/EditorPage/Stats.tsx","components/EditorPage/Title.tsx","rdx/state/athlete.ts","rdx/rehydrate.ts","types/Zones.ts","interval/intervalUtils.ts","utils/array.ts","rdx/state/selectedId.ts","rdx/state/mode.ts","modes/createMode.ts","rdx/state/intervals.ts","rdx/state/instructions.ts","assets/warmdown.svg","assets/warmup.svg","assets/interval.svg","assets/steady.svg","components/Editor/NumberField.tsx","components/Button/Button.tsx","components/Button/IconButton.tsx","xml/parseWorkoutXml.ts","types/Workout.ts","components/Toolbar/UploadButton.tsx","components/Button/ColorButton.tsx","components/Toolbar/DownloadButton.tsx","xml/createWorkoutXml.ts","components/Button/SvgButton.tsx","components/Toolbar/Toolbar.tsx","types/Instruction.ts","components/Tooltip/Tooltip.tsx","components/Bar/FreeBar.tsx","components/Bar/SteadyBar.tsx","components/Bar/RampBar.tsx","components/Bar/RepetitionBar.tsx","components/Bar/GenericBar.tsx","components/InstructionEditor/InstructionEditor.tsx","components/Axis/XAxis.tsx","components/Axis/TimeAxis.tsx","components/Axis/ZoneAxis.tsx","components/Axis/DistanceAxis.tsx","components/SelectionToolbar/PaceSelector.tsx","components/Button/ActionButton.tsx","components/SelectionToolbar/SelectionToolbar.tsx","components/Editor/Editor.tsx","components/EditorPage/EditorPage.tsx","App.tsx","serviceWorker.js","rdx/reducer.ts","rdx/store.ts","index.js"],"names":["module","exports","Background","styled","div","Window","CloseButton","button","Popup","props","style","width","height","onClick","onClose","icon","faTimesCircle","size","fixedWidth","children","GITHUB_URL","Footer","Container","List","Item","Hyperlink","href","target","ul","li","a","clearWorkout","createAction","loadWorkout","initialState","name","author","description","tags","sportType","lengthType","slice","createSlice","reducers","setName","state","action","payload","setAuthor","setDescription","setTags","setSportType","setLengthType","extraReducers","builder","addCase","reducer","actions","selectMeta","meta","selectName","createSelector","m","selectAuthor","selectDescription","selectTags","selectSportType","selectLengthType","Label","label","CheckboxLabel","Checkbox","type","checked","isSelected","onChange","e","onCheckboxChange","className","DEFAULT_TAGS","mapDispatchToProps","PaceType","Heading","h2","Field","FieldLabel","TextInput","input","connect","htmlFor","id","placeholder","value","as","map","tagName","key","includes","filter","item","addOrRemoveTag","Head","Helmet","content","runningDistances","Column","RunningTimesEditor","times","estimateRunningTimes","useCallback","timesOrig","distances","estimatedTimes","forEach","i","index","length","calculateEstimatedTimes","handleInputChange","pace","t","timesCopy","time","oneMile","fiveKm","tenKm","halfMarathon","marathon","Col","RunTimeInput","title","TimePickerStyleOverrides","StyledTimePicker","undefined","moment","utc","defaultOpenValue","duration","format","asSeconds","createGlobalStyle","TimePicker","LeftRight","ToggleIcon","FontAwesomeIcon","active","LeftRightToggle","leftValue","rightValue","leftIcon","rightIcon","selected","checkedIcon","uncheckedIcon","onColor","offColor","Keyboard","onKeyDown","event","HTMLInputElement","HTMLTextAreaElement","keyCode","onBackspacePress","preventDefault","onLeftPress","onRightPress","onUpPress","onDownPress","tabIndex","Duration","seconds","Distance","meters","defaultDuration","defaultDistance","defaultPace","defaultLength","mode","interval","uuidv4","intensity","cadence","startIntensity","defaultIntensity","endIntensity","onCadence","offCadence","repeat","onLength","offLength","onIntensity","offIntensity","floor","x","roundTo","Math","Mode","precision","this","BikeMode","ftp","weight","power","Error","onDuration","offDuration","RunMode","runningTimes","speed","distance","onDistance","offDistance","workoutDistance","intervals","sum","intervalDistance","d","workoutDuration","intervalDuration","trim","round","percentage","shortPaceName","getStressScore","tss","np","iff","npOn","iffOn","intervalFactory","npOff","iffOff","toFixed","Stats","disabled","h1","Author","p","Title","setFtp","setWeight","setRunningTimes","selectAthlete","athlete","selectFtp","selectWeight","selectRunningTimes","convertLengths","obj","Object","entries","k","v","rehydrateLengths","arr","Array","ZoneColor","rehydrateAction","REHYDRATE","Zones","Z1","min","max","Z2","Z3","Z4","Z5","Z6","ZonesArray","zoneColor","GRAY","BLUE","GREEN","YELLOW","ORANGE","RED","updateById","transform","findIndex","propEq","update","replaceById","array","setSelectedId","clearSelection","selectSelectedId","selectedId","selectMode","createMode","setIntervals","addInterval","updateInterval","removeInterval","removeSelectedInterval","createAsyncThunk","_","getState","dispatch","duplicateSelectedInterval","selectSelectedInterval","adjustSelectedIntervalIntensity","amount","selectIntervals","dIntensity","updateIntervalIntensity","adjustSelectedIntervalDuration","dDuration","updateIntervalDuration","moveSelectedInterval","direction","oldIndex","newIndex","move","moveInterval","setSelectedIntervalPace","find","selectSelectedIntervalPace","setInstructions","addInstruction","updateInstruction","instructions","removeInstruction","selectInstructions","_extends","assign","arguments","source","prototype","hasOwnProperty","call","apply","_objectWithoutProperties","excluded","sourceKeys","keys","indexOf","_objectWithoutPropertiesLoose","getOwnPropertySymbols","sourceSymbolKeys","propertyIsEnumerable","createElement","stroke","strokeWidth","fill","fillRule","points","_ref","svgRef","viewBox","ref","ForwardRef","forwardRef","y","NumberField","parseInt","Button","StyledIcon","IconButton","parseWorkoutXml","data","workout","replace","workout_file","Converter","xml2js","elements","sportTypeIndex","element","text","lengthTypeIndex","authorIndex","nameIndex","descriptionIndex","tagsIndex","el","attributes","workoutEl","totalLength","readLength","w","parseFloat","push","Power","PowerLow","Cadence","PowerHigh","Repeat","OnDuration","OffDuration","OnPower","OffPower","CadenceResting","textElements","toLowerCase","message","offset","timeoffset","UploadButton","onUpload","file","console","error","accept","display","handleUpload","files","faUpload","document","getElementById","click","ColorButton","color","createZwoFile","xml","Builder","begin","ele","up","tag","create","att","importDocument","writeLength","len","segment","ramp","intervalLength","instruction","end","pretty","createWorkoutXml","Blob","faDownload","tempFile","url","window","URL","createObjectURL","body","appendChild","download","revokeObjectURL","StyledSvg","svg","SvgButton","SteadyLogo","WarmupLogo","WarmdownLogo","IntervalLogo","faBicycle","faComment","fields","createInstruction","faFile","confirm","TooltipContainer","BikeData","wkg","onCadenceChange","faBolt","CadenceRow","CadenceLabel","CadenceInput","RunData","faRuler","attrs","step","stopPropagation","Tooltip","faClock","ResizableFreeBar","Resizable","freerideSvg","FreeBar","useState","lengthToWidth","setWidth","showTooltip","setShowTooltip","notifyChange","dWidth","widthToLength","onMouseEnter","onMouseLeave","zIndex","handleCadenceChange","minWidth","minHeight","maxHeight","enable","right","grid","onResizeStop","onResize","RoundedResizable","SteadyBar","backgroundColor","intensityToHeight","setHeight","setSelected","useEffect","dHeight","heightToIntensity","top","Ramp","ResizableRamp","Rainbow","startHeight","endHeight","trapezeHeight","bars","calculateColors","flexDirection","RampColors","Color","abs","start","zone","SvgPolygons","trapezeTop","vertexB","vertexA","vertexD","RampSvg","TransparentPolygon","HiddenPolygon","polygon","RampBar","resizableWidth","setResizableWidth","resizableStartHeight","setResizableStartHeight","resizableEndHeight","setResizableEndHeight","Buttons","SubIntervals","RepetitionBar","setRepeat","setOnLength","setOffLength","subIntervals","useMemo","range","flatMap","handleOnChange","values","sub","subInterval","withTooltip","GenericBar","roundingPrecision","DraggableItem","DragHandle","EditorContainer","VerticalLine","Offset","span","TextEditor","textarea","DeleteButton","faTrashAlt","InstructionEditor","setText","xPosition","setXPosition","showInput","setShowInput","axis","handle","defaultPosition","bounds","left","scale","onStop","position","onDrag","onMouseDown","onDelete","XAxis","XAxisValue","TimeAxisValue","TimeAxis","hours","h","ZoneItem","ZoneAxis","reverse","DistanceAxisValue","DistanceAxis","StyledSelect","select","PaceSelector","RoundButton","ActionButton","ActionsContainer","selectedIntervalPace","faArrowLeft","faArrowRight","faTrash","faCopy","Canvas","Segments","Fader","Slider","segmentsRef","useRef","xAxisWidth","setXAxisWidth","toggleSelection","current","scrollWidth","KeyboardContainer","Header","HeaderRight","savePopupIsVisile","setSavePopupVisibility","newLengthType","faBiking","faRunning","newSportType","App","path","Boolean","location","hostname","match","persistCombineReducers","storage","store","configureStore","persistStore","ReactDOM","render","StrictMode","navigator","serviceWorker","ready","then","registration","unregister","catch"],"mappings":"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","file":"static/js/main.37e6819c.chunk.js","sourcesContent":["module.exports = __webpack_public_path__ + \"static/media/freeride.d3e319d6.svg\";","import React from \"react\";\nimport { FontAwesomeIcon } from \"@fortawesome/react-fontawesome\";\nimport { faTimesCircle } from \"@fortawesome/free-solid-svg-icons\";\nimport styled from \"styled-components\";\n\nconst Popup: React.FC<{\n  width: string;\n  height?: string;\n  onClose: () => void;\n}> = (props) => {\n  return (\n    <Background>\n      <Window style={{ width: props.width, height: props.height }}>\n        <CloseButton onClick={props.onClose}>\n          <FontAwesomeIcon icon={faTimesCircle} size=\"lg\" fixedWidth />\n        </CloseButton>\n        {props.children}\n      </Window>\n    </Background>\n  );\n};\n\nconst Background = styled.div`\n  position: fixed;\n  background-color: rgba(0, 0, 0, 0.5);\n  top: 0;\n  bottom: 0;\n  left: 0;\n  right: 0;\n  width: 100%;\n  height: 100%;\n  z-index: 1000;\n`;\n\nconst Window = styled.div`\n  position: fixed;\n  position: fixed;\n  left: 50%;\n  top: 50%;\n  transform: translate(-50%, -50%);\n\n  padding: 10px;\n\n  align-self: center;\n  margin: 0 auto;\n  background-color: white;\n  border-radius: 5px;\n\n  box-shadow: -5px 1px 51px 0px rgba(0, 0, 0, 0.75);\n  -webkit-box-shadow: -5px 1px 51px 0px rgba(0, 0, 0, 0.75);\n  -moz-box-shadow: -5px 1px 51px 0px rgba(0, 0, 0, 0.75);\n\n  overflow-y: scroll;\n`;\n\nconst CloseButton = styled.button`\n  background-color: rgba(0, 0, 0, 0);\n  border: 0;\n  float: right;\n  color: white;\n  position: absolute;\n  top: 10px;\n  right: 10px;\n  color: black;\n`;\n\nexport default Popup;\n","export const GITHUB_URL = \"https://github.com/nene/zwo-editor\";\n","import React from \"react\";\nimport styled from \"styled-components\";\nimport { GITHUB_URL } from \"../../const\";\n\nexport default function Footer() {\n  return (\n    <Container>\n      <List>\n        <Item>\n          Zwift Workout v2.0 (\n          <Hyperlink\n            href={`${GITHUB_URL}/blob/master/LICENSE.md`}\n            target=\"blank\"\n          >\n            open source / MIT license\n          </Hyperlink>\n          )\n        </Item>\n        <Item>\n          <Hyperlink href={`${GITHUB_URL}/issues`} target=\"blank\">\n            Report an issue\n          </Hyperlink>\n        </Item>\n      </List>\n    </Container>\n  );\n}\n\nconst Container = styled.div`\n  padding: 10px;\n  font-size: 12px;\n  text-align: center;\n  background-color: black;\n  color: white;\n`;\n\nconst List = styled.ul`\n  list-style: none;\n  margin: 0;\n  padding: 0;\n`;\n\nconst Item = styled.li`\n  display: inline;\n  padding: 0 10px;\n  margin: 0;\n`;\n\nconst Hyperlink = styled.a`\n  text-decoration: none;\n  color: #00c46a;\n`;\n","import { createAction } from \"@reduxjs/toolkit\";\nimport { Workout } from \"../../types/Workout\";\n\nexport const clearWorkout = createAction(\"workout/clearWorkout\");\nexport const loadWorkout = createAction<Workout>(\"workout/loadWorkout\");\n","import { createSlice, createSelector, PayloadAction } from \"@reduxjs/toolkit\";\nimport { LengthType } from \"../../types/LengthType\";\nimport { SportType } from \"../../types/SportType\";\nimport { RootState } from \"../store\";\nimport { clearWorkout, loadWorkout } from \"./workout\";\n\ninterface MetaState {\n  name: string;\n  author: string;\n  description: string;\n  tags: string[];\n  sportType: SportType;\n  lengthType: LengthType;\n}\n\nconst DEFAULT_NAME = \"Untitled workout\";\n\nconst initialState: MetaState = {\n  name: DEFAULT_NAME,\n  author: \"\",\n  description: \"\",\n  tags: [],\n  sportType: \"bike\",\n  lengthType: \"time\",\n};\n\nconst slice = createSlice({\n  name: \"meta\",\n  initialState,\n  reducers: {\n    setName: (state, action: PayloadAction<string>) => ({\n      ...state,\n      name: action.payload,\n    }),\n    setAuthor: (state, action: PayloadAction<string>) => ({\n      ...state,\n      author: action.payload,\n    }),\n    setDescription: (state, action: PayloadAction<string>) => ({\n      ...state,\n      description: action.payload,\n    }),\n    setTags: (state, action: PayloadAction<string[]>) => ({\n      ...state,\n      tags: action.payload,\n    }),\n    setSportType: (state, action: PayloadAction<SportType>) => ({\n      ...state,\n      sportType: action.payload,\n    }),\n    setLengthType: (state, action: PayloadAction<LengthType>) => ({\n      ...state,\n      lengthType: action.payload,\n    }),\n  },\n  extraReducers: (builder) => {\n    builder\n      .addCase(clearWorkout, (state) => ({\n        ...state,\n        name: DEFAULT_NAME,\n        author: \"\",\n        description: \"\",\n        tags: [],\n      }))\n      .addCase(loadWorkout, (state, { payload }) => ({\n        name: payload.name,\n        author: payload.author,\n        description: payload.description,\n        tags: payload.tags,\n        sportType: payload.sportType,\n        lengthType: payload.lengthType,\n      }));\n  },\n});\n\nexport const reducer = slice.reducer;\nexport const {\n  setName,\n  setAuthor,\n  setDescription,\n  setTags,\n  setSportType,\n  setLengthType,\n} = slice.actions;\n\nconst selectMeta = (state: RootState) => state.meta;\nexport const selectName = createSelector(selectMeta, (m) => m.name);\nexport const selectAuthor = createSelector(selectMeta, (m) => m.author);\nexport const selectDescription = createSelector(\n  selectMeta,\n  (m) => m.description\n);\nexport const selectTags = createSelector(selectMeta, (m) => m.tags);\nexport const selectSportType = createSelector(selectMeta, (m) => m.sportType);\nexport const selectLengthType = createSelector(selectMeta, (m) => m.lengthType);\n","import styled from \"styled-components\";\n\nexport const Label = styled.label`\n  font-size: 10px;\n  text-align: center;\n  padding: 5px;\n`;\n","import React from \"react\";\nimport styled from \"styled-components\";\nimport { Label } from \"../Label/Label\";\n\nconst Checkbox = (props: {\n  label: string;\n  isSelected: boolean;\n  onCheckboxChange: Function;\n}) => (\n  <Container>\n    <CheckboxLabel>\n      <input\n        type=\"checkbox\"\n        name={props.label}\n        checked={props.isSelected}\n        onChange={(e) => props.onCheckboxChange()}\n        className=\"form-check-input\"\n      />\n      {props.label}\n    </CheckboxLabel>\n  </Container>\n);\n\nconst Container = styled.div`\n  display: inline-block;\n  padding: 10px 10px 10px 0;\n`;\n\nconst CheckboxLabel = styled(Label)`\n  font-size: 16px;\n  color: gray;\n`;\n\nexport default Checkbox;\n","import React from \"react\";\nimport { connect } from \"react-redux\";\nimport styled from \"styled-components\";\nimport {\n  selectAuthor,\n  selectDescription,\n  selectName,\n  selectTags,\n  setName,\n  setAuthor,\n  setDescription,\n  setTags,\n} from \"../../rdx/state/meta\";\nimport { RootState } from \"../../rdx/store\";\nimport { ConnectedProps } from \"../../types/ConnectedProps\";\nimport { Label } from \"../Label/Label\";\nimport Checkbox from \"./Checkbox\";\n\nconst DEFAULT_TAGS = [\"Recovery\", \"Intervals\", \"FTP\", \"TT\"];\n\nconst mapStateToProps = (state: RootState) => ({\n  name: selectName(state),\n  author: selectAuthor(state),\n  description: selectDescription(state),\n  tags: selectTags(state),\n});\n\nconst mapDispatchToProps = {\n  setName,\n  setAuthor,\n  setDescription,\n  setTags,\n};\n\ntype SaveFormProps = ConnectedProps<\n  typeof mapStateToProps,\n  typeof mapDispatchToProps\n>;\n\nfunction SaveForm(props: SaveFormProps) {\n  return (\n    <div>\n      <Heading>Workout metadata</Heading>\n      <Field>\n        <FieldLabel htmlFor=\"name\">Workout Title</FieldLabel>\n        <TextInput\n          type=\"text\"\n          id=\"name\"\n          placeholder=\"Workout title\"\n          value={props.name}\n          onChange={(e) => props.setName(e.target.value)}\n        />\n      </Field>\n      <Field>\n        <FieldLabel htmlFor=\"description\">Workout description</FieldLabel>\n        <TextInput\n          as=\"textarea\"\n          id=\"description\"\n          placeholder=\"Workout description\"\n          value={props.description}\n          onChange={(e: React.ChangeEvent<HTMLTextAreaElement>) =>\n            props.setDescription(e.target.value)\n          }\n        />\n      </Field>\n      <Field>\n        <FieldLabel htmlFor=\"author\">Workout Author</FieldLabel>\n        <TextInput\n          type=\"text\"\n          id=\"author\"\n          placeholder=\"Workout Author\"\n          value={props.author}\n          onChange={(e) => props.setAuthor(e.target.value)}\n        />\n      </Field>\n      <Field>\n        <FieldLabel>Workout Tags</FieldLabel>\n        {DEFAULT_TAGS.map((tagName) => (\n          <Checkbox\n            key={tagName}\n            label={tagName}\n            isSelected={props.tags.includes(tagName)}\n            onCheckboxChange={() =>\n              props.setTags(addOrRemoveTag(props.tags, tagName))\n            }\n          />\n        ))}\n      </Field>\n    </div>\n  );\n}\n\nfunction addOrRemoveTag(tags: string[], tagName: string): string[] {\n  if (tags.includes(tagName)) {\n    return tags.filter((item) => item !== tagName);\n  } else {\n    return [...tags, tagName];\n  }\n}\n\nconst Heading = styled.h2`\n  font-size: 34px;\n  font-weight: 200;\n  margin: 0;\n  text-transform: uppercase;\n`;\n\nconst Field = styled.div`\n  margin: 10px 0;\n  width: 100%;\n`;\n\nconst FieldLabel = styled(Label)`\n  font-size: 14px;\n  color: gray;\n  display: block;\n  text-align: left;\n`;\n\nconst TextInput = styled.input`\n  display: block;\n  width: 100%;\n  padding: 10px;\n  margin-top: 10px;\n\n  font-size: 16px;\n  border: 1px solid #aaa;\n  border-radius: 5px;\n  box-sizing: border-box;\n`;\n\nexport default connect(mapStateToProps, mapDispatchToProps)(SaveForm);\n","export enum PaceType {\n  oneMile = 0,\n  fiveKm = 1,\n  tenKm = 2,\n  halfMarathon = 3,\n  marathon = 4,\n}\n","import React from \"react\";\nimport { Helmet } from \"react-helmet\";\n\ninterface HeadProps {\n  name: string;\n  description: string;\n}\n\nconst Head = ({ name, description }: HeadProps) => (\n  <Helmet>\n    <title>\n      {name\n        ? `${name} - Zwift Workout Editor`\n        : \"My Workout - Zwift Workout Editor\"}\n    </title>\n    <meta name=\"description\" content={description} />\n  </Helmet>\n);\n\nexport default Head;\n","// Distances corresponding to each PaceType. In meters.\nexport const runningDistances = [1609.34, 5000, 10000, 21097.5, 42195];\n","import styled from \"styled-components\";\n\nexport const Column = styled.div`\n  display: flex;\n  flex-direction: column;\n`;\n","import React, { useCallback } from \"react\";\nimport TimePicker from \"rc-time-picker\";\nimport \"rc-time-picker/assets/index.css\";\nimport moment from \"moment\";\nimport { RunningTimes } from \"../../types/RunningTimes\";\nimport { PaceType } from \"../../types/PaceType\";\nimport { runningDistances } from \"../../types/runningDistances\";\nimport styled, { createGlobalStyle } from \"styled-components\";\nimport { Column } from \"../Layout/Column\";\nimport { Label } from \"../Label/Label\";\n\ninterface RunningTimesEditorProps {\n  times: RunningTimes;\n  onChange: (times: RunningTimes) => void;\n}\n\nexport default function RunningTimesEditor({\n  times,\n  onChange,\n}: RunningTimesEditorProps) {\n  const estimateRunningTimes = useCallback(() => {\n    onChange(calculateEstimatedTimes(times));\n  }, [times, onChange]);\n\n  const handleInputChange = (pace: PaceType, t: number) => {\n    const timesCopy = [...times];\n    timesCopy[pace] = t;\n    onChange(timesCopy);\n  };\n\n  return (\n    <Container>\n      <RunTimeInput\n        time={times[PaceType.oneMile]}\n        onChange={(t) => handleInputChange(PaceType.oneMile, t)}\n      >\n        1 Mile Time\n      </RunTimeInput>\n      <RunTimeInput\n        time={times[PaceType.fiveKm]}\n        onChange={(t) => handleInputChange(PaceType.fiveKm, t)}\n      >\n        5 Km Time\n      </RunTimeInput>\n      <RunTimeInput\n        time={times[PaceType.tenKm]}\n        onChange={(t) => handleInputChange(PaceType.tenKm, t)}\n      >\n        10 Mile Time\n      </RunTimeInput>\n      <RunTimeInput\n        time={times[PaceType.halfMarathon]}\n        onChange={(t) => handleInputChange(PaceType.halfMarathon, t)}\n      >\n        Half Marathon Time\n      </RunTimeInput>\n      <RunTimeInput\n        time={times[PaceType.marathon]}\n        onChange={(t) => handleInputChange(PaceType.marathon, t)}\n      >\n        Marathon Time\n      </RunTimeInput>\n      <Col>\n        <button onClick={estimateRunningTimes} className=\"btn\">\n          Estimate missing times\n        </button>\n      </Col>\n    </Container>\n  );\n}\n\nconst Container = styled.div`\n  display: flex;\n  margin: 0 auto;\n  flex-direction: row;\n  width: 100%;\n  max-width: 1360px;\n`;\n\nconst Col = styled(Column)`\n  padding-right: 10px;\n  align-self: flex-end;\n`;\n\nconst RunTimeInput: React.FC<{\n  time: number;\n  onChange: (time: number) => void;\n}> = ({ time, onChange, children }) => (\n  <Col>\n    <Label>\n      <abbr title=\"hh:mm:ss\">{children}</abbr>\n    </Label>\n    <TimePickerStyleOverrides />\n    <StyledTimePicker\n      value={time === 0 ? undefined : moment.utc(time * 1000)}\n      placeholder=\"00:00:00\"\n      defaultOpenValue={moment(\"00:00:00\")}\n      onChange={(value) =>\n        onChange(\n          value ? moment.duration(value.format(\"HH:mm:ss\")).asSeconds() : 0\n        )\n      }\n    />\n  </Col>\n);\n\nconst TimePickerStyleOverrides = createGlobalStyle`\n  .rc-time-picker-panel-input {\n    font-size: 18px;  \n    font-family: monospace;\n  }\n\n  .rc-time-picker-panel-select > ul > li {\n    font-size: 16px;  \n    font-family: monospace;\n  }\n`;\n\nconst StyledTimePicker = styled(TimePicker)`\n  width: 120px;\n\n  & > input {\n    font-size: 18px;\n    font-family: monospace;\n    color: black;\n  }\n`;\n\nconst defaultDistance = 1609.34; // one mile in meters\nconst defaultTime = 11 * 60 + 20; // 00:11:20\n\nexport function calculateEstimatedTimes(timesOrig: number[]): number[] {\n  const distances = [...runningDistances, defaultDistance];\n  const times = [...timesOrig, defaultTime];\n  const estimatedTimes: number[] = [];\n\n  timesOrig.forEach((value, i) => {\n    if (!value) {\n      for (let index = 0; index < times.length; index++) {\n        // found a time\n        if (times[index]) {\n          // Predictions calculated using Riegel's formula: T2 = T1 x (D2/D1) x 1.06\n          // T1 = T2 / (1.06 * (D2/D1))\n          estimatedTimes[i] =\n            times[index] * (distances[i] / distances[index]) * 1.06;\n          break;\n        }\n      }\n    } else {\n      estimatedTimes[i] = value;\n    }\n  });\n\n  return estimatedTimes;\n}\n","import { IconProp } from \"@fortawesome/fontawesome-svg-core\";\nimport { FontAwesomeIcon } from \"@fortawesome/react-fontawesome\";\nimport React from \"react\";\nimport Switch from \"react-switch\";\nimport styled from \"styled-components\";\nimport { Column } from \"../Layout/Column\";\nimport { Label } from \"../Label/Label\";\n\ninterface LeftRightToggleProps<TLeft, TRight> {\n  label: string;\n  leftValue: TLeft;\n  rightValue: TRight;\n  leftIcon: IconProp;\n  rightIcon: IconProp;\n  selected: TLeft | TRight;\n  onChange: (selected: TLeft | TRight) => void;\n}\n\nconst COLOR = \"#00C46A\";\n\nconst LeftRightToggle = <TLeft, TRight>({\n  label,\n  leftValue,\n  rightValue,\n  leftIcon,\n  rightIcon,\n  selected,\n  onChange,\n}: LeftRightToggleProps<TLeft, TRight>) => (\n  <Col>\n    <Label>{label}</Label>\n    <LeftRight>\n      <ToggleIcon\n        active={selected === leftValue}\n        icon={leftIcon}\n        size=\"lg\"\n        fixedWidth\n      />\n      <Switch\n        onChange={() =>\n          onChange(selected === leftValue ? rightValue : leftValue)\n        }\n        checked={selected === rightValue}\n        checkedIcon={false}\n        uncheckedIcon={false}\n        onColor={COLOR}\n        offColor={COLOR}\n      />\n      <ToggleIcon\n        active={selected === rightValue}\n        icon={rightIcon}\n        size=\"lg\"\n        fixedWidth\n      />\n    </LeftRight>\n  </Col>\n);\n\nconst Col = styled(Column)`\n  max-width: 120px;\n  padding: 0 10px;\n`;\n\nconst LeftRight = styled.div`\n  display: flex;\n  flex-direction: row;\n  color: lightgray;\n`;\n\nconst ToggleIcon = styled(FontAwesomeIcon)<{ active: boolean }>`\n  padding: 5px;\n  color: ${({ active }) => (active ? \"#00C46A\" : \"inherit\")};\n`;\n\nexport default LeftRightToggle;\n","import React from \"react\";\n\n// Component which captures key press events\n\ninterface KeyboardProps {\n  className?: string;\n  onBackspacePress: () => void;\n  onDownPress: () => void;\n  onUpPress: () => void;\n  onLeftPress: () => void;\n  onRightPress: () => void;\n}\n\nconst Keyboard: React.FC<KeyboardProps> = (props) => {\n  function handleKeyPress(event: React.KeyboardEvent<HTMLDivElement>) {\n    if (\n      event.target instanceof HTMLInputElement ||\n      event.target instanceof HTMLTextAreaElement\n    ) {\n      // Ignore key presses coming from input elements\n      return;\n    }\n\n    switch (event.keyCode) {\n      case 8:\n        props.onBackspacePress();\n        // Prevent navigation to previous page\n        event.preventDefault();\n        break;\n      case 37:\n        props.onLeftPress();\n        break;\n      case 39:\n        props.onRightPress();\n        break;\n      case 38:\n        props.onUpPress();\n        break;\n      case 40:\n        props.onDownPress();\n        break;\n    }\n  }\n\n  return (\n    // Adding tabIndex allows div element to receive keyboard events\n    <div className={props.className} onKeyDown={handleKeyPress} tabIndex={0}>\n      {props.children}\n    </div>\n  );\n};\n\nexport default Keyboard;\n","export class Duration {\n  constructor(public readonly seconds: number) {}\n}\n\nexport class Distance {\n  constructor(public readonly meters: number) {}\n}\n\nexport type Length = Distance | Duration;\n\n// Alternative approach\n//\n// This way we could avoid storing class instances to Redux,\n// which eliminates problems with serialization & deserialization.\n/*\nexport type Distance = { meters: number };\nexport type Duration = { seconds: number };\nexport type Length = Distance | Duration;\n\nexport const Distance = (meters: number) => ({ meters });\nexport const Duration = (seconds: number) => ({ seconds });\n\nexport const isDistance = (obj: Length): obj is Distance => 'meters' in obj;\nexport const isDuration = (obj: Length): obj is Duration => 'seconds' in obj;\n*/\n","import { v4 as uuidv4 } from \"uuid\";\nimport { PaceType } from \"../types/PaceType\";\nimport {\n  FreeInterval,\n  Interval,\n  RampInterval,\n  RepetitionInterval,\n  SteadyInterval,\n} from \"../types/Interval\";\nimport { Distance, Duration, Length } from \"../types/Length\";\nimport { WorkoutMode } from \"../modes/WorkoutMode\";\n\nconst defaultDuration = new Duration(300);\nconst defaultDistance = new Distance(1000);\nconst defaultIntensity = 1.0;\nconst defaultPace = PaceType.oneMile;\nconst defaultCadence = 0;\n\nconst defaultLength = (mode: WorkoutMode): Length =>\n  mode.lengthType === \"time\" ? defaultDuration : defaultDistance;\n\nexport default {\n  steady(interval: Partial<SteadyInterval>, mode: WorkoutMode): SteadyInterval {\n    return {\n      type: \"steady\",\n      id: uuidv4(),\n      length: defaultLength(mode),\n      intensity: defaultIntensity,\n      cadence: defaultCadence,\n      pace: defaultPace,\n      ...interval,\n    };\n  },\n\n  ramp(interval: Partial<RampInterval>, mode: WorkoutMode): RampInterval {\n    return {\n      type: \"ramp\",\n      id: uuidv4(),\n      length: defaultLength(mode),\n      startIntensity: defaultIntensity / 2,\n      endIntensity: defaultIntensity,\n      cadence: defaultCadence,\n      pace: defaultPace,\n      ...interval,\n    };\n  },\n\n  free(interval: Partial<FreeInterval>, mode: WorkoutMode): FreeInterval {\n    return {\n      type: \"free\",\n      id: uuidv4(),\n      length: defaultLength(mode),\n      cadence: defaultCadence,\n      ...interval,\n    };\n  },\n\n  repetition(\n    interval: Partial<RepetitionInterval>,\n    mode: WorkoutMode\n  ): RepetitionInterval {\n    return {\n      type: \"repetition\",\n      id: uuidv4(),\n      onCadence: defaultCadence,\n      offCadence: defaultCadence,\n      repeat: 3,\n      onLength:\n        mode.lengthType === \"time\" ? new Duration(30) : new Distance(200),\n      offLength:\n        mode.lengthType === \"time\" ? new Duration(120) : new Distance(200),\n      onIntensity: defaultIntensity,\n      offIntensity: defaultIntensity / 2,\n      pace: defaultPace,\n      ...interval,\n    };\n  },\n\n  // Creates a copy of the interval, with a new ID\n  clone(interval: Interval): Interval {\n    return { ...interval, id: uuidv4() };\n  },\n};\n","export function floor(x: number, roundTo: number): number {\n  return Math.floor(x / roundTo) * roundTo;\n}\n","import {\n  distanceMultiplier,\n  durationMultiplier,\n  intensityMultiplier,\n} from \"../components/Bar/multipliers\";\nimport { Distance, Duration, Length } from \"../types/Length\";\nimport { LengthType } from \"../types/LengthType\";\nimport { SportType } from \"../types/SportType\";\nimport { floor } from \"../utils/math\";\n\ninterface Precision {\n  meters: number;\n  seconds: number;\n}\n\n// Base class for duration-based Mode classes\nexport default abstract class Mode {\n  public abstract readonly sportType: SportType;\n  public abstract readonly lengthType: LengthType;\n\n  lengthToWidth(length: Length): number {\n    if (length instanceof Duration) {\n      return length.seconds / durationMultiplier;\n    } else {\n      return length.meters / distanceMultiplier;\n    }\n  }\n\n  widthToLength(\n    width: number,\n    precision: Precision = { meters: 200, seconds: 5 }\n  ): Length {\n    if (this.lengthType === \"time\") {\n      return new Duration(floor(width * durationMultiplier, precision.seconds));\n    } else {\n      return new Distance(floor(width * distanceMultiplier, precision.meters));\n    }\n  }\n\n  intensityToHeight(intensity: number): number {\n    return intensity * intensityMultiplier;\n  }\n\n  heightToIntensity(height: number): number {\n    return height / intensityMultiplier;\n  }\n}\n","export const intensityMultiplier = 250;\nexport const durationMultiplier = 3;\nexport const distanceMultiplier = 10;\n","import { LengthType } from \"../types/LengthType\";\nimport { Duration, Length } from \"../types/Length\";\nimport { SportType } from \"../types/SportType\";\nimport Mode from \"./Mode\";\nimport { Interval } from \"../types/Interval\";\n\nexport default class BikeMode extends Mode {\n  private ftp: number;\n  private weight: number;\n  public readonly sportType: SportType = \"bike\";\n  public readonly lengthType: LengthType = \"time\";\n\n  constructor(ftp: number, weight: number) {\n    super();\n    this.ftp = ftp;\n    this.weight = weight;\n  }\n\n  power(intensity: number): number {\n    return intensity * this.ftp;\n  }\n\n  wkg(intensity: number): number {\n    return this.power(intensity) / this.weight;\n  }\n\n  duration(length: Length): Duration {\n    if (length instanceof Duration) {\n      return length;\n    } else {\n      throw new Error(\"Unexpected length:Distance encountered in BikeMode\");\n    }\n  }\n\n  intervalDuration(interval: Interval): Duration {\n    switch (interval.type) {\n      case \"free\":\n      case \"steady\":\n      case \"ramp\":\n        return this.duration(interval.length);\n      case \"repetition\": {\n        const onDuration = this.duration(interval.onLength);\n        const offDuration = this.duration(interval.offLength);\n        return new Duration(\n          interval.repeat * (onDuration.seconds + offDuration.seconds)\n        );\n      }\n    }\n  }\n}\n","import { SportType } from \"../types/SportType\";\nimport { PaceType } from \"../types/PaceType\";\nimport { RunningTimes } from \"../types/RunningTimes\";\nimport { runningDistances } from \"../types/runningDistances\";\nimport { LengthType } from \"../types/LengthType\";\nimport Mode from \"./Mode\";\nimport { Distance, Duration, Length } from \"../types/Length\";\nimport { Interval } from \"../types/Interval\";\n\nexport default class RunMode extends Mode {\n  private runningTimes: RunningTimes;\n  public readonly sportType: SportType = \"run\";\n  public readonly lengthType: LengthType;\n\n  constructor(runningTimes: RunningTimes, lengthType: LengthType) {\n    super();\n    this.runningTimes = runningTimes;\n    this.lengthType = lengthType;\n  }\n\n  speed(intensity: number, pace: PaceType): number {\n    return (runningDistances[pace] / this.runningTimes[pace]) * intensity; // in m/s\n  }\n\n  distance(length: Length, intensity: number, pace: PaceType): Distance {\n    if (length instanceof Duration) {\n      return new Distance(this.speed(intensity, pace) * length.seconds);\n    } else {\n      return length;\n    }\n  }\n\n  duration(length: Length, intensity: number, pace: PaceType): Duration {\n    if (length instanceof Duration) {\n      return length;\n    } else {\n      return new Duration(length.meters / this.speed(intensity, pace));\n    }\n  }\n\n  intervalDistance(interval: Interval): Distance {\n    switch (interval.type) {\n      case \"free\": {\n        throw new Error(\"Run workout may not contain FreeRide\");\n      }\n      case \"steady\": {\n        return this.distance(\n          interval.length,\n          interval.intensity,\n          interval.pace\n        );\n      }\n      case \"ramp\": {\n        return this.distance(\n          interval.length,\n          (interval.startIntensity + interval.endIntensity) / 2,\n          interval.pace\n        );\n      }\n      case \"repetition\": {\n        const onDistance = this.distance(\n          interval.onLength,\n          interval.onIntensity,\n          interval.pace\n        );\n        const offDistance = this.distance(\n          interval.offLength,\n          interval.offIntensity,\n          interval.pace\n        );\n        return new Distance(\n          interval.repeat * (onDistance.meters + offDistance.meters)\n        );\n      }\n    }\n  }\n\n  intervalDuration(interval: Interval): Duration {\n    switch (interval.type) {\n      case \"free\":\n        throw new Error(\"Run workout may not contain FreeRide\");\n      case \"steady\":\n        return this.duration(\n          interval.length,\n          interval.intensity,\n          interval.pace\n        );\n      case \"ramp\":\n        return this.duration(\n          interval.length,\n          (interval.startIntensity + interval.endIntensity) / 2,\n          interval.pace\n        );\n      case \"repetition\": {\n        const onDuration = this.duration(\n          interval.onLength,\n          interval.onIntensity,\n          interval.pace\n        );\n        const offDuration = this.duration(\n          interval.offLength,\n          interval.offIntensity,\n          interval.pace\n        );\n        return new Duration(\n          interval.repeat * (onDuration.seconds + offDuration.seconds)\n        );\n      }\n    }\n  }\n}\n","import RunMode from \"../modes/RunMode\";\nimport { Interval } from \"../types/Interval\";\nimport { sum } from \"ramda\";\nimport { Distance } from \"../types/Length\";\n\nexport function workoutDistance(\n  intervals: Interval[],\n  mode: RunMode\n): Distance {\n  return new Distance(\n    sum(\n      intervals\n        .map((interval) => mode.intervalDistance(interval))\n        .map((d) => d.meters)\n    )\n  );\n}\n","import { Interval } from \"../types/Interval\";\nimport { sum } from \"ramda\";\nimport { WorkoutMode } from \"../modes/WorkoutMode\";\nimport { Duration } from \"../types/Length\";\n\n// calculate total time\nexport function workoutDuration(\n  intervals: Interval[],\n  mode: WorkoutMode\n): Duration {\n  return new Duration(\n    sum(\n      intervals\n        .map((interval) => mode.intervalDuration(interval))\n        .map((d) => d.seconds)\n    )\n  );\n}\n","import moment from \"moment\";\nimport \"moment-duration-format\";\nimport { Distance, Duration } from \"../types/Length\";\nimport { PaceType } from \"../types/PaceType\";\n\nexport const duration = (duration: Duration): string =>\n  moment.duration(duration.seconds, \"seconds\").format(\"mm:ss\", { trim: false });\n\nexport const distance = (distance: Distance): string =>\n  Math.round(distance.meters) + \" m\";\n\nexport const power = (power: number): string => Math.round(power) + \" W\";\n\nexport const wkg = (wkg: number): string => Math.round(wkg * 10) / 10 + \" W/kg\";\n\nexport const percentage = (intensity: number): string =>\n  Math.round(intensity * 100) + \"%\";\n\nexport const shortPaceName = (pace: PaceType): string => {\n  const paces = [\"1M\", \"5K\", \"10K\", \"HM\", \"M\"];\n  return paces[pace] + \" pace\";\n};\n","import React from \"react\";\nimport styled from \"styled-components\";\nimport intervalFactory from \"../../interval/intervalFactory\";\nimport BikeMode from \"../../modes/BikeMode\";\nimport RunMode from \"../../modes/RunMode\";\nimport { WorkoutMode } from \"../../modes/WorkoutMode\";\nimport { Interval } from \"../../types/Interval\";\nimport { workoutDistance } from \"../../utils/distance\";\nimport { workoutDuration } from \"../../utils/duration\";\nimport * as format from \"../../utils/format\";\nimport { Column } from \"../Layout/Column\";\nimport { Label } from \"../Label/Label\";\n\n// Displays summary statistics: workout length and TSS\n\ninterface StatsProps {\n  intervals: Interval[];\n  ftp: number;\n  mode: WorkoutMode;\n}\n\nconst Stats: React.FC<StatsProps> = ({ intervals, ftp, mode }) => {\n  return (\n    <>\n      <Col>\n        <Label>Workout Time</Label>\n        <TextInput\n          value={format.duration(workoutDuration(intervals, mode))}\n          disabled\n        />\n      </Col>\n      {mode instanceof RunMode && (\n        <Col>\n          <Label>Workout Distance</Label>\n          <TextInput\n            value={format.distance(workoutDistance(intervals, mode))}\n            disabled\n          />\n        </Col>\n      )}\n      {mode instanceof BikeMode && (\n        <Col>\n          <Label>TSS</Label>\n          <TextInput value={getStressScore(intervals, ftp, mode)} disabled />\n        </Col>\n      )}\n    </>\n  );\n};\n\nconst Col = styled(Column)`\n  max-width: 120px;\n  padding: 0 10px;\n`;\n\nconst TextInput = styled.input`\n  font-size: 20px;\n  border: 1px solid lightgray;\n  text-align: center;\n`;\n\nfunction getStressScore(\n  intervals: Interval[],\n  ftp: number,\n  mode: BikeMode\n): string {\n  // TSS = [(sec x NP x IF)/(FTP x 3600)] x 100\n  let tss = 0;\n\n  intervals.map((interval) => {\n    if (interval.type === \"steady\" && interval.intensity) {\n      const np = interval.intensity * ftp;\n      const iff = interval.intensity;\n\n      tss += mode.intervalDuration(interval).seconds * np * iff;\n    }\n    if (\n      interval.type === \"ramp\" &&\n      interval.startIntensity &&\n      interval.endIntensity\n    ) {\n      const np = ((interval.startIntensity + interval.endIntensity) / 2) * ftp;\n      const iff = (interval.startIntensity + interval.endIntensity) / 2;\n\n      tss += mode.intervalDuration(interval).seconds * np * iff;\n    }\n    if (\n      interval.type === \"repetition\" &&\n      interval.onIntensity &&\n      interval.offIntensity &&\n      interval.repeat &&\n      interval.onLength &&\n      interval.offLength\n    ) {\n      const npOn = interval.onIntensity * ftp;\n      const iffOn = interval.onIntensity;\n\n      const onDuration = mode.intervalDuration(\n        intervalFactory.steady(\n          {\n            length: interval.onLength,\n            intensity: interval.onIntensity,\n          },\n          mode\n        )\n      );\n      tss += onDuration.seconds * interval.repeat * npOn * iffOn;\n\n      const npOff = interval.offIntensity * ftp;\n      const iffOff = interval.offIntensity;\n\n      const offDuration = mode.intervalDuration(\n        intervalFactory.steady(\n          {\n            length: interval.offLength,\n            intensity: interval.offIntensity,\n          },\n          mode\n        )\n      );\n      tss += offDuration.seconds * interval.repeat * npOff * iffOff;\n    }\n    return false;\n  });\n  return ((tss / (ftp * 3600)) * 100).toFixed(0);\n}\n\nexport default Stats;\n","import React from \"react\";\nimport styled from \"styled-components\";\n\n// Displays workut name, description & author\n\ninterface TitleProps {\n  name: string;\n  description: string;\n  author: string;\n  onClick: () => void;\n}\n\nconst Title: React.FC<TitleProps> = ({\n  name,\n  author,\n  description,\n  onClick,\n}) => {\n  return (\n    <Container onClick={onClick}>\n      <Heading>{name}</Heading>\n      <div>{description}</div>\n      <Author>{author ? `by ${author}` : \"\"}</Author>\n    </Container>\n  );\n};\n\nconst Container = styled.div`\n  flex: 1;\n  cursor: pointer;\n`;\n\nconst Heading = styled.h1`\n  padding: 10px 0;\n  margin: 0;\n`;\n\nconst Author = styled.p`\n  font-style: italic;\n  margin: 10px 0 0 0;\n`;\n\nexport default Title;\n","import { createSlice, createSelector, PayloadAction } from \"@reduxjs/toolkit\";\nimport { RunningTimes } from \"../../types/RunningTimes\";\nimport { RootState } from \"../store\";\n\ninterface AthleteState {\n  ftp: number;\n  weight: number;\n  runningTimes: RunningTimes;\n}\n\nconst initialState: AthleteState = {\n  ftp: 200,\n  weight: 75,\n  runningTimes: [0, 0, 0, 0, 0],\n};\n\nconst slice = createSlice({\n  name: \"athlete\",\n  initialState,\n  reducers: {\n    setFtp: (state, action: PayloadAction<number>) => ({\n      ...state,\n      ftp: action.payload,\n    }),\n    setWeight: (state, action: PayloadAction<number>) => ({\n      ...state,\n      weight: action.payload,\n    }),\n    setRunningTimes: (state, action: PayloadAction<number[]>) => ({\n      ...state,\n      runningTimes: action.payload,\n    }),\n  },\n});\n\nexport const reducer = slice.reducer;\nexport const { setFtp, setWeight, setRunningTimes } = slice.actions;\n\nconst selectAthlete = (state: RootState) => state.athlete;\nexport const selectFtp = createSelector(selectAthlete, (a) => a.ftp);\nexport const selectWeight = createSelector(selectAthlete, (a) => a.weight);\nexport const selectRunningTimes = createSelector(\n  selectAthlete,\n  (a) => a.runningTimes\n);\n","import { createAction } from \"@reduxjs/toolkit\";\nimport { REHYDRATE } from \"redux-persist\";\nimport { Instruction } from \"../types/Instruction\";\nimport { Interval } from \"../types/Interval\";\nimport { Distance, Duration } from \"../types/Length\";\n\nfunction convertLengths(obj: { [k: string]: any }) {\n  for (const [k, v] of Object.entries(obj)) {\n    if (typeof v === \"object\" && typeof v.seconds === \"number\") {\n      obj[k] = new Duration(v.seconds);\n    } else if (typeof v === \"object\" && typeof v.meters === \"number\") {\n      obj[k] = new Distance(v.meters);\n    }\n  }\n  return obj;\n}\n\nexport function rehydrateLengths<T extends object>(arr?: T[]): T[] {\n  if (!(arr instanceof Array)) {\n    return [];\n  }\n  return arr.map(convertLengths) as T[];\n}\n\n// A lookalike of the actual REHYDRATE action,\n// only declered for better type-safety\nexport const rehydrateAction = createAction<{\n  intervals: Interval[];\n  instructions: Instruction[];\n}>(REHYDRATE);\n","export enum ZoneColor {\n  GRAY = \"#807F80\",\n  BLUE = \"#0E90D4\",\n  GREEN = \"#00C46A\",\n  YELLOW = \"#FFCB00\",\n  ORANGE = \"#FF6430\",\n  RED = \"#E90000\",\n  WHITE = \"#FFFFFF\",\n}\n\nexport const Zones = {\n  Z1: {\n    min: 0.1,\n    max: 0.605,\n  },\n  Z2: {\n    min: 0.605,\n    max: 0.763,\n  },\n  Z3: {\n    min: 0.763,\n    max: 0.901,\n  },\n  Z4: {\n    min: 0.901,\n    max: 1.053,\n  },\n  Z5: {\n    min: 1.053,\n    max: 1.194,\n  },\n  Z6: {\n    min: 1.194,\n    max: 2.0,\n  },\n};\n\nexport const ZonesArray = [\n  [Zones.Z1.min, Zones.Z1.max],\n  [Zones.Z2.min, Zones.Z2.max],\n  [Zones.Z3.min, Zones.Z3.max],\n  [Zones.Z4.min, Zones.Z4.max],\n  [Zones.Z5.min, Zones.Z5.max],\n  [Zones.Z6.min, Zones.Z6.max],\n];\n\nexport const zoneColor = (intensity: number): ZoneColor => {\n  if (intensity < Zones.Z1.max) {\n    return ZoneColor.GRAY;\n  } else if (intensity < Zones.Z2.max) {\n    return ZoneColor.BLUE;\n  } else if (intensity < Zones.Z3.max) {\n    return ZoneColor.GREEN;\n  } else if (intensity < Zones.Z4.max) {\n    return ZoneColor.YELLOW;\n  } else if (intensity < Zones.Z5.max) {\n    return ZoneColor.ORANGE;\n  } else {\n    return ZoneColor.RED;\n  }\n};\n","import { Zones } from \"../types/Zones\";\nimport { Interval } from \"../types/Interval\";\nimport { Duration } from \"../types/Length\";\nimport { WorkoutMode } from \"../modes/WorkoutMode\";\nimport { move, propEq, update } from \"ramda\";\n\n// Helpers for transforming intervals array\n\nfunction updateById(\n  id: string,\n  transform: (interval: Interval) => Interval,\n  intervals: Interval[]\n): Interval[] {\n  const index = intervals.findIndex(propEq(\"id\", id));\n  if (index === -1) {\n    return intervals;\n  }\n\n  return update(index, transform(intervals[index]), intervals);\n}\n\nexport function updateIntervalDuration(\n  id: string,\n  dDuration: Duration,\n  intervals: Interval[],\n  mode: WorkoutMode\n): Interval[] {\n  return updateById(\n    id,\n    (interval) => {\n      if (interval.type === \"steady\") {\n        const seconds =\n          mode.intervalDuration(interval).seconds + dDuration.seconds;\n        if (seconds > 0) {\n          return { ...interval, length: new Duration(seconds) };\n        }\n      }\n      return interval;\n    },\n    intervals\n  );\n}\n\nexport function updateIntervalIntensity(\n  id: string,\n  dIntensity: number,\n  intervals: Interval[]\n): Interval[] {\n  return updateById(\n    id,\n    (interval) => {\n      if (interval.type === \"steady\") {\n        const intensity = interval.intensity + dIntensity;\n        if (intensity > Zones.Z1.min) {\n          return { ...interval, intensity };\n        }\n      }\n      return interval;\n    },\n    intervals\n  );\n}\n\nexport function moveInterval(\n  id: string,\n  direction: -1 | 1,\n  intervals: Interval[]\n): Interval[] {\n  const oldIndex = intervals.findIndex(propEq(\"id\", id));\n  const newIndex = oldIndex + direction;\n\n  if (oldIndex < 0 || newIndex < 0 || newIndex >= intervals.length) {\n    return intervals;\n  }\n\n  return move(oldIndex, newIndex, intervals);\n}\n","import { propEq, update } from \"ramda\";\n\n// Replaces element in array with item having the same id\nexport function replaceById<T extends { id: string }>(\n  item: T,\n  array: T[]\n): T[] {\n  const index = array.findIndex(propEq(\"id\", item.id));\n  return index === -1 ? array : update(index, item, array);\n}\n","import { createSlice, PayloadAction } from \"@reduxjs/toolkit\";\nimport { RootState } from \"../store\";\n\nconst slice = createSlice({\n  name: \"selectedId\",\n  initialState: null as string | null,\n  reducers: {\n    setSelectedId: (state, { payload }: PayloadAction<string>) => payload,\n    clearSelection: () => null,\n  },\n});\n\nexport const reducer = slice.reducer;\nexport const { setSelectedId, clearSelection } = slice.actions;\n\nexport const selectSelectedId = (state: RootState) =>\n  state.selectedId || undefined;\n","import { createSelector } from \"@reduxjs/toolkit\";\nimport createMode from \"../../modes/createMode\";\nimport { selectFtp, selectRunningTimes, selectWeight } from \"./athlete\";\nimport { selectLengthType, selectSportType } from \"./meta\";\n\nexport const selectMode = createSelector(\n  selectSportType,\n  selectFtp,\n  selectWeight,\n  selectRunningTimes,\n  selectLengthType,\n  (sportType, ftp, weight, runningTimes, lengthType) => {\n    return createMode({ sportType, ftp, weight, runningTimes, lengthType });\n  }\n);\n","import { LengthType } from \"../types/LengthType\";\nimport { RunningTimes } from \"../types/RunningTimes\";\nimport { SportType } from \"../types/SportType\";\nimport BikeMode from \"./BikeMode\";\nimport RunMode from \"./RunMode\";\nimport { WorkoutMode } from \"./WorkoutMode\";\n\ninterface CreateModeParams {\n  sportType: SportType;\n  ftp: number;\n  weight: number;\n  runningTimes: RunningTimes;\n  lengthType: LengthType;\n}\n\n// Creates appropriate type of mode for current sport type\nexport default function createMode({\n  sportType,\n  ftp,\n  weight,\n  runningTimes,\n  lengthType,\n}: CreateModeParams): WorkoutMode {\n  switch (sportType) {\n    case \"bike\":\n      return new BikeMode(ftp, weight);\n    case \"run\":\n      return new RunMode(runningTimes, lengthType);\n  }\n}\n","import {\n  createAsyncThunk,\n  createSelector,\n  createSlice,\n  PayloadAction,\n} from \"@reduxjs/toolkit\";\nimport { Interval } from \"../../types/Interval\";\nimport { RootState } from \"../store\";\nimport { rehydrateAction, rehydrateLengths } from \"../rehydrate\";\nimport { clearWorkout, loadWorkout } from \"./workout\";\nimport {\n  updateIntervalIntensity,\n  updateIntervalDuration,\n  moveInterval,\n} from \"../../interval/intervalUtils\";\nimport { replaceById } from \"../../utils/array\";\nimport { clearSelection, selectSelectedId } from \"./selectedId\";\nimport intervalFactory from \"../../interval/intervalFactory\";\nimport { Duration } from \"../../types/Length\";\nimport { selectMode } from \"./mode\";\nimport { PaceType } from \"../../types/PaceType\";\n\nconst initialState: Interval[] = [];\n\nconst slice = createSlice({\n  name: \"intervals\",\n  initialState,\n  reducers: {\n    setIntervals: (state, action: PayloadAction<Interval[]>) => action.payload,\n    addInterval: (state, action: PayloadAction<Interval>) => [\n      ...state,\n      action.payload,\n    ],\n    updateInterval: (intervals, { payload }: PayloadAction<Interval>) =>\n      replaceById(payload, intervals),\n    removeInterval: (\n      intervals,\n      { payload: id }: PayloadAction<string | undefined>\n    ) => intervals.filter((item) => item.id !== id),\n  },\n  extraReducers: (builder) => {\n    builder\n      .addCase(rehydrateAction, (state, action) => {\n        return rehydrateLengths(action.payload?.intervals);\n      })\n      .addCase(clearWorkout, () => [])\n      .addCase(loadWorkout, (state, { payload }) => payload.intervals);\n  },\n});\n\nexport const reducer = slice.reducer;\nexport const {\n  setIntervals,\n  addInterval,\n  updateInterval,\n  removeInterval,\n} = slice.actions;\n\nexport const removeSelectedInterval = createAsyncThunk(\n  \"intervals/removeSelectedInterval\",\n  (_: void, { getState, dispatch }) => {\n    const selectedId = selectSelectedId(getState() as RootState);\n    dispatch(removeInterval(selectedId));\n    dispatch(clearSelection());\n  }\n);\n\nexport const duplicateSelectedInterval = createAsyncThunk(\n  \"intervals/duplicateSelectedInterval\",\n  (_: void, { getState, dispatch }) => {\n    const interval = selectSelectedInterval(getState() as RootState);\n    if (interval) {\n      dispatch(addInterval(intervalFactory.clone(interval)));\n    }\n    dispatch(clearSelection());\n  }\n);\n\nexport const adjustSelectedIntervalIntensity = createAsyncThunk(\n  \"intervals/adjustSelectedIntervalIntensity\",\n  (amount: number, { getState, dispatch }) => {\n    const selectedId = selectSelectedId(getState() as RootState);\n    if (selectedId) {\n      const intervals = selectIntervals(getState() as RootState);\n      dispatch(\n        setIntervals(updateIntervalIntensity(selectedId, amount, intervals))\n      );\n    }\n  }\n);\n\nexport const adjustSelectedIntervalDuration = createAsyncThunk(\n  \"intervals/adjustSelectedIntervalDuration\",\n  (amount: Duration, { getState, dispatch }) => {\n    const selectedId = selectSelectedId(getState() as RootState);\n    if (selectedId) {\n      const intervals = selectIntervals(getState() as RootState);\n      const mode = selectMode(getState() as RootState);\n      dispatch(\n        setIntervals(\n          updateIntervalDuration(selectedId, amount, intervals, mode)\n        )\n      );\n    }\n  }\n);\n\nexport const moveSelectedInterval = createAsyncThunk(\n  \"intervals/moveSelectedInterval\",\n  (direction: -1 | 1, { getState, dispatch }) => {\n    const selectedId = selectSelectedId(getState() as RootState);\n    if (selectedId) {\n      const intervals = selectIntervals(getState() as RootState);\n      dispatch(setIntervals(moveInterval(selectedId, direction, intervals)));\n    }\n  }\n);\n\nexport const setSelectedIntervalPace = createAsyncThunk(\n  \"intervals/setSelectedIntervalPace\",\n  (pace: PaceType, { getState, dispatch }) => {\n    const interval = selectSelectedInterval(getState() as RootState);\n    if (interval && interval.type === \"steady\") {\n      // TODO: Only steady?\n      dispatch(updateInterval({ ...interval, pace }));\n    }\n  }\n);\n\nexport const selectIntervals = (state: RootState) => state.intervals;\n\nexport const selectSelectedInterval = createSelector(\n  selectSelectedId,\n  selectIntervals,\n  (selectedId, intervals) => {\n    return intervals.find((interval) => interval.id === selectedId);\n  }\n);\n\nexport const selectSelectedIntervalPace = createSelector(\n  selectSelectedInterval,\n  (interval) => {\n    return interval && interval.type !== \"free\" ? interval.pace : undefined;\n  }\n);\n","import { createSlice, PayloadAction } from \"@reduxjs/toolkit\";\nimport { RootState } from \"../store\";\nimport { rehydrateAction, rehydrateLengths } from \"../rehydrate\";\nimport { Instruction } from \"../../types/Instruction\";\nimport { clearWorkout, loadWorkout } from \"./workout\";\nimport { replaceById } from \"../../utils/array\";\n\nconst initialState: Instruction[] = [];\n\nconst slice = createSlice({\n  name: \"instructions\",\n  initialState,\n  reducers: {\n    setInstructions: (state, action: PayloadAction<Instruction[]>) =>\n      action.payload,\n    addInstruction: (state, action: PayloadAction<Instruction>) => [\n      ...state,\n      action.payload,\n    ],\n    updateInstruction: (\n      instructions,\n      { payload }: PayloadAction<Instruction>\n    ) => replaceById(payload, instructions),\n    removeInstruction: (instructions, { payload: id }: PayloadAction<string>) =>\n      instructions.filter((item) => item.id !== id),\n  },\n  extraReducers: (builder) => {\n    builder\n      .addCase(rehydrateAction, (state, action) => {\n        return rehydrateLengths(action.payload?.instructions);\n      })\n      .addCase(clearWorkout, () => [])\n      .addCase(loadWorkout, (state, { payload }) => payload.instructions);\n  },\n});\n\nexport const reducer = slice.reducer;\nexport const {\n  setInstructions,\n  addInstruction,\n  updateInstruction,\n  removeInstruction,\n} = slice.actions;\n\nexport const selectInstructions = (state: RootState) => state.instructions;\n","function _extends() { _extends = Object.assign || function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; }; return _extends.apply(this, arguments); }\n\nfunction _objectWithoutProperties(source, excluded) { if (source == null) return {}; var target = _objectWithoutPropertiesLoose(source, excluded); var key, i; if (Object.getOwnPropertySymbols) { var sourceSymbolKeys = Object.getOwnPropertySymbols(source); for (i = 0; i < sourceSymbolKeys.length; i++) { key = sourceSymbolKeys[i]; if (excluded.indexOf(key) >= 0) continue; if (!Object.prototype.propertyIsEnumerable.call(source, key)) continue; target[key] = source[key]; } } return target; }\n\nfunction _objectWithoutPropertiesLoose(source, excluded) { if (source == null) return {}; var target = {}; var sourceKeys = Object.keys(source); var key, i; for (i = 0; i < sourceKeys.length; i++) { key = sourceKeys[i]; if (excluded.indexOf(key) >= 0) continue; target[key] = source[key]; } return target; }\n\nimport React from \"react\";\n\nvar _ref2 = /*#__PURE__*/React.createElement(\"title\", null, \"Untitled\");\n\nvar _ref3 = /*#__PURE__*/React.createElement(\"desc\", null, \"Created with Sketch.\");\n\nvar _ref4 = /*#__PURE__*/React.createElement(\"defs\", null);\n\nvar _ref5 = /*#__PURE__*/React.createElement(\"g\", {\n  id: \"Page-1\",\n  stroke: \"none\",\n  strokeWidth: 1,\n  fill: \"none\",\n  fillRule: \"evenodd\"\n}, /*#__PURE__*/React.createElement(\"polygon\", {\n  id: \"Rectangle\",\n  fill: \"#7F7E7F\",\n  points: \"180 65.2104719 240 85.8538747 240 171.707749 180 171.707749\"\n}), /*#__PURE__*/React.createElement(\"polygon\", {\n  id: \"Rectangle\",\n  fill: \"#3F8FCF\",\n  points: \"120 43.4859336 180 65.1100145 180 171.707749 120 171.707749\"\n}), /*#__PURE__*/React.createElement(\"polygon\", {\n  id: \"Rectangle\",\n  fill: \"#58C073\",\n  points: \"60 22.1649934 120 43.597184 120 171.707749 60 171.707749\"\n}), /*#__PURE__*/React.createElement(\"polygon\", {\n  id: \"Rectangle\",\n  fill: \"#F8CC46\",\n  points: \"0 0 60 22.0976562 60 171.707749 0 171.707749\"\n}));\n\nvar SvgWarmdown = function SvgWarmdown(_ref) {\n  var svgRef = _ref.svgRef,\n      title = _ref.title,\n      props = _objectWithoutProperties(_ref, [\"svgRef\", \"title\"]);\n\n  return /*#__PURE__*/React.createElement(\"svg\", _extends({\n    viewBox: \"0 0 240 172\",\n    ref: svgRef\n  }, props), title === undefined ? _ref2 : title ? /*#__PURE__*/React.createElement(\"title\", null, title) : null, _ref3, _ref4, _ref5);\n};\n\nvar ForwardRef = /*#__PURE__*/React.forwardRef(function (props, ref) {\n  return /*#__PURE__*/React.createElement(SvgWarmdown, _extends({\n    svgRef: ref\n  }, props));\n});\nexport default __webpack_public_path__ + \"static/media/warmdown.a32c38a2.svg\";\nexport { ForwardRef as ReactComponent };","function _extends() { _extends = Object.assign || function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; }; return _extends.apply(this, arguments); }\n\nfunction _objectWithoutProperties(source, excluded) { if (source == null) return {}; var target = _objectWithoutPropertiesLoose(source, excluded); var key, i; if (Object.getOwnPropertySymbols) { var sourceSymbolKeys = Object.getOwnPropertySymbols(source); for (i = 0; i < sourceSymbolKeys.length; i++) { key = sourceSymbolKeys[i]; if (excluded.indexOf(key) >= 0) continue; if (!Object.prototype.propertyIsEnumerable.call(source, key)) continue; target[key] = source[key]; } } return target; }\n\nfunction _objectWithoutPropertiesLoose(source, excluded) { if (source == null) return {}; var target = {}; var sourceKeys = Object.keys(source); var key, i; for (i = 0; i < sourceKeys.length; i++) { key = sourceKeys[i]; if (excluded.indexOf(key) >= 0) continue; target[key] = source[key]; } return target; }\n\nimport React from \"react\";\n\nvar _ref2 = /*#__PURE__*/React.createElement(\"title\", null, \"Untitled\");\n\nvar _ref3 = /*#__PURE__*/React.createElement(\"desc\", null, \"Created with Sketch.\");\n\nvar _ref4 = /*#__PURE__*/React.createElement(\"defs\", null);\n\nvar _ref5 = /*#__PURE__*/React.createElement(\"g\", {\n  id: \"Page-1\",\n  stroke: \"none\",\n  strokeWidth: 1,\n  fill: \"none\",\n  fillRule: \"evenodd\"\n}, /*#__PURE__*/React.createElement(\"polygon\", {\n  id: \"Rectangle\",\n  fill: \"#7F7E7F\",\n  points: \"0 85.8538747 60 65.290624 60 171.707749 0 171.707749\"\n}), /*#__PURE__*/React.createElement(\"polygon\", {\n  id: \"Rectangle\",\n  fill: \"#3F8FCF\",\n  points: \"60 65.2906189 120 44 120 171.707749 60 171.707749\"\n}), /*#__PURE__*/React.createElement(\"polygon\", {\n  id: \"Rectangle\",\n  fill: \"#58C073\",\n  points: \"120 44 180 22 180 171.707749 120 171.707749\"\n}), /*#__PURE__*/React.createElement(\"polygon\", {\n  id: \"Rectangle\",\n  fill: \"#F8CC46\",\n  points: \"180 22 240 0 240 171.707749 180 171.707749\"\n}));\n\nvar SvgWarmup = function SvgWarmup(_ref) {\n  var svgRef = _ref.svgRef,\n      title = _ref.title,\n      props = _objectWithoutProperties(_ref, [\"svgRef\", \"title\"]);\n\n  return /*#__PURE__*/React.createElement(\"svg\", _extends({\n    viewBox: \"0 0 240 172\",\n    ref: svgRef\n  }, props), title === undefined ? _ref2 : title ? /*#__PURE__*/React.createElement(\"title\", null, title) : null, _ref3, _ref4, _ref5);\n};\n\nvar ForwardRef = /*#__PURE__*/React.forwardRef(function (props, ref) {\n  return /*#__PURE__*/React.createElement(SvgWarmup, _extends({\n    svgRef: ref\n  }, props));\n});\nexport default __webpack_public_path__ + \"static/media/warmup.edbffcc7.svg\";\nexport { ForwardRef as ReactComponent };","function _extends() { _extends = Object.assign || function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; }; return _extends.apply(this, arguments); }\n\nfunction _objectWithoutProperties(source, excluded) { if (source == null) return {}; var target = _objectWithoutPropertiesLoose(source, excluded); var key, i; if (Object.getOwnPropertySymbols) { var sourceSymbolKeys = Object.getOwnPropertySymbols(source); for (i = 0; i < sourceSymbolKeys.length; i++) { key = sourceSymbolKeys[i]; if (excluded.indexOf(key) >= 0) continue; if (!Object.prototype.propertyIsEnumerable.call(source, key)) continue; target[key] = source[key]; } } return target; }\n\nfunction _objectWithoutPropertiesLoose(source, excluded) { if (source == null) return {}; var target = {}; var sourceKeys = Object.keys(source); var key, i; for (i = 0; i < sourceKeys.length; i++) { key = sourceKeys[i]; if (excluded.indexOf(key) >= 0) continue; target[key] = source[key]; } return target; }\n\nimport React from \"react\";\n\nvar _ref2 = /*#__PURE__*/React.createElement(\"title\", null, \"interval\");\n\nvar _ref3 = /*#__PURE__*/React.createElement(\"desc\", null, \"Created with Sketch.\");\n\nvar _ref4 = /*#__PURE__*/React.createElement(\"defs\", null);\n\nvar _ref5 = /*#__PURE__*/React.createElement(\"g\", {\n  id: \"Page-1\",\n  stroke: \"none\",\n  strokeWidth: 1,\n  fill: \"none\",\n  fillRule: \"evenodd\"\n}, /*#__PURE__*/React.createElement(\"g\", {\n  id: \"interval\"\n}, /*#__PURE__*/React.createElement(\"rect\", {\n  id: \"Rectangle-2\",\n  fill: \"#F8CC46\",\n  x: 0,\n  y: 0,\n  width: 24,\n  height: 170\n}), /*#__PURE__*/React.createElement(\"rect\", {\n  id: \"Rectangle-2\",\n  fill: \"#F8CC46\",\n  x: 166,\n  y: 0,\n  width: 24,\n  height: 170\n}), /*#__PURE__*/React.createElement(\"rect\", {\n  id: \"Rectangle-2\",\n  fill: \"#F8CC46\",\n  x: 83,\n  y: 0,\n  width: 24,\n  height: 170\n}), /*#__PURE__*/React.createElement(\"rect\", {\n  id: \"Rectangle-3\",\n  fill: \"#3F8FCF\",\n  x: 24,\n  y: 63,\n  width: 59,\n  height: 107\n}), /*#__PURE__*/React.createElement(\"rect\", {\n  id: \"Rectangle-3\",\n  fill: \"#3F8FCF\",\n  x: 190,\n  y: 63,\n  width: 59,\n  height: 107\n}), /*#__PURE__*/React.createElement(\"rect\", {\n  id: \"Rectangle-3\",\n  fill: \"#3F8FCF\",\n  x: 107,\n  y: 63,\n  width: 59,\n  height: 107\n})));\n\nvar SvgInterval = function SvgInterval(_ref) {\n  var svgRef = _ref.svgRef,\n      title = _ref.title,\n      props = _objectWithoutProperties(_ref, [\"svgRef\", \"title\"]);\n\n  return /*#__PURE__*/React.createElement(\"svg\", _extends({\n    viewBox: \"0 0 249 170\",\n    ref: svgRef\n  }, props), title === undefined ? _ref2 : title ? /*#__PURE__*/React.createElement(\"title\", null, title) : null, _ref3, _ref4, _ref5);\n};\n\nvar ForwardRef = /*#__PURE__*/React.forwardRef(function (props, ref) {\n  return /*#__PURE__*/React.createElement(SvgInterval, _extends({\n    svgRef: ref\n  }, props));\n});\nexport default __webpack_public_path__ + \"static/media/interval.178113c8.svg\";\nexport { ForwardRef as ReactComponent };","function _extends() { _extends = Object.assign || function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; }; return _extends.apply(this, arguments); }\n\nfunction _objectWithoutProperties(source, excluded) { if (source == null) return {}; var target = _objectWithoutPropertiesLoose(source, excluded); var key, i; if (Object.getOwnPropertySymbols) { var sourceSymbolKeys = Object.getOwnPropertySymbols(source); for (i = 0; i < sourceSymbolKeys.length; i++) { key = sourceSymbolKeys[i]; if (excluded.indexOf(key) >= 0) continue; if (!Object.prototype.propertyIsEnumerable.call(source, key)) continue; target[key] = source[key]; } } return target; }\n\nfunction _objectWithoutPropertiesLoose(source, excluded) { if (source == null) return {}; var target = {}; var sourceKeys = Object.keys(source); var key, i; for (i = 0; i < sourceKeys.length; i++) { key = sourceKeys[i]; if (excluded.indexOf(key) >= 0) continue; target[key] = source[key]; } return target; }\n\nimport React from \"react\";\n\nvar _ref2 = /*#__PURE__*/React.createElement(\"title\", null, \"Rectangle\");\n\nvar _ref3 = /*#__PURE__*/React.createElement(\"desc\", null, \"Created with Sketch.\");\n\nvar _ref4 = /*#__PURE__*/React.createElement(\"defs\", null);\n\nvar _ref5 = /*#__PURE__*/React.createElement(\"g\", {\n  id: \"Page-1\",\n  stroke: \"none\",\n  strokeWidth: 1,\n  fill: \"none\",\n  fillRule: \"evenodd\"\n}, /*#__PURE__*/React.createElement(\"g\", {\n  id: \"warmup\",\n  fillRule: \"nonzero\",\n  fill: \"#F8CC46\"\n}, /*#__PURE__*/React.createElement(\"polygon\", {\n  id: \"Rectangle\",\n  points: \"0 0 40 0 40 121.707749 6.24500451e-16 121.707749\"\n})));\n\nvar SvgSteady = function SvgSteady(_ref) {\n  var svgRef = _ref.svgRef,\n      title = _ref.title,\n      props = _objectWithoutProperties(_ref, [\"svgRef\", \"title\"]);\n\n  return /*#__PURE__*/React.createElement(\"svg\", _extends({\n    viewBox: \"0 0 40 30\",\n    ref: svgRef\n  }, props), title === undefined ? _ref2 : title ? /*#__PURE__*/React.createElement(\"title\", null, title) : null, _ref3, _ref4, _ref5);\n};\n\nvar ForwardRef = /*#__PURE__*/React.forwardRef(function (props, ref) {\n  return /*#__PURE__*/React.createElement(SvgSteady, _extends({\n    svgRef: ref\n  }, props));\n});\nexport default __webpack_public_path__ + \"static/media/steady.7e9a2283.svg\";\nexport { ForwardRef as ReactComponent };","import React from \"react\";\nimport styled from \"styled-components\";\nimport { Label } from \"../Label/Label\";\nimport { Column } from \"../Layout/Column\";\n\n// Displays workut name, description & author\n\ninterface NumberFieldProps {\n  name: string;\n  label: string;\n  value: number;\n  onChange: (value: number) => void;\n}\n\nconst NumberField: React.FC<NumberFieldProps> = ({\n  name,\n  label,\n  value,\n  onChange,\n}) => {\n  return (\n    <Col>\n      <Label htmlFor={name}>{label}</Label>\n      <TextInput\n        type=\"number\"\n        name={name}\n        value={value}\n        onChange={(e) => onChange(parseInt(e.target.value))}\n      />\n    </Col>\n  );\n};\n\nconst TextInput = styled.input`\n  font-size: 20px;\n  border: 1px solid lightgray;\n  text-align: center;\n`;\n\nconst Col = styled(Column)`\n  max-width: 100px;\n`;\n\nexport default NumberField;\n","import styled from \"styled-components\";\n\nconst Button = styled.button`\n  display: inline-block;\n  background-color: white;\n  border: 1px solid lightgray;\n  text-align: center;\n  font-size: 13px;\n  border-radius: 5px;\n  min-width: 50px;\n`;\n\nexport default Button;\n","import React from \"react\";\nimport { FontAwesomeIcon } from \"@fortawesome/react-fontawesome\";\nimport { IconDefinition } from \"@fortawesome/free-solid-svg-icons\";\nimport Button from \"./Button\";\nimport styled from \"styled-components\";\n\ninterface IconButtonProps {\n  icon: IconDefinition;\n  children: string;\n  onClick: () => void;\n}\n\nconst IconButton: React.FC<IconButtonProps> = ({ icon, children, onClick }) => {\n  return (\n    <Button onClick={onClick}>\n      <StyledIcon icon={icon} size=\"lg\" fixedWidth /> {children}\n    </Button>\n  );\n};\n\nconst StyledIcon = styled(FontAwesomeIcon)`\n  display: block;\n  margin: 0 auto;\n`;\n\nexport default IconButton;\n","import Converter from \"xml-js\";\nimport { v4 as uuidv4 } from \"uuid\";\nimport intervalFactory from \"../interval/intervalFactory\";\nimport { createEmptyWorkout, Workout } from \"../types/Workout\";\nimport { Distance, Duration } from \"../types/Length\";\nimport { WorkoutMode } from \"../modes/WorkoutMode\";\n\nexport default function parseWorkoutXml(\n  data: string,\n  mode: WorkoutMode\n): Workout {\n  const workout: Workout = createEmptyWorkout(mode.sportType, mode.lengthType);\n\n  data = data.replace(/<!--(.*?)-->/gm, \"\");\n\n  const workout_file = Converter.xml2js(data).elements[0];\n\n  if (workout_file.name !== \"workout_file\") {\n    throw new Error(\"Invalid ZWO file\");\n  }\n\n  const sportTypeIndex = workout_file.elements.findIndex(\n    (element: { name: string }) => element.name === \"sportType\"\n  );\n  if (sportTypeIndex !== -1 && workout_file.elements[sportTypeIndex].elements) {\n    workout.sportType = workout_file.elements[sportTypeIndex].elements[0].text;\n  }\n\n  const lengthTypeIndex = workout_file.elements.findIndex(\n    (element: { name: string }) => element.name === \"durationType\"\n  );\n  if (\n    lengthTypeIndex !== -1 &&\n    workout_file.elements[lengthTypeIndex].elements\n  ) {\n    workout.lengthType =\n      workout_file.elements[lengthTypeIndex].elements[0].text;\n  }\n\n  const authorIndex = workout_file.elements.findIndex(\n    (element: { name: string }) => element.name === \"author\"\n  );\n  if (authorIndex !== -1 && workout_file.elements[authorIndex].elements) {\n    workout.author = workout_file.elements[authorIndex].elements[0].text;\n  }\n\n  const nameIndex = workout_file.elements.findIndex(\n    (element: { name: string }) => element.name === \"name\"\n  );\n  if (nameIndex !== -1 && workout_file.elements[nameIndex].elements) {\n    workout.name = workout_file.elements[nameIndex].elements[0].text;\n  }\n\n  const descriptionIndex = workout_file.elements.findIndex(\n    (element: { name: string }) => element.name === \"description\"\n  );\n  if (\n    descriptionIndex !== -1 &&\n    workout_file.elements[descriptionIndex].elements\n  ) {\n    workout.description =\n      workout_file.elements[descriptionIndex].elements[0].text;\n  }\n\n  const tagsIndex = workout_file.elements.findIndex(\n    (element: { name: string }) => element.name === \"tags\"\n  );\n  if (tagsIndex !== -1 && workout_file.elements[tagsIndex].elements) {\n    workout.tags = workout_file.elements[tagsIndex].elements.map(\n      (el: { attributes: { name: string } }) => el.attributes.name\n    );\n  }\n\n  const workoutEl = workout_file.elements.find(\n    (element: { name: string }) =>\n      element.name === \"workout\" && \"elements\" in element\n  );\n  if (!workoutEl) {\n    return workout;\n  }\n\n  // either meters (distance) or seconds (duration)\n  let totalLength = 0;\n\n  const readLength = (x: number) =>\n    workout.lengthType === \"time\" ? new Duration(x) : new Distance(x);\n\n  workoutEl.elements.map(\n    (w: {\n      name: string;\n      attributes: {\n        Power: any;\n        PowerLow: string;\n        Duration: string;\n        PowerHigh: string;\n        Cadence: string;\n        CadenceResting: string;\n        Repeat: string;\n        OnDuration: string;\n        OffDuration: string;\n        OnPower: string;\n        OffPower: string;\n        pace: string;\n      };\n      elements: any;\n    }) => {\n      let length = parseFloat(w.attributes.Duration);\n\n      if (w.name === \"SteadyState\") {\n        workout.intervals.push(\n          intervalFactory.steady(\n            {\n              intensity: parseFloat(\n                w.attributes.Power || w.attributes.PowerLow\n              ),\n              length: readLength(parseFloat(w.attributes.Duration)),\n              cadence: parseFloat(w.attributes.Cadence || \"0\"),\n              pace: parseInt(w.attributes.pace || \"0\"),\n            },\n            mode\n          )\n        );\n      }\n      if (w.name === \"Ramp\" || w.name === \"Warmup\" || w.name === \"Cooldown\") {\n        workout.intervals.push(\n          intervalFactory.ramp(\n            {\n              startIntensity: parseFloat(w.attributes.PowerLow),\n              endIntensity: parseFloat(w.attributes.PowerHigh),\n              length: readLength(parseFloat(w.attributes.Duration)),\n              pace: parseInt(w.attributes.pace || \"0\"),\n              cadence: parseInt(w.attributes.Cadence || \"0\"),\n            },\n            mode\n          )\n        );\n      }\n      if (w.name === \"IntervalsT\") {\n        workout.intervals.push(\n          intervalFactory.repetition(\n            {\n              repeat: parseFloat(w.attributes.Repeat),\n              onLength: readLength(parseFloat(w.attributes.OnDuration)),\n              offLength: readLength(parseFloat(w.attributes.OffDuration)),\n              onIntensity: parseFloat(w.attributes.OnPower),\n              offIntensity: parseFloat(w.attributes.OffPower),\n              onCadence: parseInt(w.attributes.Cadence || \"0\"),\n              offCadence: parseInt(w.attributes.CadenceResting || \"0\"),\n              pace: parseInt(w.attributes.pace || \"0\"),\n            },\n            mode\n          )\n        );\n        length =\n          (parseFloat(w.attributes.OnDuration) +\n            parseFloat(w.attributes.OffDuration)) *\n          parseFloat(w.attributes.Repeat);\n      }\n      if (w.name === \"free\") {\n        workout.intervals.push(\n          intervalFactory.free(\n            {\n              length: readLength(parseFloat(w.attributes.Duration)),\n              cadence: parseInt(w.attributes.Cadence || \"0\"),\n            },\n            mode\n          )\n        );\n      }\n\n      // check for instructions\n      const textElements = w.elements;\n      if (textElements && textElements.length > 0) {\n        textElements.forEach(\n          (t: {\n            name: string;\n            attributes: { message: string | undefined; timeoffset: string };\n          }) => {\n            if (t.name.toLowerCase() === \"textevent\")\n              workout.instructions.push({\n                text: t.attributes.message || \"\",\n                offset: readLength(\n                  totalLength + parseFloat(t.attributes.timeoffset)\n                ),\n                id: uuidv4(),\n              });\n          }\n        );\n      }\n\n      totalLength = totalLength + length;\n      // map functions expect return value\n      return false;\n    }\n  );\n\n  return workout;\n}\n","import { SportType } from \"./SportType\";\nimport { Instruction } from \"./Instruction\";\nimport { Interval } from \"./Interval\";\nimport { LengthType } from \"./LengthType\";\n\nexport interface Workout {\n  author: string;\n  name: string;\n  description: string;\n  sportType: SportType;\n  lengthType: LengthType;\n  tags: string[];\n  intervals: Array<Interval>;\n  instructions: Array<Instruction>;\n}\n\nexport function createEmptyWorkout(\n  sportType: SportType,\n  lengthType: LengthType\n): Workout {\n  return {\n    author: \"\",\n    name: \"\",\n    description: \"\",\n    sportType: sportType,\n    lengthType: lengthType,\n    tags: [],\n    intervals: [],\n    instructions: [],\n  };\n}\n","import React from \"react\";\nimport { faUpload } from \"@fortawesome/free-solid-svg-icons\";\nimport IconButton from \"../Button/IconButton\";\nimport parseWorkoutXml from \"../../xml/parseWorkoutXml\";\nimport { WorkoutMode } from \"../../modes/WorkoutMode\";\nimport { Workout } from \"../../types/Workout\";\n\ninterface UploadButtonProps {\n  mode: WorkoutMode;\n  onUpload: (workout: Workout) => void;\n}\n\nconst UploadButton: React.FC<UploadButtonProps> = ({ mode, onUpload }) => {\n  async function handleUpload(file: File) {\n    try {\n      onUpload(parseWorkoutXml(await file.text(), mode));\n    } catch (e) {\n      console.error(e);\n    }\n  }\n\n  return (\n    <>\n      <input\n        accept=\".xml,.zwo\"\n        id=\"contained-button-file\"\n        type=\"file\"\n        style={{ display: \"none\" }}\n        onChange={(e) => handleUpload(e.target.files![0])}\n      />\n      <IconButton\n        icon={faUpload}\n        onClick={() =>\n          document.getElementById(\"contained-button-file\")!.click()\n        }\n      >\n        Upload\n      </IconButton>\n    </>\n  );\n};\n\nexport default UploadButton;\n","import styled from \"styled-components\";\nimport Button from \"./Button\";\n\nconst ColorButton = styled(Button)<{ color: string }>`\n  color: white;\n  width: 50px;\n  height: 50px;\n  background-color: ${(props) => props.color};\n`;\n\nexport default ColorButton;\n","import React from \"react\";\nimport { connect } from \"react-redux\";\nimport { faDownload } from \"@fortawesome/free-solid-svg-icons\";\nimport createWorkoutXml from \"../../xml/createWorkoutXml\";\nimport IconButton from \"../Button/IconButton\";\nimport {\n  selectAuthor,\n  selectDescription,\n  selectName,\n  selectTags,\n  selectSportType,\n  selectLengthType,\n} from \"../../rdx/state/meta\";\nimport { RootState } from \"../../rdx/store\";\nimport { selectIntervals } from \"../../rdx/state/intervals\";\nimport { selectInstructions } from \"../../rdx/state/instructions\";\nimport { selectMode } from \"../../rdx/state/mode\";\nimport { ConnectedProps } from \"../../types/ConnectedProps\";\n\nconst mapStateToProps = (state: RootState) => ({\n  name: selectName(state),\n  author: selectAuthor(state),\n  description: selectDescription(state),\n  tags: selectTags(state),\n  sportType: selectSportType(state),\n  lengthType: selectLengthType(state),\n  intervals: selectIntervals(state),\n  instructions: selectInstructions(state),\n  mode: selectMode(state),\n});\n\ntype DownloadButtonProps = ConnectedProps<typeof mapStateToProps>;\n\nconst DownloadButton = (props: DownloadButtonProps) => {\n  function createZwoFile() {\n    const xml = createWorkoutXml(\n      {\n        name: props.name,\n        author: props.author,\n        description: props.description,\n        tags: props.tags,\n        sportType: props.sportType,\n        lengthType: props.lengthType,\n        intervals: props.intervals,\n        instructions: props.instructions,\n      },\n      props.mode\n    );\n\n    return new Blob([xml], { type: \"application/xml\" });\n  }\n\n  function downloadWorkout() {\n    const tempFile = createZwoFile();\n    const url = window.URL.createObjectURL(tempFile);\n\n    var a = document.createElement(\"a\");\n    document.body.appendChild(a);\n    a.style.display = \"none\";\n    a.href = url;\n    a.download = `workout.zwo`;\n    a.click();\n    window.URL.revokeObjectURL(url);\n  }\n\n  return (\n    <IconButton icon={faDownload} onClick={downloadWorkout}>\n      Download\n    </IconButton>\n  );\n};\n\nexport default connect(mapStateToProps)(DownloadButton);\n","import Builder from \"xmlbuilder\";\nimport RunMode from \"../modes/RunMode\";\nimport { WorkoutMode } from \"../modes/WorkoutMode\";\nimport { Instruction } from \"../types/Instruction\";\nimport { Interval } from \"../types/Interval\";\nimport { Duration, Length } from \"../types/Length\";\nimport { Workout } from \"../types/Workout\";\n\nexport default function createWorkoutXml(\n  {\n    author,\n    name,\n    description,\n    sportType,\n    lengthType,\n    tags,\n    intervals,\n    instructions,\n  }: Workout,\n  mode: WorkoutMode\n): string {\n  var totalLength = 0;\n\n  let xml = Builder.begin()\n    .ele(\"workout_file\")\n    .ele(\"author\", author)\n    .up()\n    .ele(\"name\", name)\n    .up()\n    .ele(\"description\", description)\n    .up()\n    .ele(\"sportType\", sportType)\n    .up()\n    .ele(\"durationType\", lengthType)\n    .up()\n    .ele(\"tags\");\n\n  tags.forEach((tag: string) => {\n    var t: Builder.XMLNode;\n    t = Builder.create(\"tag\").att(\"name\", tag);\n    xml.importDocument(t);\n  });\n\n  xml = xml.up().ele(\"workout\");\n\n  const writeLength = (len: Length): number =>\n    len instanceof Duration ? len.seconds : len.meters;\n\n  intervals.forEach((interval, index) => {\n    var segment: Builder.XMLNode;\n    var ramp;\n\n    if (interval.type === \"steady\") {\n      segment = Builder.create(\"SteadyState\")\n        .att(\"Duration\", writeLength(interval.length))\n        .att(\"Power\", interval.intensity)\n        .att(\"pace\", interval.pace);\n\n      // add cadence if not zero\n      interval.cadence !== 0 && segment.att(\"Cadence\", interval.cadence);\n    } else if (\n      interval.type === \"ramp\" &&\n      interval.startIntensity &&\n      interval.endIntensity\n    ) {\n      // index 0 is warmup\n      // last index is cooldown\n      // everything else is ramp\n\n      ramp = \"Ramp\";\n      if (index === 0) ramp = \"Warmup\";\n      if (index === intervals.length - 1) ramp = \"Cooldown\";\n\n      if (interval.startIntensity < interval.endIntensity) {\n        // warmup\n        segment = Builder.create(ramp)\n          .att(\"Duration\", writeLength(interval.length))\n          .att(\"PowerLow\", interval.startIntensity)\n          .att(\"PowerHigh\", interval.endIntensity)\n          .att(\"pace\", interval.pace);\n        // add cadence if not zero\n        interval.cadence !== 0 && segment.att(\"Cadence\", interval.cadence);\n      } else {\n        // cooldown\n        segment = Builder.create(ramp)\n          .att(\"Duration\", writeLength(interval.length))\n          .att(\"PowerLow\", interval.startIntensity) // these 2 values are inverted\n          .att(\"PowerHigh\", interval.endIntensity) // looks like a bug on zwift editor\n          .att(\"pace\", interval.pace);\n        // add cadence if not zero\n        interval.cadence !== 0 && segment.att(\"Cadence\", interval.cadence);\n      }\n    } else if (interval.type === \"repetition\") {\n      // <IntervalsT Repeat=\"5\" OnDuration=\"60\" OffDuration=\"300\" OnPower=\"0.8844353\" OffPower=\"0.51775455\" pace=\"0\"/>\n      segment = Builder.create(\"IntervalsT\")\n        .att(\"Repeat\", interval.repeat)\n        .att(\"OnDuration\", writeLength(interval.onLength))\n        .att(\"OffDuration\", writeLength(interval.offLength))\n        .att(\"OnPower\", interval.onIntensity)\n        .att(\"OffPower\", interval.offIntensity)\n        .att(\"pace\", interval.pace);\n      // add cadence if not zero\n      interval.onCadence !== 0 && segment.att(\"Cadence\", interval.onCadence);\n      // add cadence resting if not zero\n      interval.offCadence !== 0 &&\n        segment.att(\"CadenceResting\", interval.offCadence);\n    } else {\n      // free ride\n      segment = Builder.create(\"free\")\n        .att(\"Duration\", writeLength(interval.length))\n        .att(\"FlatRoad\", 0); // Not sure what this is for\n      // add cadence if not zero\n      interval.cadence !== 0 && segment.att(\"Cadence\", interval.cadence);\n    }\n\n    const intervalLength = (interval: Interval): number =>\n      mode instanceof RunMode && mode.lengthType === \"distance\"\n        ? mode.intervalDistance(interval).meters\n        : mode.intervalDuration(interval).seconds;\n\n    const instructionInsideInterval = (instruction: Instruction): boolean =>\n      writeLength(instruction.offset) >= totalLength &&\n      writeLength(instruction.offset) < totalLength + intervalLength(interval);\n\n    // add instructions if present\n    instructions.filter(instructionInsideInterval).forEach((i) => {\n      segment.ele(\"textevent\", {\n        timeoffset: writeLength(i.offset) - totalLength,\n        message: i.text,\n      });\n    });\n\n    xml.importDocument(segment);\n\n    totalLength += intervalLength(interval);\n  });\n\n  return xml.end({ pretty: true });\n}\n","import React from \"react\";\nimport styled from \"styled-components\";\nimport Button from \"./Button\";\n\ntype SvgComponent = React.FunctionComponent<\n  React.SVGProps<SVGSVGElement> & { title?: string }\n>;\n\ninterface SvgButtonProps {\n  svg: SvgComponent;\n  onClick: () => void;\n}\n\nconst SvgButton: React.FC<SvgButtonProps> = ({ svg, children, onClick }) => {\n  return (\n    <Button onClick={onClick}>\n      <StyledSvg as={svg} /> {children}\n    </Button>\n  );\n};\n\nconst StyledSvg = styled.svg`\n  width: 30px;\n  margin: 0 auto;\n  display: block;\n  margin: 0 auto;\n`;\n\nexport default SvgButton;\n","import React from \"react\";\nimport { connect } from \"react-redux\";\nimport { ZoneColor, Zones } from \"../../types/Zones\";\nimport {\n  faFile,\n  faComment,\n  faBicycle,\n} from \"@fortawesome/free-solid-svg-icons\";\nimport { ReactComponent as WarmdownLogo } from \"../../assets/warmdown.svg\";\nimport { ReactComponent as WarmupLogo } from \"../../assets/warmup.svg\";\nimport { ReactComponent as IntervalLogo } from \"../../assets/interval.svg\";\nimport { ReactComponent as SteadyLogo } from \"../../assets/steady.svg\";\nimport { createInstruction } from \"../../types/Instruction\";\nimport intervalFactory from \"../../interval/intervalFactory\";\nimport NumberField from \"../Editor/NumberField\";\nimport UploadButton from \"./UploadButton\";\nimport IconButton from \"../Button/IconButton\";\nimport ColorButton from \"../Button/ColorButton\";\nimport { selectSportType } from \"../../rdx/state/meta\";\nimport { RootState } from \"../../rdx/store\";\nimport {\n  selectFtp,\n  selectWeight,\n  setFtp,\n  setWeight,\n} from \"../../rdx/state/athlete\";\nimport { addInterval } from \"../../rdx/state/intervals\";\nimport { addInstruction } from \"../../rdx/state/instructions\";\nimport { selectMode } from \"../../rdx/state/mode\";\nimport { clearWorkout, loadWorkout } from \"../../rdx/state/workout\";\nimport DownloadButton from \"./DownloadButton\";\nimport styled from \"styled-components\";\nimport { ConnectedProps } from \"../../types/ConnectedProps\";\nimport SvgButton from \"../Button/SvgButton\";\n\nconst mapStateToProps = (state: RootState) => ({\n  sportType: selectSportType(state),\n  ftp: selectFtp(state),\n  weight: selectWeight(state),\n  mode: selectMode(state),\n});\n\nconst mapDispatchToProps = {\n  setFtp,\n  setWeight,\n  addInterval,\n  addInstruction,\n  clearWorkout,\n  loadWorkout,\n};\n\ntype ToolbarProps = ConnectedProps<\n  typeof mapStateToProps,\n  typeof mapDispatchToProps\n>;\n\nconst Toolbar = ({\n  mode,\n  addInterval,\n  addInstruction,\n  ...props\n}: ToolbarProps) => {\n  return (\n    <Container>\n      {props.sportType === \"bike\" ? (\n        <div>\n          <ColorButton\n            color={ZoneColor.GRAY}\n            onClick={() =>\n              addInterval(intervalFactory.steady({ intensity: 0.5 }, mode))\n            }\n          >\n            Z1\n          </ColorButton>\n          <ColorButton\n            color={ZoneColor.BLUE}\n            onClick={() =>\n              addInterval(\n                intervalFactory.steady({ intensity: Zones.Z2.min }, mode)\n              )\n            }\n          >\n            Z2\n          </ColorButton>\n          <ColorButton\n            color={ZoneColor.GREEN}\n            onClick={() =>\n              addInterval(\n                intervalFactory.steady({ intensity: Zones.Z3.min }, mode)\n              )\n            }\n          >\n            Z3\n          </ColorButton>\n          <ColorButton\n            color={ZoneColor.YELLOW}\n            onClick={() =>\n              addInterval(\n                intervalFactory.steady({ intensity: Zones.Z4.min }, mode)\n              )\n            }\n          >\n            Z4\n          </ColorButton>\n          <ColorButton\n            color={ZoneColor.ORANGE}\n            onClick={() =>\n              addInterval(\n                intervalFactory.steady({ intensity: Zones.Z5.min }, mode)\n              )\n            }\n          >\n            Z5\n          </ColorButton>\n          <ColorButton\n            color={ZoneColor.RED}\n            onClick={() =>\n              addInterval(\n                intervalFactory.steady({ intensity: Zones.Z6.min }, mode)\n              )\n            }\n          >\n            Z6\n          </ColorButton>\n        </div>\n      ) : (\n        <SvgButton\n          svg={SteadyLogo}\n          onClick={() => addInterval(intervalFactory.steady({}, mode))}\n        >\n          Steady Pace\n        </SvgButton>\n      )}\n\n      <SvgButton\n        svg={WarmupLogo}\n        onClick={() =>\n          addInterval(\n            intervalFactory.ramp(\n              { startIntensity: 0.25, endIntensity: 0.75 },\n              mode\n            )\n          )\n        }\n      >\n        Warm up\n      </SvgButton>\n      <SvgButton\n        svg={WarmdownLogo}\n        onClick={() =>\n          addInterval(\n            intervalFactory.ramp(\n              { startIntensity: 0.75, endIntensity: 0.25 },\n              mode\n            )\n          )\n        }\n      >\n        Cool down\n      </SvgButton>\n      <SvgButton\n        svg={IntervalLogo}\n        onClick={() => addInterval(intervalFactory.repetition({}, mode))}\n      >\n        Interval\n      </SvgButton>\n      {props.sportType === \"bike\" && (\n        <IconButton\n          icon={faBicycle}\n          onClick={() => addInterval(intervalFactory.free({}, mode))}\n        >\n          Free Ride\n        </IconButton>\n      )}\n      <IconButton\n        icon={faComment}\n        onClick={() => addInstruction(createInstruction({}, mode))}\n      >\n        Text Event\n      </IconButton>\n      {props.sportType === \"bike\" && (\n        <NumberField\n          name=\"ftp\"\n          label={\"FTP (W)\"}\n          value={props.ftp}\n          onChange={props.setFtp}\n        />\n      )}\n      {props.sportType === \"bike\" && (\n        <NumberField\n          name=\"weight\"\n          label={\"Body Weight (kg)\"}\n          value={props.weight}\n          onChange={props.setWeight}\n        />\n      )}\n      <IconButton\n        icon={faFile}\n        onClick={() => {\n          if (window.confirm(\"Are you sure you want to create a new workout?\"))\n            props.clearWorkout();\n        }}\n      >\n        New\n      </IconButton>\n      <DownloadButton />\n      <UploadButton mode={mode} onUpload={props.loadWorkout} />\n    </Container>\n  );\n};\n\nconst Container = styled.div`\n  display: flex;\n  flex-direction: row;\n  flex-wrap: wrap;\n  margin: 10px auto;\n  padding: 20px;\n  background-color: white;\n\n  -webkit-box-shadow: 0px 0px 27px -9px rgba(0, 0, 0, 0.35);\n  -moz-box-shadow: 0px 0px 27px -9px rgba(0, 0, 0, 0.35);\n  box-shadow: 0px 0px 27px -9px rgba(0, 0, 0, 0.35);\n  border-radius: 5px;\n`;\n\nexport default connect(mapStateToProps, mapDispatchToProps)(Toolbar);\n","import { v4 as uuidv4 } from \"uuid\";\nimport { WorkoutMode } from \"../modes/WorkoutMode\";\nimport { Distance, Duration, Length } from \"./Length\";\n\nexport interface Instruction {\n  id: string;\n  text: string;\n  offset: Length;\n}\n\nexport function createInstruction(\n  fields: Partial<Instruction>,\n  mode: WorkoutMode\n): Instruction {\n  return {\n    id: uuidv4(),\n    text: \"\",\n    offset: mode.lengthType === \"time\" ? new Duration(0) : new Distance(0),\n    ...fields,\n  };\n}\n","import React from \"react\";\nimport { FontAwesomeIcon } from \"@fortawesome/react-fontawesome\";\nimport { faBolt, faClock, faRuler } from \"@fortawesome/free-solid-svg-icons\";\nimport styled from \"styled-components\";\nimport {\n  FreeInterval,\n  RampInterval,\n  SteadyInterval,\n} from \"../../types/Interval\";\nimport { WorkoutMode } from \"../../modes/WorkoutMode\";\nimport BikeMode from \"../../modes/BikeMode\";\nimport RunMode from \"../../modes/RunMode\";\nimport * as format from \"../../utils/format\";\n\ninterface TooltipProps {\n  interval: SteadyInterval | RampInterval | FreeInterval;\n  mode: WorkoutMode;\n  onCadenceChange: (cadence: number) => void;\n}\n\nconst Tooltip = ({ mode, ...props }: TooltipProps) => {\n  return (\n    <TooltipContainer>\n      <div>\n        <FontAwesomeIcon icon={faClock} fixedWidth />{\" \"}\n        {format.duration(mode.intervalDuration(props.interval))}\n      </div>\n      {mode instanceof BikeMode ? (\n        <BikeData mode={mode} {...props} />\n      ) : (\n        <RunData mode={mode} {...props} />\n      )}\n    </TooltipContainer>\n  );\n};\n\nconst TooltipContainer = styled.div`\n  position: absolute;\n  z-index: 100;\n  top: -95px;\n  left: 0;\n  color: white;\n  background-color: rgba(0, 0, 0, 0.7);\n  width: 150px;\n  border-radius: 5px;\n  margin: 5px 0;\n  text-align: center;\n  font-size: 14px;\n  padding: 5px;\n`;\n\nfunction BikeData({\n  interval,\n  mode,\n  onCadenceChange,\n}: TooltipProps & { mode: BikeMode }) {\n  return (\n    <>\n      {interval.type === \"steady\" && (\n        <>\n          <div>\n            <FontAwesomeIcon icon={faBolt} fixedWidth />{\" \"}\n            {format.power(mode.power(interval.intensity))}\n          </div>\n          <div>\n            {format.wkg(mode.wkg(interval.intensity))} &middot;{\" \"}\n            {format.percentage(interval.intensity)} FTP\n          </div>\n        </>\n      )}\n      {interval.type === \"ramp\" && (\n        <>\n          <div>\n            <FontAwesomeIcon icon={faBolt} fixedWidth />{\" \"}\n            {format.power(mode.power(interval.startIntensity))} -{\" \"}\n            {format.power(mode.power(interval.endIntensity))}\n          </div>\n          <div>\n            {format.percentage(interval.startIntensity)} -{\" \"}\n            {format.percentage(interval.endIntensity)} FTP\n          </div>\n        </>\n      )}\n      <CadenceRow>\n        <CadenceLabel>Cadence</CadenceLabel>\n        <CadenceInput\n          cadence={interval.cadence}\n          onCadenceChange={onCadenceChange}\n        />\n      </CadenceRow>\n    </>\n  );\n}\n\nfunction RunData({ interval, mode }: TooltipProps & { mode: RunMode }) {\n  return (\n    <>\n      <div>\n        <FontAwesomeIcon icon={faRuler} fixedWidth />{\" \"}\n        {format.distance(mode.intervalDistance(interval))}\n      </div>\n      {interval.type === \"steady\" && (\n        <div>\n          {format.percentage(interval.intensity)}{\" \"}\n          {format.shortPaceName(interval.pace)}\n        </div>\n      )}\n      {interval.type === \"ramp\" && (\n        <div>\n          {format.percentage(interval.startIntensity)} to{\" \"}\n          {format.percentage(interval.endIntensity)}{\" \"}\n          {format.shortPaceName(interval.pace)}\n        </div>\n      )}\n    </>\n  );\n}\n\nconst CadenceRow = styled.div`\n  display: flex;\n`;\n\nconst CadenceLabel = styled.label`\n  font-size: 14px;\n  flex: 1;\n`;\n\ntype CadenceInputProps = {\n  cadence: number;\n  onCadenceChange: (v: number) => void;\n};\n\nconst CadenceInput = styled.input.attrs<CadenceInputProps>((props) => ({\n  type: \"number\",\n  min: \"40\",\n  max: \"150\",\n  step: \"5\",\n  value: props.cadence || \"\",\n  onChange: (e: React.ChangeEvent<HTMLInputElement>) => {\n    props.onCadenceChange(parseInt(e.target.value));\n  },\n  onClick: (e: React.MouseEvent<HTMLInputElement>) => {\n    e.stopPropagation();\n  },\n}))<CadenceInputProps>`\n  background-color: rgba(255, 255, 255, 0.1);\n  color: white;\n  border: 0;\n  border-bottom: 0px solid white;\n  font-size: 14px;\n  min-width: 1px;\n  flex: 1;\n`;\n\nexport default Tooltip;\n","import React, { useState } from \"react\";\nimport styled from \"styled-components\";\nimport { Resizable } from \"re-resizable\";\nimport \"moment-duration-format\";\nimport Tooltip from \"../Tooltip/Tooltip\";\nimport { FreeInterval } from \"../../types/Interval\";\nimport { durationMultiplier } from \"./multipliers\";\nimport { WorkoutMode } from \"../../modes/WorkoutMode\";\nimport freerideSvg from \"../../assets/freeride.svg\";\n\ninterface FreeBarProps {\n  interval: FreeInterval;\n  mode: WorkoutMode;\n  onChange: (interval: FreeInterval) => void;\n  onClick: (id: string) => void;\n  selected: boolean;\n}\n\nconst FreeBar = ({ interval, mode, ...props }: FreeBarProps) => {\n  const [width, setWidth] = useState(mode.lengthToWidth(interval.length));\n\n  const [showTooltip, setShowTooltip] = useState(false);\n\n  const handleCadenceChange = (cadence: number) => {\n    props.onChange({ ...interval, cadence });\n  };\n\n  // standard height\n  const height = 100;\n\n  const handleResizeStop = (dWidth: number) => {\n    setWidth(width + dWidth);\n    notifyChange(dWidth);\n  };\n\n  const notifyChange = (dWidth: number) => {\n    props.onChange({ ...interval, length: mode.widthToLength(width + dWidth) });\n  };\n\n  return (\n    <Container\n      onMouseEnter={() => setShowTooltip(true)}\n      onMouseLeave={() => setShowTooltip(false)}\n      style={props.selected ? { zIndex: 1 } : {}}\n      onClick={() => props.onClick(interval.id)}\n    >\n      {(props.selected || showTooltip) && (\n        <Tooltip\n          interval={interval}\n          mode={mode}\n          onCadenceChange={(cadence: number) => handleCadenceChange(cadence)}\n        />\n      )}\n      <ResizableFreeBar\n        size={{\n          width: mode.lengthToWidth(interval.length),\n          height: height,\n        }}\n        minWidth={durationMultiplier}\n        minHeight={height}\n        maxHeight={height}\n        enable={{ right: true }}\n        grid={[1, 1]}\n        onResizeStop={(e, direction, ref, d) => handleResizeStop(d.width)}\n        onResize={(e, direction, ref, d) => notifyChange(d.width)}\n      ></ResizableFreeBar>\n    </Container>\n  );\n};\n\nconst Container = styled.div`\n  position: relative;\n`;\n\nconst ResizableFreeBar = styled(Resizable)`\n  border: 1px solid white;\n  background-image: url(\"${freerideSvg}\");\n`;\n\nexport default FreeBar;\n","import React, { useState, useEffect } from \"react\";\nimport styled from \"styled-components\";\nimport { zoneColor, Zones } from \"../../types/Zones\";\nimport { Resizable } from \"re-resizable\";\nimport Tooltip from \"../Tooltip/Tooltip\";\nimport { SteadyInterval } from \"../../types/Interval\";\nimport { intensityMultiplier } from \"./multipliers\";\nimport { WorkoutMode } from \"../../modes/WorkoutMode\";\n\ninterface SteadyBarProps {\n  interval: SteadyInterval;\n  mode: WorkoutMode;\n  onChange: (interval: SteadyInterval) => void;\n  onClick: (id: string) => void;\n  selected: boolean;\n  showTooltip: boolean;\n}\n\nconst SteadyBar = ({ interval, mode, ...props }: SteadyBarProps) => {\n  const style = { backgroundColor: zoneColor(interval.intensity) };\n\n  const [width, setWidth] = useState(mode.lengthToWidth(interval.length));\n\n  const [height, setHeight] = useState(\n    mode.intensityToHeight(interval.intensity)\n  );\n\n  const [showTooltip, setShowTooltip] = useState(false);\n\n  const [selected, setSelected] = useState(props.selected);\n\n  useEffect(() => {\n    setSelected(props.selected);\n  }, [props.selected]);\n\n  const handleCadenceChange = (cadence: number) => {\n    props.onChange({ ...interval, cadence });\n  };\n\n  const handleResizeStop = (dWidth: number, dHeight: number) => {\n    setWidth(width + dWidth);\n    setHeight(height + dHeight);\n\n    notifyChange(dWidth, dHeight);\n  };\n\n  const notifyChange = (dWidth: number, dHeight: number) => {\n    props.onChange({\n      ...interval,\n      length: mode.widthToLength(width + dWidth),\n      intensity: mode.heightToIntensity(height + dHeight),\n    });\n  };\n\n  return (\n    <Container\n      onMouseEnter={() => setShowTooltip(true)}\n      onMouseLeave={() => setShowTooltip(false)}\n      onClick={() => props.onClick(interval.id)}\n      style={props.selected ? { zIndex: 10 } : {}}\n    >\n      {(selected || showTooltip) && props.showTooltip && (\n        <Tooltip\n          interval={interval}\n          mode={mode}\n          onCadenceChange={(cadence: number) => handleCadenceChange(cadence)}\n        />\n      )}\n      <RoundedResizable\n        size={{\n          width: mode.lengthToWidth(interval.length),\n          height: mode.intensityToHeight(interval.intensity),\n        }}\n        minWidth={3}\n        minHeight={intensityMultiplier * Zones.Z1.min}\n        maxHeight={intensityMultiplier * Zones.Z6.max}\n        enable={{ top: true, right: true }}\n        grid={[1, 1]}\n        onResizeStop={(e, direction, ref, d) =>\n          handleResizeStop(d.width, d.height)\n        }\n        onResize={(e, direction, ref, d) => notifyChange(d.width, d.height)}\n        style={style}\n      ></RoundedResizable>\n    </Container>\n  );\n};\n\nconst Container = styled.div`\n  position: relative;\n`;\n\nconst RoundedResizable = styled(Resizable)`\n  border-radius: 10px;\n  border: 1px solid white;\n`;\n\nexport default SteadyBar;\n","import React, { useState } from \"react\";\nimport styled from \"styled-components\";\nimport { zoneColor, ZoneColor, Zones, ZonesArray } from \"../../types/Zones\";\nimport { Resizable } from \"re-resizable\";\nimport Tooltip from \"../Tooltip/Tooltip\";\nimport { RampInterval } from \"../../types/Interval\";\nimport { intensityMultiplier } from \"./multipliers\";\nimport { WorkoutMode } from \"../../modes/WorkoutMode\";\n\ninterface IDictionary {\n  [index: string]: number;\n}\n\ninterface RampBarProps {\n  interval: RampInterval;\n  mode: WorkoutMode;\n  onChange: (interval: RampInterval) => void;\n  onClick: (id: string) => void;\n  selected: boolean;\n}\n\nconst RampBar = ({ interval, mode, ...props }: RampBarProps) => {\n  const [showTooltip, setShowTooltip] = useState(false);\n\n  const handleCadenceChange = (cadence: number) => {\n    props.onChange({ ...interval, cadence: cadence });\n  };\n\n  const width = mode.lengthToWidth(interval.length);\n  const [resizableWidth, setResizableWidth] = useState(width);\n\n  const startHeight = mode.intensityToHeight(interval.startIntensity);\n  const [resizableStartHeight, setResizableStartHeight] = useState(startHeight);\n\n  const endHeight = mode.intensityToHeight(interval.endIntensity);\n  const [resizableEndHeight, setResizableEndHeight] = useState(endHeight);\n\n  const handleStartResizeStop = (dHeight: number) => {\n    setResizableStartHeight(resizableStartHeight + dHeight);\n  };\n  const handleEndResizeStop = (dWidth: number, dHeight: number) => {\n    setResizableWidth(resizableWidth + dWidth);\n    setResizableEndHeight(resizableEndHeight + dHeight);\n  };\n\n  const handleStartResize = (dHeight: number) => {\n    props.onChange({\n      ...interval,\n      startIntensity: mode.heightToIntensity(resizableStartHeight + dHeight),\n    });\n  };\n  const handleEndResize = (dWidth: number, dHeight: number) => {\n    props.onChange({\n      ...interval,\n      length: mode.widthToLength(resizableWidth + dWidth),\n      startIntensity: mode.heightToIntensity(resizableStartHeight),\n      endIntensity: mode.heightToIntensity(resizableEndHeight + dHeight),\n    });\n  };\n\n  return (\n    <Container\n      onMouseEnter={() => setShowTooltip(true)}\n      onMouseLeave={() => setShowTooltip(false)}\n      style={props.selected ? { zIndex: 1 } : {}}\n      onClick={() => props.onClick(interval.id)}\n    >\n      {(props.selected || showTooltip) && (\n        <Tooltip\n          interval={interval}\n          mode={mode}\n          onCadenceChange={(cadence: number) => handleCadenceChange(cadence)}\n        />\n      )}\n      <Ramp onClick={() => props.onClick(interval.id)}>\n        <ResizableRamp\n          size={{\n            width: resizableWidth / 2,\n            height: resizableStartHeight,\n          }}\n          minWidth={3}\n          minHeight={intensityMultiplier * Zones.Z1.min}\n          maxHeight={intensityMultiplier * Zones.Z6.max}\n          enable={{ top: true, right: true }}\n          grid={[1, 1]}\n          onResizeStop={(e, direction, ref, d) =>\n            handleStartResizeStop(d.height)\n          }\n          onResize={(e, direction, ref, d) => handleStartResize(d.height)}\n        ></ResizableRamp>\n        <ResizableRamp\n          size={{\n            width: resizableWidth / 2,\n            height: resizableEndHeight,\n          }}\n          minWidth={3}\n          minHeight={intensityMultiplier * Zones.Z1.min}\n          maxHeight={intensityMultiplier * Zones.Z6.max}\n          enable={{ top: true, right: true }}\n          grid={[1, 1]}\n          onResizeStop={(e, direction, ref, d) =>\n            handleEndResizeStop(d.width, d.height)\n          }\n          onResize={(e, direction, ref, d) =>\n            handleEndResize(d.width, d.height)\n          }\n        ></ResizableRamp>\n      </Ramp>\n      <Rainbow\n        interval={interval}\n        startHeight={startHeight}\n        endHeight={endHeight}\n      />\n      <SvgPolygons\n        width={width}\n        startHeight={startHeight}\n        endHeight={endHeight}\n      />\n    </Container>\n  );\n};\n\nconst Container = styled.div`\n  position: relative;\n`;\n\nconst Ramp = styled.div`\n  display: flex;\n  align-items: flex-end;\n`;\n\nconst ResizableRamp = styled(Resizable)`\n  border-top: 1px dotted gray;\n  z-index: 5;\n`;\n\nconst Rainbow: React.FC<{\n  interval: RampInterval;\n  startHeight: number;\n  endHeight: number;\n}> = ({ interval, startHeight, endHeight }) => {\n  const trapezeHeight = endHeight > startHeight ? endHeight : startHeight;\n  const bars =\n    endHeight > startHeight\n      ? calculateColors(interval.startIntensity, interval.endIntensity)\n      : calculateColors(interval.endIntensity, interval.startIntensity);\n  const flexDirection = endHeight > startHeight ? \"row\" : \"row-reverse\";\n\n  return (\n    <RampColors\n      style={{\n        height: trapezeHeight,\n        flexDirection: flexDirection,\n        backgroundColor: zoneColor(interval.startIntensity),\n      }}\n    >\n      <Color\n        style={{\n          backgroundColor: ZoneColor.GRAY,\n          width: `${\n            (bars[\"Z1\"] * 100) /\n            Math.abs(interval.endIntensity - interval.startIntensity)\n          }%`,\n        }}\n      />\n      <Color\n        style={{\n          backgroundColor: ZoneColor.BLUE,\n          width: `${\n            (bars[\"Z2\"] * 100) /\n            Math.abs(interval.endIntensity - interval.startIntensity)\n          }%`,\n        }}\n      />\n      <Color\n        style={{\n          backgroundColor: ZoneColor.GREEN,\n          width: `${\n            (bars[\"Z3\"] * 100) /\n            Math.abs(interval.endIntensity - interval.startIntensity)\n          }%`,\n        }}\n      />\n      <Color\n        style={{\n          backgroundColor: ZoneColor.YELLOW,\n          width: `${\n            (bars[\"Z4\"] * 100) /\n            Math.abs(interval.endIntensity - interval.startIntensity)\n          }%`,\n        }}\n      />\n      <Color\n        style={{\n          backgroundColor: ZoneColor.ORANGE,\n          width: `${\n            (bars[\"Z5\"] * 100) /\n            Math.abs(interval.endIntensity - interval.startIntensity)\n          }%`,\n        }}\n      />\n      <Color\n        style={{\n          backgroundColor: ZoneColor.RED,\n          width: `${\n            (bars[\"Z6\"] * 100) /\n            Math.abs(interval.endIntensity - interval.startIntensity)\n          }%`,\n        }}\n      />\n    </RampColors>\n  );\n};\n\nconst RampColors = styled.div`\n  position: absolute;\n  bottom: 0px;\n  left: 0;\n  width: 100%;\n  display: flex;\n`;\n\nconst Color = styled.div`\n  &:first-child {\n    border-bottom-left-radius: 5px;\n  }\n  &:last-child {\n    border-bottom-right-radius: 5px;\n  }\n`;\n\nfunction calculateColors(start: number, end: number): IDictionary {\n  const bars = {} as IDictionary;\n\n  ZonesArray.forEach((zone, index) => {\n    if (start >= zone[0] && start < zone[1]) {\n      bars[\"Z\" + (index + 1)] = zone[1] - start;\n    } else if (end >= zone[0] && end < zone[1]) {\n      bars[\"Z\" + (index + 1)] = end - zone[0];\n    } else if (end >= zone[1] && start < zone[0]) {\n      bars[\"Z\" + (index + 1)] = zone[1] - zone[0];\n    } else {\n      bars[\"Z\" + (index + 1)] = 0;\n    }\n  });\n  return bars;\n}\n\nconst SvgPolygons: React.FC<{\n  width: number;\n  startHeight: number;\n  endHeight: number;\n}> = ({ width, startHeight, endHeight }) => {\n  const trapezeHeight = endHeight > startHeight ? endHeight : startHeight;\n  const trapezeTop =\n    endHeight > startHeight ? endHeight - startHeight : startHeight - endHeight;\n\n  const vertexB = endHeight > startHeight ? 0 : width;\n  const vertexA = endHeight > startHeight ? trapezeTop : 0;\n  const vertexD = endHeight > startHeight ? 0 : trapezeTop;\n\n  return (\n    <RampSvg height={`${trapezeHeight}`} width={`${width}`}>\n      <TransparentPolygon\n        points={`0,${vertexA} 0,${trapezeHeight} ${width},${trapezeHeight} ${width},${vertexD}`}\n      />\n      <HiddenPolygon points={`0,0 ${vertexB},${trapezeTop} ${width},0`} />\n    </RampSvg>\n  );\n};\n\nconst RampSvg = styled.svg`\n  position: absolute;\n  bottom: 0;\n  left: 0;\n`;\n\nconst TransparentPolygon = styled.polygon`\n  fill: transparent;\n`;\n\nconst HiddenPolygon = styled.polygon`\n  fill: white;\n  display: hidden;\n`;\n\nexport default RampBar;\n","import React, { useMemo, useState } from \"react\";\nimport SteadyBar from \"./SteadyBar\";\nimport styled from \"styled-components\";\nimport { RepetitionInterval, SteadyInterval } from \"../../types/Interval\";\nimport { WorkoutMode } from \"../../modes/WorkoutMode\";\nimport intervalFactory from \"../../interval/intervalFactory\";\nimport { range } from \"ramda\";\n\ninterface RepetitionBarProps {\n  interval: RepetitionInterval;\n  mode: WorkoutMode;\n  onChange: (interval: RepetitionInterval) => void;\n  onClick: (id: string) => void;\n  selected: boolean;\n}\n\nconst RepetitionBar = ({ interval, ...props }: RepetitionBarProps) => {\n  const [repeat, setRepeat] = useState(interval.repeat);\n\n  const [onLength, setOnLength] = useState(interval.onLength);\n  const [offLength, setOffLength] = useState(interval.offLength);\n\n  const subIntervals = useMemo(() => {\n    return range(0, repeat).flatMap(() => [\n      intervalFactory.steady(\n        {\n          length: onLength,\n          intensity: interval.onIntensity,\n          cadence: interval.onCadence,\n          pace: interval.pace,\n        },\n        props.mode\n      ),\n      intervalFactory.steady(\n        {\n          length: offLength,\n          intensity: interval.offIntensity,\n          cadence: interval.offCadence,\n          pace: interval.pace,\n        },\n        props.mode\n      ),\n    ]);\n    // eslint-disable-next-line\n  }, [repeat]);\n\n  function handleOnChange(values: SteadyInterval) {\n    const index = subIntervals.findIndex((sub) => sub.id === values.id);\n\n    if (index % 2 === 1) {\n      setOffLength(values.length);\n    } else {\n      setOnLength(values.length);\n    }\n\n    for (var i = 0; i < subIntervals.length; i++) {\n      if (index % 2 === i % 2) {\n        subIntervals[i].length = values.length;\n        subIntervals[i].intensity = values.intensity;\n        subIntervals[i].cadence = values.cadence;\n      }\n    }\n\n    props.onChange({\n      ...interval,\n      onCadence: subIntervals[0].cadence,\n      offCadence: subIntervals[1].cadence,\n      repeat: repeat,\n      onLength: subIntervals[0].length,\n      offLength: subIntervals[1].length,\n      onIntensity: subIntervals[0].intensity,\n      offIntensity: subIntervals[1].intensity,\n    });\n  }\n\n  function handleAddInterval() {\n    setRepeat(repeat + 1);\n    props.onChange({\n      ...interval,\n      repeat: interval.repeat + 1,\n    });\n  }\n\n  function handleRemoveInterval() {\n    if (repeat > 1) {\n      setRepeat(repeat - 1);\n      props.onChange({\n        ...interval,\n        repeat: interval.repeat - 1,\n      });\n    }\n  }\n\n  const renderBar = (subInterval: SteadyInterval, withTooltip: boolean) => (\n    <SteadyBar\n      key={subInterval.id}\n      interval={subInterval}\n      mode={props.mode}\n      onChange={handleOnChange}\n      onClick={() => props.onClick(interval.id)}\n      selected={props.selected}\n      showTooltip={withTooltip}\n    />\n  );\n\n  return (\n    <div>\n      <Buttons>\n        <button onClick={handleAddInterval}>+</button>\n        <button onClick={handleRemoveInterval}>-</button>\n      </Buttons>\n      <SubIntervals>\n        {subIntervals.map((sub, index) =>\n          renderBar(sub, index === 0 || index === subIntervals.length - 1)\n        )}\n      </SubIntervals>\n    </div>\n  );\n};\n\nconst Buttons = styled.div`\n  position: absolute;\n  margin-top: -30px;\n`;\n\nconst SubIntervals = styled.div`\n  display: flex;\n  flex-direction: row;\n  align-items: flex-end;\n`;\n\nexport default RepetitionBar;\n","import React from \"react\";\nimport { Interval } from \"../../types/Interval\";\nimport FreeBar from \"./FreeBar\";\nimport SteadyBar from \"./SteadyBar\";\nimport RampBar from \"./RampBar\";\nimport RepetitionBar from \"./RepetitionBar\";\nimport { WorkoutMode } from \"../../modes/WorkoutMode\";\n\ninterface GenericBarProps {\n  interval: Interval;\n  mode: WorkoutMode;\n  selected: boolean;\n  onChange: (interval: Interval) => void;\n  onClick: (id: string) => void;\n}\n\nconst GenericBar = ({\n  interval,\n  mode,\n  selected,\n  onChange,\n  onClick,\n}: GenericBarProps) => {\n  switch (interval.type) {\n    case \"steady\":\n      return (\n        <SteadyBar\n          interval={interval}\n          mode={mode}\n          onChange={onChange}\n          onClick={onClick}\n          selected={selected}\n          showTooltip={true}\n        />\n      );\n    case \"ramp\":\n      return (\n        <RampBar\n          interval={interval}\n          mode={mode}\n          onChange={onChange}\n          onClick={onClick}\n          selected={selected}\n        />\n      );\n    case \"free\":\n      return (\n        <FreeBar\n          interval={interval}\n          mode={mode}\n          onChange={onChange}\n          onClick={onClick}\n          selected={selected}\n        />\n      );\n    case \"repetition\":\n      return (\n        <RepetitionBar\n          interval={interval}\n          mode={mode}\n          onChange={onChange}\n          onClick={onClick}\n          selected={selected}\n        />\n      );\n  }\n};\n\nexport default GenericBar;\n","import React, { useState } from \"react\";\nimport Draggable from \"react-draggable\";\nimport styled from \"styled-components\";\nimport { FontAwesomeIcon } from \"@fortawesome/react-fontawesome\";\nimport { faComment, faTrashAlt } from \"@fortawesome/free-solid-svg-icons\";\nimport { Instruction } from \"../../types/Instruction\";\nimport * as format from \"../../utils/format\";\nimport { Duration, Length } from \"../../types/Length\";\nimport { WorkoutMode } from \"../../modes/WorkoutMode\";\n\ninterface InstructionEditorProps {\n  instruction: Instruction;\n  width: number;\n  onChange: (instruction: Instruction) => void;\n  onDelete: (id: string) => void;\n  index: number;\n  mode: WorkoutMode;\n}\n\nconst roundingPrecision = { meters: 10, seconds: 5 };\n\nconst InstructionEditor = (props: InstructionEditorProps) => {\n  const [text, setText] = useState(props.instruction.text);\n  const [xPosition, setXPosition] = useState(\n    props.mode.lengthToWidth(props.instruction.offset)\n  );\n\n  const [showInput, setShowInput] = useState(false);\n\n  function handleTouch(position: number) {\n    props.onChange({\n      id: props.instruction.id,\n      text: text,\n      offset: props.mode.widthToLength(position, roundingPrecision),\n    });\n  }\n\n  function handleDragging(position: number) {\n    setShowInput(false);\n    setXPosition(position);\n  }\n\n  function handleInputChange(value: string) {\n    setText(value);\n\n    props.onChange({\n      id: props.instruction.id,\n      text: value,\n      offset: props.mode.widthToLength(xPosition, roundingPrecision),\n    });\n  }\n\n  function handleDelete() {\n    if (\n      text === \"\" ||\n      window.confirm(\"Are you sure you want to delete this comment?\")\n    ) {\n      props.onDelete(props.instruction.id);\n    }\n  }\n\n  const renderOffset = (offset: Length): string =>\n    offset instanceof Duration ? format.duration(offset) : `${offset.meters} m`;\n\n  return (\n    <Draggable\n      axis=\"x\"\n      handle=\".handle\"\n      defaultPosition={{ x: xPosition, y: (props.index % 5) * 20 }}\n      bounds={{ left: 0, right: props.width }}\n      scale={1}\n      onStop={(e, data) => handleTouch(data.x)}\n      onDrag={(e, data) => handleDragging(data.x)}\n    >\n      <DraggableItem>\n        <DragHandle onMouseDown={() => setShowInput(!showInput)} />\n        {showInput && (\n          <EditorContainer>\n            <DeleteButton onClick={() => handleDelete()} />\n            <Offset>{renderOffset(props.instruction.offset)}</Offset>\n            <TextEditor\n              value={text}\n              onChange={(e) => handleInputChange(e.target.value)}\n            />\n          </EditorContainer>\n        )}\n        <VerticalLine />\n      </DraggableItem>\n    </Draggable>\n  );\n};\n\nconst DraggableItem = styled.div`\n  position: absolute;\n`;\n\nconst DragHandle = styled(FontAwesomeIcon).attrs(() => ({\n  icon: faComment,\n  size: \"lg\",\n  fixedWidth: true,\n  className: \"handle\", // Referenced by Draggable\n}))`\n  display: block;\n  opacity: 0.7;\n`;\n\nconst EditorContainer = styled.div`\n  position: relative;\n  padding: 5px;\n`;\n\nconst VerticalLine = styled.div`\n  position: absolute;\n  top: 30px;\n  left: 0px;\n  right: 0;\n  height: 90vh;\n  width: 1px;\n  border-left: 1px dotted gray;\n  z-index: 0;\n`;\n\nconst Offset = styled.span`\n  font-size: 13px;\n`;\n\nconst TextEditor = styled.textarea`\n  display: block;\n  padding: 5px;\n  width: 250px;\n  background-color: white;\n`;\n\nconst DeleteButton = styled(FontAwesomeIcon).attrs(() => ({\n  icon: faTrashAlt,\n  fixedWidth: true,\n}))`\n  color: gray;\n`;\n\nexport default InstructionEditor;\n","import styled from \"styled-components\";\n\nexport const XAxis = styled.div<{ width: number }>`\n  position: absolute;\n  bottom: 0px;\n  border-top: 1px solid gray;\n  overflow: hidden;\n  min-width: 1320px;\n  width: ${({ width }) => width}px;\n`;\n\nexport const XAxisValue = styled.span`\n  position: relative;\n  display: inline-block;\n  margin-top: 20px;\n  padding: 0;\n\n  &::before {\n    content: \"\";\n    position: absolute;\n    width: 1px;\n    height: 10px;\n    top: -20px;\n    left: 0;\n    background-color: gray;\n  }\n`;\n","import React from \"react\";\nimport styled from \"styled-components\";\nimport { XAxis, XAxisValue } from \"./XAxis\";\n\nconst hoursBy10Minutes = (hours: number): string[] =>\n  [...new Array(hours)].flatMap((v, h) =>\n    [\"00\", \"10\", \"20\", \"30\", \"40\", \"50\"].map((m) => `${h}:${m}`)\n  );\n\nconst TimeAxis = ({ width }: { width: number }) => (\n  <XAxis width={width}>\n    {hoursBy10Minutes(6).map((time) => (\n      <TimeAxisValue key={time}>{time}</TimeAxisValue>\n    ))}\n  </XAxis>\n);\n\nconst TimeAxisValue = styled(XAxisValue)`\n  width: 200px;\n`;\n\nexport default TimeAxis;\n","import React from \"react\";\nimport styled from \"styled-components\";\nimport { Zones } from \"../../types/Zones\";\n\nconst ZoneAxis = () => (\n  <Container>\n    {Object.entries(Zones)\n      .reverse()\n      .map(([name, zone]) => (\n        <ZoneItem key={name} zone={zone}>\n          {name}\n        </ZoneItem>\n      ))}\n  </Container>\n);\n\nconst Container = styled.div`\n  position: absolute;\n  bottom: 50px;\n  left: 2px;\n  color: gray;\n`;\n\nconst ZoneItem = styled.div<{ zone: { max: number } }>`\n  position: absolute;\n  bottom: 0;\n  left: 0;\n  height: ${({ zone }) => zone.max * 250}px;\n\n  /* Zone 6 has no upper bound */\n  &:not(:first-child) {\n    border-top: 1px solid gray;\n  }\n`;\n\nexport default ZoneAxis;\n","import React from \"react\";\nimport styled from \"styled-components\";\nimport { XAxis, XAxisValue } from \"./XAxis\";\n\nconst DistanceAxis = ({ width }: { width: number }) => (\n  <XAxis width={width}>\n    {[...new Array(44)].map((e, i) => (\n      <DistanceAxisValue key={i}>{i}K</DistanceAxisValue>\n    ))}\n  </XAxis>\n);\n\nconst DistanceAxisValue = styled(XAxisValue)`\n  width: 100px;\n`;\n\nexport default DistanceAxis;\n","import React from \"react\";\nimport styled from \"styled-components\";\nimport { PaceType } from \"../../types/PaceType\";\n\ninterface PaceSelectorProps {\n  value?: PaceType;\n  onChange: (value: PaceType) => void;\n}\n\nconst PaceSelector = ({ value, onChange }: PaceSelectorProps) => (\n  <StyledSelect\n    name=\"pace\"\n    value={value}\n    onChange={(e) => onChange(parseInt(e.target.value))}\n  >\n    <option value=\"0\">1 Mile Pace</option>\n    <option value=\"1\">5K Pace</option>\n    <option value=\"2\">10K Pace</option>\n    <option value=\"3\">Half Marathon Pace</option>\n    <option value=\"4\">Marathon Pace</option>\n  </StyledSelect>\n);\n\nconst StyledSelect = styled.select`\n  font-size: 16px;\n  background-color: rgba(0, 0, 0, 0.7);\n  color: white;\n  padding: 10px;\n  border-radius: 5px;\n`;\n\nexport default PaceSelector;\n","import React from \"react\";\nimport { IconDefinition } from \"@fortawesome/fontawesome-svg-core\";\nimport { FontAwesomeIcon } from \"@fortawesome/react-fontawesome\";\nimport styled from \"styled-components\";\n\ninterface ActionButtonProps {\n  title: string;\n  icon: IconDefinition;\n  onClick: () => void;\n}\n\nconst ActionButton: React.FC<ActionButtonProps> = ({\n  title,\n  icon,\n  onClick,\n}) => {\n  return (\n    <RoundButton onClick={onClick} title={title}>\n      <FontAwesomeIcon icon={icon} size=\"lg\" fixedWidth />\n    </RoundButton>\n  );\n};\n\nconst RoundButton = styled.button`\n  padding: 20px;\n  margin: 0 5px;\n  background-color: rgba(0, 0, 0, 0.7);\n  color: white;\n  border: 0;\n  border-radius: 50%;\n`;\n\nexport default ActionButton;\n","import React from \"react\";\nimport { connect } from \"react-redux\";\nimport {\n  faTrash,\n  faArrowRight,\n  faArrowLeft,\n  faCopy,\n} from \"@fortawesome/free-solid-svg-icons\";\nimport PaceSelector from \"./PaceSelector\";\nimport ActionButton from \"../Button/ActionButton\";\nimport { selectSportType } from \"../../rdx/state/meta\";\nimport { RootState } from \"../../rdx/store\";\nimport {\n  removeSelectedInterval,\n  duplicateSelectedInterval,\n  moveSelectedInterval,\n  selectSelectedIntervalPace,\n  setSelectedIntervalPace,\n} from \"../../rdx/state/intervals\";\nimport { ConnectedProps } from \"../../types/ConnectedProps\";\nimport styled from \"styled-components\";\n\nconst mapStateToProps = (state: RootState) => ({\n  sportType: selectSportType(state),\n  selectedIntervalPace: selectSelectedIntervalPace(state),\n});\n\nconst mapDispatchToProps = {\n  setSelectedIntervalPace,\n  removeSelectedInterval,\n  duplicateSelectedInterval,\n  moveSelectedInterval,\n};\n\ntype SelectionToolbarProps = ConnectedProps<\n  typeof mapStateToProps,\n  typeof mapDispatchToProps\n>;\n\nconst SelectionToolbar = (props: SelectionToolbarProps) => {\n  const {\n    sportType,\n    selectedIntervalPace,\n    setSelectedIntervalPace,\n    removeSelectedInterval,\n    duplicateSelectedInterval,\n    moveSelectedInterval,\n  } = props;\n\n  return (\n    <ActionsContainer>\n      <ActionButton\n        title=\"Move Left\"\n        icon={faArrowLeft}\n        onClick={() => moveSelectedInterval(-1)}\n      />\n      <ActionButton\n        title=\"Move Right\"\n        icon={faArrowRight}\n        onClick={() => moveSelectedInterval(+1)}\n      />\n      <ActionButton\n        title=\"Delete\"\n        icon={faTrash}\n        onClick={removeSelectedInterval}\n      />\n      <ActionButton\n        title=\"Duplicate\"\n        icon={faCopy}\n        onClick={duplicateSelectedInterval}\n      />\n      {sportType === \"run\" && (\n        <PaceSelector\n          value={selectedIntervalPace}\n          onChange={setSelectedIntervalPace}\n        />\n      )}\n    </ActionsContainer>\n  );\n};\n\nconst ActionsContainer = styled.div`\n  position: absolute;\n  top: 0;\n  left: 0;\n  right: 0;\n  width: 220px;\n  margin: 0 auto;\n  padding: 5px;\n  z-index: 10;\n`;\n\nexport default connect(mapStateToProps, mapDispatchToProps)(SelectionToolbar);\n","import React, { useState, useEffect, useRef } from \"react\";\nimport { connect } from \"react-redux\";\nimport GenericBar from \"../Bar/GenericBar\";\nimport InstructionEditor from \"../InstructionEditor/InstructionEditor\";\nimport TimeAxis from \"../Axis/TimeAxis\";\nimport ZoneAxis from \"../Axis/ZoneAxis\";\nimport { workoutDuration } from \"../../utils/duration\";\nimport DistanceAxis from \"../Axis/DistanceAxis\";\nimport { selectLengthType } from \"../../rdx/state/meta\";\nimport { RootState } from \"../../rdx/store\";\nimport { selectIntervals, updateInterval } from \"../../rdx/state/intervals\";\nimport {\n  selectInstructions,\n  updateInstruction,\n  removeInstruction,\n} from \"../../rdx/state/instructions\";\nimport { selectMode } from \"../../rdx/state/mode\";\nimport { ConnectedProps } from \"../../types/ConnectedProps\";\nimport {\n  selectSelectedId,\n  clearSelection,\n  setSelectedId,\n} from \"../../rdx/state/selectedId\";\nimport SelectionToolbar from \"../SelectionToolbar/SelectionToolbar\";\nimport styled from \"styled-components\";\n\nconst mapStateToProps = (state: RootState) => ({\n  lengthType: selectLengthType(state),\n  intervals: selectIntervals(state),\n  instructions: selectInstructions(state),\n  mode: selectMode(state),\n  selectedId: selectSelectedId(state),\n});\n\nconst mapDispatchToProps = {\n  updateInterval,\n  updateInstruction,\n  setSelectedId,\n  clearSelection,\n  removeInstruction,\n};\n\ntype EditorProps = ConnectedProps<\n  typeof mapStateToProps,\n  typeof mapDispatchToProps\n>;\n\nconst Editor = ({\n  lengthType,\n  intervals,\n  instructions,\n  mode,\n  selectedId,\n  updateInterval,\n  updateInstruction,\n  setSelectedId,\n  clearSelection,\n  removeInstruction,\n}: EditorProps) => {\n  const segmentsRef = useRef<HTMLDivElement>(null);\n  const [xAxisWidth, setXAxisWidth] = useState(1320);\n\n  useEffect(() => {\n    setXAxisWidth(segmentsRef.current?.scrollWidth || 1320);\n  }, [segmentsRef]);\n\n  function toggleSelection(id: string) {\n    if (id === selectedId) {\n      clearSelection();\n    } else {\n      setSelectedId(id);\n    }\n  }\n\n  return (\n    <Container>\n      {selectedId && <SelectionToolbar />}\n\n      <Canvas>\n        {selectedId && (\n          <Fader style={{ width: xAxisWidth }} onClick={clearSelection} />\n        )}\n        <Segments ref={segmentsRef}>\n          {intervals.map((interval) => (\n            <GenericBar\n              key={interval.id}\n              interval={interval}\n              mode={mode}\n              onChange={updateInterval}\n              onClick={toggleSelection}\n              selected={interval.id === selectedId}\n            />\n          ))}\n        </Segments>\n\n        <Slider>\n          {instructions.map((instruction, index) => (\n            <InstructionEditor\n              key={instruction.id}\n              instruction={instruction}\n              width={workoutDuration(intervals, mode).seconds / 3}\n              onChange={updateInstruction}\n              onDelete={removeInstruction}\n              index={index}\n              mode={mode}\n            />\n          ))}\n        </Slider>\n\n        {lengthType === \"time\" ? (\n          <TimeAxis width={xAxisWidth} />\n        ) : (\n          <DistanceAxis width={xAxisWidth} />\n        )}\n      </Canvas>\n      <ZoneAxis />\n    </Container>\n  );\n};\n\nconst Container = styled.div`\n  flex: 1;\n  position: relative;\n  white-space: nowrap;\n  background-color: white;\n\n  padding: 0px 40px;\n  margin: 10px auto;\n  overflow-x: hidden;\n  width: 100%;\n  max-width: 1280px;\n  -webkit-box-shadow: 0px 0px 27px -9px rgba(0, 0, 0, 0.35);\n  -moz-box-shadow: 0px 0px 27px -9px rgba(0, 0, 0, 0.35);\n  box-shadow: 0px 0px 27px -9px rgba(0, 0, 0, 0.35);\n  border-radius: 5px;\n`;\n\nconst Canvas = styled.div`\n  position: absolute;\n  width: 100%;\n  max-width: 1320px;\n  height: 100%;\n  overflow-y: hidden;\n  overflow-x: visible;\n  bottom: 10px;\n`;\n\nconst Segments = styled.div`\n  position: absolute;\n  display: flex;\n  flex-wrap: nowrap;\n  justify-content: flex-start;\n  align-items: flex-end;\n  bottom: 0px;\n  padding-bottom: 40px;\n  margin-right: 100px;\n`;\n\nconst Fader = styled.div`\n  position: absolute;\n  background-color: rgba(255, 255, 255, 0.9);\n  top: 0;\n  left: 0;\n  right: 0;\n  bottom: 0;\n  width: 50000px;\n  height: 100%;\n  z-index: 1;\n`;\n\nconst Slider = styled.div`\n  position: absolute;\n  top: 10px;\n  left: 0px;\n`;\n\nexport default connect(mapStateToProps, mapDispatchToProps)(Editor);\n","import React, { useState } from \"react\";\nimport { connect } from \"react-redux\";\nimport Popup from \"../Popup/Popup\";\nimport Footer from \"../Footer/Footer\";\nimport {\n  faBiking,\n  faRunning,\n  faClock,\n  faRuler,\n} from \"@fortawesome/free-solid-svg-icons\";\nimport SaveForm from \"../Forms/SaveForm\";\nimport Head from \"../Head/Head\";\nimport RunningTimesEditor from \"./RunningTimesEditor\";\nimport LeftRightToggle from \"./LeftRightToggle\";\nimport Keyboard from \"../Keyboard/Keyboard\";\nimport Stats from \"./Stats\";\nimport Title from \"./Title\";\nimport { SportType } from \"../../types/SportType\";\nimport { Duration } from \"../../types/Length\";\nimport { LengthType } from \"../../types/LengthType\";\nimport {\n  selectAuthor,\n  selectDescription,\n  selectName,\n  selectSportType,\n  selectLengthType,\n  setSportType,\n  setLengthType,\n} from \"../../rdx/state/meta\";\nimport { RootState } from \"../../rdx/store\";\nimport {\n  selectFtp,\n  selectRunningTimes,\n  setRunningTimes,\n} from \"../../rdx/state/athlete\";\nimport {\n  selectIntervals,\n  adjustSelectedIntervalIntensity,\n  adjustSelectedIntervalDuration,\n  updateInterval,\n  removeSelectedInterval,\n} from \"../../rdx/state/intervals\";\nimport {\n  updateInstruction,\n  removeInstruction,\n} from \"../../rdx/state/instructions\";\nimport { selectMode } from \"../../rdx/state/mode\";\nimport { clearWorkout } from \"../../rdx/state/workout\";\nimport Toolbar from \"../Toolbar/Toolbar\";\nimport { ConnectedProps } from \"../../types/ConnectedProps\";\nimport { clearSelection, setSelectedId } from \"../../rdx/state/selectedId\";\nimport Editor from \"../Editor/Editor\";\nimport styled from \"styled-components\";\n\nconst mapStateToProps = (state: RootState) => ({\n  name: selectName(state),\n  author: selectAuthor(state),\n  description: selectDescription(state),\n  sportType: selectSportType(state),\n  lengthType: selectLengthType(state),\n  ftp: selectFtp(state),\n  runningTimes: selectRunningTimes(state),\n  intervals: selectIntervals(state),\n  mode: selectMode(state),\n});\n\nconst mapDispatchToProps = {\n  setSportType,\n  setLengthType,\n  setRunningTimes,\n  clearWorkout,\n  adjustSelectedIntervalIntensity,\n  adjustSelectedIntervalDuration,\n  updateInterval,\n  updateInstruction,\n  setSelectedId,\n  clearSelection,\n  removeSelectedInterval,\n  removeInstruction,\n};\n\ntype EditorPageProps = ConnectedProps<\n  typeof mapStateToProps,\n  typeof mapDispatchToProps\n>;\n\nconst EditorPage = ({\n  name,\n  author,\n  description,\n  sportType,\n  lengthType,\n  ftp,\n  runningTimes,\n  intervals,\n  mode,\n  setSportType,\n  setLengthType,\n  setRunningTimes,\n  clearWorkout,\n  adjustSelectedIntervalIntensity,\n  adjustSelectedIntervalDuration,\n  removeSelectedInterval,\n}: EditorPageProps) => {\n  const [savePopupIsVisile, setSavePopupVisibility] = useState(false);\n\n  function switchSportType(newSportType: SportType) {\n    if (\n      window.confirm(\n        `Switching from ${sportType} to ${newSportType} will clear current workout. Are you sure?`\n      )\n    ) {\n      clearWorkout();\n      setSportType(newSportType);\n    }\n  }\n\n  function switchLengthType(newLengthType: LengthType) {\n    if (\n      window.confirm(\n        `Switching from ${lengthType} to ${newLengthType} will clear current workout. Are you sure?`\n      )\n    ) {\n      clearWorkout();\n      setLengthType(newLengthType);\n    }\n  }\n\n  return (\n    <KeyboardContainer\n      onBackspacePress={removeSelectedInterval}\n      onUpPress={() => adjustSelectedIntervalIntensity(0.01)}\n      onDownPress={() => adjustSelectedIntervalIntensity(-0.01)}\n      onLeftPress={() => adjustSelectedIntervalDuration(new Duration(-5))}\n      onRightPress={() => adjustSelectedIntervalDuration(new Duration(5))}\n    >\n      <Head name={name} description={description} />\n\n      {savePopupIsVisile && (\n        <Popup width=\"500px\" onClose={() => setSavePopupVisibility(false)}>\n          <SaveForm />\n        </Popup>\n      )}\n      <Header>\n        <Title\n          name={name}\n          author={author}\n          description={description}\n          onClick={() => setSavePopupVisibility(true)}\n        />\n        <HeaderRight>\n          <Stats intervals={intervals} ftp={ftp} mode={mode} />\n          {sportType === \"run\" && (\n            <LeftRightToggle<\"time\", \"distance\">\n              label=\"Duration Type\"\n              leftValue=\"time\"\n              rightValue=\"distance\"\n              leftIcon={faClock}\n              rightIcon={faRuler}\n              selected={lengthType}\n              onChange={switchLengthType}\n            />\n          )}\n          <LeftRightToggle<\"bike\", \"run\">\n            label=\"Sport Type\"\n            leftValue=\"bike\"\n            rightValue=\"run\"\n            leftIcon={faBiking}\n            rightIcon={faRunning}\n            selected={sportType}\n            onChange={switchSportType}\n          />\n        </HeaderRight>\n      </Header>\n      {sportType === \"run\" && (\n        <RunningTimesEditor times={runningTimes} onChange={setRunningTimes} />\n      )}\n\n      <Editor />\n\n      <Toolbar />\n      <Footer />\n    </KeyboardContainer>\n  );\n};\n\nconst KeyboardContainer = styled(Keyboard)`\n  display: flex;\n  flex-direction: column;\n  min-height: 100%;\n  margin: 0px;\n  background-color: #eaeaea;\n  overflow-x: hidden;\n`;\n\nconst Header = styled.div`\n  margin: 0 auto;\n  text-align: left;\n  max-width: 1360px;\n  width: 100%;\n  display: flex;\n  flex-direction: row;\n`;\n\nconst HeaderRight = styled.div`\n  padding: 10px;\n  display: flex;\n  flex-direction: row;\n`;\n\nexport default connect(mapStateToProps, mapDispatchToProps)(EditorPage);\n","import React from \"react\";\nimport { BrowserRouter as Router, Switch, Route } from \"react-router-dom\";\nimport EditorPage from \"./components/EditorPage/EditorPage\";\n\nexport default function App() {\n  return (\n    <Router>\n      <Switch>\n        <Route path=\"/\">\n          <EditorPage />\n        </Route>\n      </Switch>\n    </Router>\n  );\n}\n","// This optional code is used to register a service worker.\n// register() is not called by default.\n\n// This lets the app load faster on subsequent visits in production, and gives\n// it offline capabilities. However, it also means that developers (and users)\n// will only see deployed updates on subsequent visits to a page, after all the\n// existing tabs open on the page have been closed, since previously cached\n// resources are updated in the background.\n\n// To learn more about the benefits of this model and instructions on how to\n// opt-in, read https://bit.ly/CRA-PWA\n\nconst isLocalhost = Boolean(\n  window.location.hostname === \"localhost\" ||\n    // [::1] is the IPv6 localhost address.\n    window.location.hostname === \"[::1]\" ||\n    // 127.0.0.0/8 are considered localhost for IPv4.\n    window.location.hostname.match(\n      /^127(?:\\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/\n    )\n);\n\nexport function register(config) {\n  if (process.env.NODE_ENV === \"production\" && \"serviceWorker\" in navigator) {\n    // The URL constructor is available in all browsers that support SW.\n    const publicUrl = new URL(process.env.PUBLIC_URL, window.location.href);\n    if (publicUrl.origin !== window.location.origin) {\n      // Our service worker won't work if PUBLIC_URL is on a different origin\n      // from what our page is served on. This might happen if a CDN is used to\n      // serve assets; see https://github.com/facebook/create-react-app/issues/2374\n      return;\n    }\n\n    window.addEventListener(\"load\", () => {\n      const swUrl = `${process.env.PUBLIC_URL}/service-worker.js`;\n\n      if (isLocalhost) {\n        // This is running on localhost. Let's check if a service worker still exists or not.\n        checkValidServiceWorker(swUrl, config);\n\n        // Add some additional logging to localhost, pointing developers to the\n        // service worker/PWA documentation.\n        navigator.serviceWorker.ready.then(() => {\n          console.log(\n            \"This web app is being served cache-first by a service \" +\n              \"worker. To learn more, visit https://bit.ly/CRA-PWA\"\n          );\n        });\n      } else {\n        // Is not localhost. Just register service worker\n        registerValidSW(swUrl, config);\n      }\n    });\n  }\n}\n\nfunction registerValidSW(swUrl, config) {\n  navigator.serviceWorker\n    .register(swUrl)\n    .then((registration) => {\n      registration.onupdatefound = () => {\n        const installingWorker = registration.installing;\n        if (installingWorker == null) {\n          return;\n        }\n        installingWorker.onstatechange = () => {\n          if (installingWorker.state === \"installed\") {\n            if (navigator.serviceWorker.controller) {\n              // At this point, the updated precached content has been fetched,\n              // but the previous service worker will still serve the older\n              // content until all client tabs are closed.\n              console.log(\n                \"New content is available and will be used when all \" +\n                  \"tabs for this page are closed. See https://bit.ly/CRA-PWA.\"\n              );\n\n              // Execute callback\n              if (config && config.onUpdate) {\n                config.onUpdate(registration);\n              }\n            } else {\n              // At this point, everything has been precached.\n              // It's the perfect time to display a\n              // \"Content is cached for offline use.\" message.\n              console.log(\"Content is cached for offline use.\");\n\n              // Execute callback\n              if (config && config.onSuccess) {\n                config.onSuccess(registration);\n              }\n            }\n          }\n        };\n      };\n    })\n    .catch((error) => {\n      console.error(\"Error during service worker registration:\", error);\n    });\n}\n\nfunction checkValidServiceWorker(swUrl, config) {\n  // Check if the service worker can be found. If it can't reload the page.\n  fetch(swUrl, {\n    headers: { \"Service-Worker\": \"script\" },\n  })\n    .then((response) => {\n      // Ensure service worker exists, and that we really are getting a JS file.\n      const contentType = response.headers.get(\"content-type\");\n      if (\n        response.status === 404 ||\n        (contentType != null && contentType.indexOf(\"javascript\") === -1)\n      ) {\n        // No service worker found. Probably a different app. Reload the page.\n        navigator.serviceWorker.ready.then((registration) => {\n          registration.unregister().then(() => {\n            window.location.reload();\n          });\n        });\n      } else {\n        // Service worker found. Proceed as normal.\n        registerValidSW(swUrl, config);\n      }\n    })\n    .catch(() => {\n      console.log(\n        \"No internet connection found. App is running in offline mode.\"\n      );\n    });\n}\n\nexport function unregister() {\n  if (\"serviceWorker\" in navigator) {\n    navigator.serviceWorker.ready\n      .then((registration) => {\n        registration.unregister();\n      })\n      .catch((error) => {\n        console.error(error.message);\n      });\n  }\n}\n","import { reducer as meta } from \"./state/meta\";\nimport { reducer as athlete } from \"./state/athlete\";\nimport { reducer as intervals } from \"./state/intervals\";\nimport { reducer as instructions } from \"./state/instructions\";\nimport { reducer as selectedId } from \"./state/selectedId\";\nimport { persistCombineReducers } from \"redux-persist\";\nimport storage from \"redux-persist/lib/storage\";\n\nexport const reducer = persistCombineReducers(\n  {\n    key: \"root\",\n    storage,\n  },\n  {\n    meta,\n    athlete,\n    intervals,\n    instructions,\n    selectedId,\n  }\n);\n","import { configureStore } from \"@reduxjs/toolkit\";\nimport { reducer } from \"./reducer\";\nimport { persistStore } from \"redux-persist\";\n\nexport type RootState = ReturnType<typeof reducer>;\n\nexport const store = configureStore({\n  reducer,\n});\n\nexport const persistor = persistStore(store);\n","import React from \"react\";\nimport ReactDOM from \"react-dom\";\nimport { Provider } from \"react-redux\";\nimport \"./index.css\";\nimport App from \"./App\";\nimport * as serviceWorker from \"./serviceWorker\";\nimport { store } from \"./rdx/store\";\n\nReactDOM.render(\n  <React.StrictMode>\n    <Provider store={store}>\n      <App />\n    </Provider>\n  </React.StrictMode>,\n  document.getElementById(\"root\")\n);\n\n// If you want your app to work offline and load faster, you can change\n// unregister() to register() below. Note this comes with some pitfalls.\n// Learn more about service workers: https://bit.ly/CRA-PWA\nserviceWorker.unregister();\n"],"sourceRoot":""}