{"version":3,"sources":["assets/freeride.svg","components/Popup/Popup.tsx","const.ts","components/Footer/Footer.tsx","rdx/state/workout.ts","rdx/state/meta.ts","components/Label/Label.tsx","components/Forms/Checkbox.tsx","components/Forms/SaveForm.tsx","types/PaceType.ts","components/Head/Head.tsx","types/runningDistances.ts","components/Layout/Column.tsx","components/EditorPage/RunningTimesEditor.tsx","components/EditorPage/LeftRightToggle.tsx","components/Keyboard/Keyboard.tsx","types/Length.ts","interval/intervalFactory.ts","utils/math.ts","modes/Mode.ts","components/Bar/multipliers.ts","modes/BikeMode.ts","modes/RunMode.ts","utils/distance.ts","utils/duration.ts","utils/format.ts","components/EditorPage/Stats.tsx","components/EditorPage/Title.tsx","types/Zones.ts","rdx/state/athlete.ts","interval/intervalUtils.ts","utils/array.ts","rdx/state/selectedId.ts","rdx/state/mode.ts","modes/createMode.ts","rdx/state/intervals.ts","rdx/state/instructions.ts","assets/warmdown.svg","assets/warmup.svg","assets/interval.svg","assets/steady.svg","components/Toolbar/NumberField.tsx","components/Button/Button.tsx","components/Button/IconButton.tsx","xml/parseWorkoutXml.ts","types/Workout.ts","components/Toolbar/UploadButton.tsx","components/Button/ColorButton.tsx","components/Toolbar/DownloadButton.tsx","xml/createWorkoutXml.ts","components/Button/SvgButton.tsx","components/Toolbar/Toolbar.tsx","types/Instruction.ts","components/Tooltip/Tooltip.tsx","components/Bar/FreeBar.tsx","components/Bar/SteadyBar.tsx","components/Bar/RampBar.tsx","components/Bar/RepetitionBar.tsx","components/Bar/GenericBar.tsx","components/InstructionEditor/InstructionEditor.tsx","components/Axis/XAxis.tsx","components/Axis/TimeAxis.tsx","components/Axis/ZoneAxis.tsx","components/Axis/DistanceAxis.tsx","components/SelectionToolbar/PaceSelector.tsx","components/Button/ActionButton.tsx","components/SelectionToolbar/SelectionToolbar.tsx","components/Editor/Editor.tsx","components/EditorPage/EditorPage.tsx","App.tsx","serviceWorker.js","rdx/reducer.ts","rdx/store.ts","index.js","assets/cadence.png"],"names":["module","exports","Background","styled","div","Window","CloseButton","button","Popup","props","style","width","height","onClick","onClose","icon","faTimesCircle","size","fixedWidth","children","GITHUB_URL","Footer","Container","List","Item","Hyperlink","href","target","ul","li","a","clearWorkout","createAction","loadWorkout","initialState","name","author","description","tags","sportType","lengthType","slice","createSlice","reducers","setName","state","action","payload","setAuthor","setDescription","setTags","setSportType","setLengthType","extraReducers","builder","addCase","reducer","actions","selectMeta","meta","selectName","createSelector","m","selectAuthor","selectDescription","selectTags","selectSportType","selectLengthType","Label","label","CheckboxLabel","Checkbox","type","checked","isSelected","onChange","e","onCheckboxChange","className","DEFAULT_TAGS","mapDispatchToProps","PaceType","Heading","h2","Field","FieldLabel","TextInput","input","connect","htmlFor","id","placeholder","value","as","map","tagName","key","includes","filter","item","addOrRemoveTag","Head","Helmet","content","runningDistances","Column","RunningTimesEditor","times","estimateRunningTimes","useCallback","timesOrig","distances","estimatedTimes","forEach","i","index","length","calculateEstimatedTimes","handleInputChange","pace","t","timesCopy","time","oneMile","fiveKm","tenKm","halfMarathon","marathon","Col","RunTimeInput","title","TimePickerStyleOverrides","StyledTimePicker","undefined","moment","utc","defaultOpenValue","duration","format","asSeconds","createGlobalStyle","TimePicker","LeftRight","ToggleIcon","FontAwesomeIcon","$active","LeftRightToggle","leftValue","rightValue","leftIcon","rightIcon","selected","checkedIcon","uncheckedIcon","onColor","offColor","Keyboard","onKeyDown","event","HTMLInputElement","HTMLTextAreaElement","keyCode","onBackspacePress","preventDefault","onLeftPress","onRightPress","onUpPress","onDownPress","tabIndex","Distance","meters","Duration","seconds","isDuration","obj","defaultDuration","defaultDistance","defaultPace","defaultLength","mode","interval","uuidv4","intensity","cadence","startIntensity","defaultIntensity","endIntensity","repeat","onLength","offLength","onIntensity","offIntensity","onCadence","offCadence","floor","x","roundTo","Math","Mode","precision","this","BikeMode","ftp","weight","power","Error","onDuration","offDuration","RunMode","runningTimes","speed","distance","onDistance","offDistance","workoutDistance","intervals","sum","intervalDistance","d","workoutDuration","intervalDuration","trim","round","percentage","shortPaceName","runningPace","secondsPerKm","getStressScore","tss","np","iff","npOn","iffOn","intervalFactory","npOff","iffOff","toFixed","Stats","disabled","ZoneColor","h1","StyledIcon","Author","p","Title","faEdit","setFtp","setWeight","setRunningTimes","selectAthlete","athlete","selectFtp","selectWeight","selectRunningTimes","Zones","Z1","min","max","Z2","Z3","Z4","Z5","Z6","ZonesArray","zoneColor","GRAY","BLUE","GREEN","YELLOW","ORANGE","RED","updateById","transform","findIndex","propEq","update","replaceById","array","setSelectedId","clearSelection","selectSelectedId","selectedId","selectMode","createMode","setIntervals","addInterval","updateInterval","removeInterval","removeSelectedInterval","createAsyncThunk","_","getState","dispatch","duplicateSelectedInterval","selectSelectedInterval","adjustSelectedIntervalIntensity","amount","selectIntervals","dIntensity","updateIntervalIntensity","adjustSelectedIntervalDuration","dDuration","updateIntervalDuration","moveSelectedInterval","direction","oldIndex","newIndex","move","moveInterval","setSelectedIntervalPace","find","selectSelectedIntervalPace","setInstructions","addInstruction","updateInstruction","instructions","removeInstruction","selectInstructions","_extends","Object","assign","arguments","source","prototype","hasOwnProperty","call","apply","_objectWithoutProperties","excluded","sourceKeys","keys","indexOf","_objectWithoutPropertiesLoose","getOwnPropertySymbols","sourceSymbolKeys","propertyIsEnumerable","createElement","stroke","strokeWidth","fill","fillRule","points","_ref","svgRef","viewBox","ref","ForwardRef","forwardRef","y","NumberField","parseInt","Button","IconButton","parseWorkoutXml","data","workout","replace","workout_file","Converter","xml2js","elements","sportTypeIndex","element","text","lengthTypeIndex","authorIndex","nameIndex","descriptionIndex","tagsIndex","el","attributes","workoutEl","totalLength","readLength","w","parseFloat","push","Power","PowerLow","Cadence","PowerHigh","Repeat","OnDuration","OffDuration","OnPower","OffPower","CadenceResting","textElements","toLowerCase","message","offset","timeoffset","UploadButton","onUpload","file","console","error","accept","display","handleUpload","files","faUpload","document","getElementById","click","ColorButton","color","createZwoFile","xml","Builder","begin","ele","up","tag","create","att","importDocument","writeLength","len","segment","ramp","intervalLength","instruction","end","pretty","createWorkoutXml","Blob","faDownload","tempFile","url","window","URL","createObjectURL","body","appendChild","download","revokeObjectURL","StyledSvg","svg","SvgButton","SteadyLogo","WarmupLogo","WarmdownLogo","IntervalLogo","faBicycle","faRunning","faComment","fields","createInstruction","faFile","confirm","TooltipContainer","BikeData","wkg","onCadenceChange","faBolt","CadenceItem","useState","hover","setHover","focus","setFocus","CadenceRow","onMouseOver","onMouseOut","CadenceLabel","src","cadenceImage","alt","CadenceInput","onFocus","onBlur","CadenceValue","RunData","faRuler","attrs","step","stopPropagation","span","Tooltip","faClock","ResizableFreeBar","Resizable","freerideSvg","FreeBar","lengthToWidth","setWidth","showTooltip","setShowTooltip","notifyChange","dWidth","widthToLength","onMouseEnter","onMouseLeave","zIndex","handleCadenceChange","minWidth","minHeight","maxHeight","enable","right","grid","onResizeStop","onResize","RoundedResizable","$hasCadence","SteadyBar","backgroundColor","intensityToHeight","setHeight","setSelected","useEffect","dHeight","heightToIntensity","top","Boolean","Ramp","ResizableRamp","Rainbow","startHeight","endHeight","trapezeHeight","bars","calculateColors","flexDirection","RampColors","Color","abs","start","zone","SvgPolygons","trapezeTop","vertexB","vertexA","vertexD","RampSvg","TransparentPolygon","HiddenPolygon","polygon","RampBar","resizableWidth","setResizableWidth","resizableStartHeight","setResizableStartHeight","resizableEndHeight","setResizableEndHeight","Buttons","SubIntervals","RepetitionBar","setRepeat","setOnLength","setOffLength","subIntervals","useMemo","range","flatMap","handleOnChange","values","sub","subInterval","withTooltip","GenericBar","roundingPrecision","DraggableItem","DragHandle","EditorContainer","VerticalLine","Offset","TextEditor","textarea","DeleteButton","faTrashAlt","InstructionEditor","setText","xPosition","setXPosition","showInput","setShowInput","axis","handle","defaultPosition","bounds","left","scale","onStop","position","onDrag","onMouseDown","onDelete","XAxis","XAxisValue","TimeAxisValue","TimeAxis","hours","Array","v","h","ZoneItem","ZoneAxis","entries","reverse","DistanceAxisValue","DistanceAxis","StyledSelect","select","PaceSelector","RoundButton","ActionButton","ActionsContainer","selectedIntervalPace","faArrowLeft","faArrowRight","faTrash","faCopy","Canvas","Segments","Fader","Slider","segmentsRef","useRef","xAxisWidth","setXAxisWidth","toggleSelection","current","scrollWidth","KeyboardContainer","Header","HeaderRight","savePopupIsVisile","setSavePopupVisibility","isEmpty","newLengthType","faBiking","newSportType","App","path","location","hostname","match","persistCombineReducers","storage","store","configureStore","persistStore","ReactDOM","render","StrictMode","navigator","serviceWorker","ready","then","registration","unregister","catch"],"mappings":"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","file":"static/js/main.a6ce06fe.chunk.js","sourcesContent":["module.exports = __webpack_public_path__ + \"static/media/freeride.d3e319d6.svg\";","import React from \"react\";\nimport { FontAwesomeIcon } from \"@fortawesome/react-fontawesome\";\nimport { faTimesCircle } from \"@fortawesome/free-solid-svg-icons\";\nimport styled from \"styled-components\";\n\nconst Popup: React.FC<{\n  width: string;\n  height?: string;\n  onClose: () => void;\n}> = (props) => {\n  return (\n    <Background>\n      <Window style={{ width: props.width, height: props.height }}>\n        <CloseButton onClick={props.onClose}>\n          <FontAwesomeIcon icon={faTimesCircle} size=\"lg\" fixedWidth />\n        </CloseButton>\n        {props.children}\n      </Window>\n    </Background>\n  );\n};\n\nconst Background = styled.div`\n  position: fixed;\n  background-color: rgba(0, 0, 0, 0.5);\n  top: 0;\n  bottom: 0;\n  left: 0;\n  right: 0;\n  width: 100%;\n  height: 100%;\n  z-index: 1000;\n`;\n\nconst Window = styled.div`\n  position: fixed;\n  position: fixed;\n  left: 50%;\n  top: 50%;\n  transform: translate(-50%, -50%);\n\n  padding: 10px;\n\n  align-self: center;\n  margin: 0 auto;\n  background-color: white;\n  border-radius: 5px;\n\n  box-shadow: -5px 1px 51px 0px rgba(0, 0, 0, 0.75);\n  -webkit-box-shadow: -5px 1px 51px 0px rgba(0, 0, 0, 0.75);\n  -moz-box-shadow: -5px 1px 51px 0px rgba(0, 0, 0, 0.75);\n\n  overflow-y: scroll;\n`;\n\nconst CloseButton = styled.button`\n  background-color: rgba(0, 0, 0, 0);\n  border: 0;\n  float: right;\n  color: white;\n  position: absolute;\n  top: 10px;\n  right: 10px;\n  color: black;\n`;\n\nexport default Popup;\n","export const GITHUB_URL = \"https://github.com/nene/zwo-editor\";\n","import React from \"react\";\nimport styled from \"styled-components\";\nimport { GITHUB_URL } from \"../../const\";\n\nexport default function Footer() {\n  return (\n    <Container>\n      <List>\n        <Item>\n          Zwift Workout v2.0 (\n          <Hyperlink\n            href={`${GITHUB_URL}/blob/master/LICENSE.md`}\n            target=\"blank\"\n          >\n            open source / MIT license\n          </Hyperlink>\n          )\n        </Item>\n        <Item>\n          <Hyperlink href={`${GITHUB_URL}/issues`} target=\"blank\">\n            Report an issue\n          </Hyperlink>\n        </Item>\n      </List>\n    </Container>\n  );\n}\n\nconst Container = styled.div`\n  padding: 10px;\n  font-size: 12px;\n  text-align: center;\n  background-color: black;\n  color: white;\n`;\n\nconst List = styled.ul`\n  list-style: none;\n  margin: 0;\n  padding: 0;\n`;\n\nconst Item = styled.li`\n  display: inline;\n  padding: 0 10px;\n  margin: 0;\n`;\n\nconst Hyperlink = styled.a`\n  text-decoration: none;\n  color: #00c46a;\n`;\n","import { createAction } from \"@reduxjs/toolkit\";\nimport { Workout } from \"../../types/Workout\";\n\nexport const clearWorkout = createAction(\"workout/clearWorkout\");\nexport const loadWorkout = createAction<Workout>(\"workout/loadWorkout\");\n","import { createSlice, createSelector, PayloadAction } from \"@reduxjs/toolkit\";\nimport { LengthType } from \"../../types/LengthType\";\nimport { SportType } from \"../../types/SportType\";\nimport { RootState } from \"../store\";\nimport { clearWorkout, loadWorkout } from \"./workout\";\n\ninterface MetaState {\n  name: string;\n  author: string;\n  description: string;\n  tags: string[];\n  sportType: SportType;\n  lengthType: LengthType;\n}\n\nconst DEFAULT_NAME = \"Untitled workout\";\n\nconst initialState: MetaState = {\n  name: DEFAULT_NAME,\n  author: \"\",\n  description: \"\",\n  tags: [],\n  sportType: \"bike\",\n  lengthType: \"time\",\n};\n\nconst slice = createSlice({\n  name: \"meta\",\n  initialState,\n  reducers: {\n    setName: (state, action: PayloadAction<string>) => ({\n      ...state,\n      name: action.payload,\n    }),\n    setAuthor: (state, action: PayloadAction<string>) => ({\n      ...state,\n      author: action.payload,\n    }),\n    setDescription: (state, action: PayloadAction<string>) => ({\n      ...state,\n      description: action.payload,\n    }),\n    setTags: (state, action: PayloadAction<string[]>) => ({\n      ...state,\n      tags: action.payload,\n    }),\n    setSportType: (state, action: PayloadAction<SportType>) => ({\n      ...state,\n      sportType: action.payload,\n    }),\n    setLengthType: (state, action: PayloadAction<LengthType>) => ({\n      ...state,\n      lengthType: action.payload,\n    }),\n  },\n  extraReducers: (builder) => {\n    builder\n      .addCase(clearWorkout, (state) => ({\n        ...state,\n        name: DEFAULT_NAME,\n        author: \"\",\n        description: \"\",\n        tags: [],\n      }))\n      .addCase(loadWorkout, (state, { payload }) => ({\n        name: payload.name,\n        author: payload.author,\n        description: payload.description,\n        tags: payload.tags,\n        sportType: payload.sportType,\n        lengthType: payload.lengthType,\n      }));\n  },\n});\n\nexport const reducer = slice.reducer;\nexport const {\n  setName,\n  setAuthor,\n  setDescription,\n  setTags,\n  setSportType,\n  setLengthType,\n} = slice.actions;\n\nconst selectMeta = (state: RootState) => state.meta;\nexport const selectName = createSelector(selectMeta, (m) => m.name);\nexport const selectAuthor = createSelector(selectMeta, (m) => m.author);\nexport const selectDescription = createSelector(\n  selectMeta,\n  (m) => m.description\n);\nexport const selectTags = createSelector(selectMeta, (m) => m.tags);\nexport const selectSportType = createSelector(selectMeta, (m) => m.sportType);\nexport const selectLengthType = createSelector(selectMeta, (m) => m.lengthType);\n","import styled from \"styled-components\";\n\nexport const Label = styled.label`\n  font-size: 10px;\n  text-align: center;\n  padding: 5px;\n`;\n","import React from \"react\";\nimport styled from \"styled-components\";\nimport { Label } from \"../Label/Label\";\n\nconst Checkbox = (props: {\n  label: string;\n  isSelected: boolean;\n  onCheckboxChange: Function;\n}) => (\n  <Container>\n    <CheckboxLabel>\n      <input\n        type=\"checkbox\"\n        name={props.label}\n        checked={props.isSelected}\n        onChange={(e) => props.onCheckboxChange()}\n        className=\"form-check-input\"\n      />\n      {props.label}\n    </CheckboxLabel>\n  </Container>\n);\n\nconst Container = styled.div`\n  display: inline-block;\n  padding: 10px 10px 10px 0;\n`;\n\nconst CheckboxLabel = styled(Label)`\n  font-size: 16px;\n  color: gray;\n`;\n\nexport default Checkbox;\n","import React from \"react\";\nimport { connect } from \"react-redux\";\nimport styled from \"styled-components\";\nimport {\n  selectAuthor,\n  selectDescription,\n  selectName,\n  selectTags,\n  setName,\n  setAuthor,\n  setDescription,\n  setTags,\n} from \"../../rdx/state/meta\";\nimport { RootState } from \"../../rdx/store\";\nimport { ConnectedProps } from \"../../types/ConnectedProps\";\nimport { Label } from \"../Label/Label\";\nimport Checkbox from \"./Checkbox\";\n\nconst DEFAULT_TAGS = [\"Recovery\", \"Intervals\", \"FTP\", \"TT\"];\n\nconst mapStateToProps = (state: RootState) => ({\n  name: selectName(state),\n  author: selectAuthor(state),\n  description: selectDescription(state),\n  tags: selectTags(state),\n});\n\nconst mapDispatchToProps = {\n  setName,\n  setAuthor,\n  setDescription,\n  setTags,\n};\n\ntype SaveFormProps = ConnectedProps<\n  typeof mapStateToProps,\n  typeof mapDispatchToProps\n>;\n\nfunction SaveForm(props: SaveFormProps) {\n  return (\n    <div>\n      <Heading>Workout metadata</Heading>\n      <Field>\n        <FieldLabel htmlFor=\"name\">Workout Title</FieldLabel>\n        <TextInput\n          type=\"text\"\n          id=\"name\"\n          placeholder=\"Workout title\"\n          value={props.name}\n          onChange={(e) => props.setName(e.target.value)}\n        />\n      </Field>\n      <Field>\n        <FieldLabel htmlFor=\"description\">Workout description</FieldLabel>\n        <TextInput\n          as=\"textarea\"\n          id=\"description\"\n          placeholder=\"Workout description\"\n          value={props.description}\n          onChange={(e: React.ChangeEvent<HTMLTextAreaElement>) =>\n            props.setDescription(e.target.value)\n          }\n        />\n      </Field>\n      <Field>\n        <FieldLabel htmlFor=\"author\">Workout Author</FieldLabel>\n        <TextInput\n          type=\"text\"\n          id=\"author\"\n          placeholder=\"Workout Author\"\n          value={props.author}\n          onChange={(e) => props.setAuthor(e.target.value)}\n        />\n      </Field>\n      <Field>\n        <FieldLabel>Workout Tags</FieldLabel>\n        {DEFAULT_TAGS.map((tagName) => (\n          <Checkbox\n            key={tagName}\n            label={tagName}\n            isSelected={props.tags.includes(tagName)}\n            onCheckboxChange={() =>\n              props.setTags(addOrRemoveTag(props.tags, tagName))\n            }\n          />\n        ))}\n      </Field>\n    </div>\n  );\n}\n\nfunction addOrRemoveTag(tags: string[], tagName: string): string[] {\n  if (tags.includes(tagName)) {\n    return tags.filter((item) => item !== tagName);\n  } else {\n    return [...tags, tagName];\n  }\n}\n\nconst Heading = styled.h2`\n  font-size: 34px;\n  font-weight: 200;\n  margin: 0;\n  text-transform: uppercase;\n`;\n\nconst Field = styled.div`\n  margin: 10px 0;\n  width: 100%;\n`;\n\nconst FieldLabel = styled(Label)`\n  font-size: 14px;\n  color: gray;\n  display: block;\n  text-align: left;\n`;\n\nconst TextInput = styled.input`\n  display: block;\n  width: 100%;\n  padding: 10px;\n  margin-top: 10px;\n\n  font-size: 16px;\n  border: 1px solid #aaa;\n  border-radius: 5px;\n  box-sizing: border-box;\n`;\n\nexport default connect(mapStateToProps, mapDispatchToProps)(SaveForm);\n","export enum PaceType {\n  oneMile = 0,\n  fiveKm = 1,\n  tenKm = 2,\n  halfMarathon = 3,\n  marathon = 4,\n}\n","import React from \"react\";\nimport { Helmet } from \"react-helmet\";\n\ninterface HeadProps {\n  name: string;\n  description: string;\n}\n\nconst Head = ({ name, description }: HeadProps) => (\n  <Helmet>\n    <title>\n      {name\n        ? `${name} - Zwift Workout Editor`\n        : \"My Workout - Zwift Workout Editor\"}\n    </title>\n    <meta name=\"description\" content={description} />\n  </Helmet>\n);\n\nexport default Head;\n","// Distances corresponding to each PaceType. In meters.\nexport const runningDistances = [1609.34, 5000, 10000, 21097.5, 42195];\n","import styled from \"styled-components\";\n\nexport const Column = styled.div`\n  display: flex;\n  flex-direction: column;\n`;\n","import React, { useCallback } from \"react\";\nimport TimePicker from \"rc-time-picker\";\nimport \"rc-time-picker/assets/index.css\";\nimport moment from \"moment\";\nimport { RunningTimes } from \"../../types/RunningTimes\";\nimport { PaceType } from \"../../types/PaceType\";\nimport { runningDistances } from \"../../types/runningDistances\";\nimport styled, { createGlobalStyle } from \"styled-components\";\nimport { Column } from \"../Layout/Column\";\nimport { Label } from \"../Label/Label\";\n\ninterface RunningTimesEditorProps {\n  times: RunningTimes;\n  onChange: (times: RunningTimes) => void;\n}\n\nexport default function RunningTimesEditor({\n  times,\n  onChange,\n}: RunningTimesEditorProps) {\n  const estimateRunningTimes = useCallback(() => {\n    onChange(calculateEstimatedTimes(times));\n  }, [times, onChange]);\n\n  const handleInputChange = (pace: PaceType, t: number) => {\n    const timesCopy = [...times];\n    timesCopy[pace] = t;\n    onChange(timesCopy);\n  };\n\n  return (\n    <Container>\n      <RunTimeInput\n        time={times[PaceType.oneMile]}\n        onChange={(t) => handleInputChange(PaceType.oneMile, t)}\n      >\n        1 mile time\n      </RunTimeInput>\n      <RunTimeInput\n        time={times[PaceType.fiveKm]}\n        onChange={(t) => handleInputChange(PaceType.fiveKm, t)}\n      >\n        5 km time\n      </RunTimeInput>\n      <RunTimeInput\n        time={times[PaceType.tenKm]}\n        onChange={(t) => handleInputChange(PaceType.tenKm, t)}\n      >\n        10 km time\n      </RunTimeInput>\n      <RunTimeInput\n        time={times[PaceType.halfMarathon]}\n        onChange={(t) => handleInputChange(PaceType.halfMarathon, t)}\n      >\n        Half marathon time\n      </RunTimeInput>\n      <RunTimeInput\n        time={times[PaceType.marathon]}\n        onChange={(t) => handleInputChange(PaceType.marathon, t)}\n      >\n        Marathon time\n      </RunTimeInput>\n      <Col>\n        <button onClick={estimateRunningTimes} className=\"btn\">\n          Estimate missing times\n        </button>\n      </Col>\n    </Container>\n  );\n}\n\nconst Container = styled.div`\n  display: flex;\n  margin: 0 auto;\n  flex-direction: row;\n  width: 100%;\n  max-width: 1360px;\n`;\n\nconst Col = styled(Column)`\n  padding-right: 10px;\n  align-self: flex-end;\n`;\n\nconst RunTimeInput: React.FC<{\n  time: number;\n  onChange: (time: number) => void;\n}> = ({ time, onChange, children }) => (\n  <Col>\n    <Label>\n      <abbr title=\"hh:mm:ss\">{children}</abbr>\n    </Label>\n    <TimePickerStyleOverrides />\n    <StyledTimePicker\n      value={time === 0 ? undefined : moment.utc(time * 1000)}\n      placeholder=\"00:00:00\"\n      defaultOpenValue={moment(\"00:00:00\")}\n      onChange={(value) =>\n        onChange(\n          value ? moment.duration(value.format(\"HH:mm:ss\")).asSeconds() : 0\n        )\n      }\n    />\n  </Col>\n);\n\nconst TimePickerStyleOverrides = createGlobalStyle`\n  .rc-time-picker-panel-input {\n    font-size: 18px;  \n    font-family: monospace;\n  }\n\n  .rc-time-picker-panel-select > ul > li {\n    font-size: 16px;  \n    font-family: monospace;\n  }\n`;\n\nconst StyledTimePicker = styled(TimePicker)`\n  width: 120px;\n\n  & > input {\n    font-size: 18px;\n    font-family: monospace;\n    color: black;\n  }\n`;\n\nconst defaultDistance = 1609.34; // one mile in meters\nconst defaultTime = 11 * 60 + 20; // 00:11:20\n\nexport function calculateEstimatedTimes(timesOrig: number[]): number[] {\n  const distances = [...runningDistances, defaultDistance];\n  const times = [...timesOrig, defaultTime];\n  const estimatedTimes: number[] = [];\n\n  timesOrig.forEach((value, i) => {\n    if (!value) {\n      for (let index = 0; index < times.length; index++) {\n        // found a time\n        if (times[index]) {\n          // Predictions calculated using Riegel's formula: T2 = T1 x (D2/D1) x 1.06\n          // T1 = T2 / (1.06 * (D2/D1))\n          estimatedTimes[i] =\n            times[index] * (distances[i] / distances[index]) * 1.06;\n          break;\n        }\n      }\n    } else {\n      estimatedTimes[i] = value;\n    }\n  });\n\n  return estimatedTimes;\n}\n","import { IconProp } from \"@fortawesome/fontawesome-svg-core\";\nimport { FontAwesomeIcon } from \"@fortawesome/react-fontawesome\";\nimport React from \"react\";\nimport Switch from \"react-switch\";\nimport styled from \"styled-components\";\nimport { Column } from \"../Layout/Column\";\nimport { Label } from \"../Label/Label\";\n\ninterface LeftRightToggleProps<TLeft, TRight> {\n  label: string;\n  leftValue: TLeft;\n  rightValue: TRight;\n  leftIcon: IconProp;\n  rightIcon: IconProp;\n  selected: TLeft | TRight;\n  onChange: (selected: TLeft | TRight) => void;\n}\n\nconst COLOR = \"#00C46A\";\n\nconst LeftRightToggle = <TLeft, TRight>({\n  label,\n  leftValue,\n  rightValue,\n  leftIcon,\n  rightIcon,\n  selected,\n  onChange,\n}: LeftRightToggleProps<TLeft, TRight>) => (\n  <Col>\n    <Label>{label}</Label>\n    <LeftRight>\n      <ToggleIcon\n        $active={selected === leftValue}\n        icon={leftIcon}\n        size=\"lg\"\n        fixedWidth\n      />\n      <Switch\n        onChange={() =>\n          onChange(selected === leftValue ? rightValue : leftValue)\n        }\n        checked={selected === rightValue}\n        checkedIcon={false}\n        uncheckedIcon={false}\n        onColor={COLOR}\n        offColor={COLOR}\n      />\n      <ToggleIcon\n        $active={selected === rightValue}\n        icon={rightIcon}\n        size=\"lg\"\n        fixedWidth\n      />\n    </LeftRight>\n  </Col>\n);\n\nconst Col = styled(Column)`\n  max-width: 120px;\n  padding: 0 10px;\n`;\n\nconst LeftRight = styled.div`\n  display: flex;\n  flex-direction: row;\n  color: lightgray;\n`;\n\nconst ToggleIcon = styled(FontAwesomeIcon)<{ $active: boolean }>`\n  padding: 5px;\n  color: ${({ $active }) => ($active ? \"#00C46A\" : \"inherit\")};\n`;\n\nexport default LeftRightToggle;\n","import React from \"react\";\n\n// Component which captures key press events\n\ninterface KeyboardProps {\n  className?: string;\n  onBackspacePress: () => void;\n  onDownPress: () => void;\n  onUpPress: () => void;\n  onLeftPress: () => void;\n  onRightPress: () => void;\n}\n\nconst Keyboard: React.FC<KeyboardProps> = (props) => {\n  function handleKeyPress(event: React.KeyboardEvent<HTMLDivElement>) {\n    if (\n      event.target instanceof HTMLInputElement ||\n      event.target instanceof HTMLTextAreaElement\n    ) {\n      // Ignore key presses coming from input elements\n      return;\n    }\n\n    switch (event.keyCode) {\n      case 8:\n        props.onBackspacePress();\n        // Prevent navigation to previous page\n        event.preventDefault();\n        break;\n      case 37:\n        props.onLeftPress();\n        break;\n      case 39:\n        props.onRightPress();\n        break;\n      case 38:\n        props.onUpPress();\n        break;\n      case 40:\n        props.onDownPress();\n        break;\n    }\n  }\n\n  return (\n    // Adding tabIndex allows div element to receive keyboard events\n    <div className={props.className} onKeyDown={handleKeyPress} tabIndex={0}>\n      {props.children}\n    </div>\n  );\n};\n\nexport default Keyboard;\n","/**\n * Distance & Duration\n *\n * These types are just wrappers around Number,\n * to discriminate between two kinds of lengths.\n *\n * Previously these were implemented as classes,\n * which made interop with Redux problematic,\n * especially because it complicated the serialization & deserialization\n * when saving Redux state to localStorage.\n */\nexport type Distance = { meters: number };\nexport type Duration = { seconds: number };\nexport type Length = Distance | Duration;\n\nexport const Distance = (meters: number): Distance => ({ meters });\nexport const Duration = (seconds: number): Duration => ({ seconds });\n\nexport const isDistance = (obj: Length): obj is Distance => \"meters\" in obj;\nexport const isDuration = (obj: Length): obj is Duration => \"seconds\" in obj;\n","import { v4 as uuidv4 } from \"uuid\";\nimport { PaceType } from \"../types/PaceType\";\nimport {\n  FreeInterval,\n  Interval,\n  RampInterval,\n  RepetitionInterval,\n  SteadyInterval,\n} from \"../types/Interval\";\nimport { Distance, Duration, Length } from \"../types/Length\";\nimport { WorkoutMode } from \"../modes/WorkoutMode\";\n\nconst defaultDuration = Duration(300);\nconst defaultDistance = Distance(1000);\nconst defaultIntensity = 1.0;\nconst defaultPace = PaceType.oneMile;\n\nconst defaultLength = (mode: WorkoutMode): Length =>\n  mode.lengthType === \"time\" ? defaultDuration : defaultDistance;\n\nexport default {\n  steady(interval: Partial<SteadyInterval>, mode: WorkoutMode): SteadyInterval {\n    return {\n      type: \"steady\",\n      id: uuidv4(),\n      length: defaultLength(mode),\n      intensity: defaultIntensity,\n      cadence: undefined,\n      pace: defaultPace,\n      ...interval,\n    };\n  },\n\n  ramp(interval: Partial<RampInterval>, mode: WorkoutMode): RampInterval {\n    return {\n      type: \"ramp\",\n      id: uuidv4(),\n      length: defaultLength(mode),\n      startIntensity: defaultIntensity / 2,\n      endIntensity: defaultIntensity,\n      cadence: undefined,\n      pace: defaultPace,\n      ...interval,\n    };\n  },\n\n  free(interval: Partial<FreeInterval>, mode: WorkoutMode): FreeInterval {\n    return {\n      type: \"free\",\n      id: uuidv4(),\n      length: defaultLength(mode),\n      cadence: undefined,\n      ...interval,\n    };\n  },\n\n  repetition(\n    interval: Partial<RepetitionInterval>,\n    mode: WorkoutMode\n  ): RepetitionInterval {\n    return {\n      type: \"repetition\",\n      id: uuidv4(),\n      repeat: 3,\n      onLength: mode.lengthType === \"time\" ? Duration(30) : Distance(200),\n      offLength: mode.lengthType === \"time\" ? Duration(120) : Distance(200),\n      onIntensity: defaultIntensity,\n      offIntensity: defaultIntensity / 2,\n      onCadence: undefined,\n      offCadence: undefined,\n      pace: defaultPace,\n      ...interval,\n    };\n  },\n\n  // Creates a copy of the interval, with a new ID\n  clone(interval: Interval): Interval {\n    return { ...interval, id: uuidv4() };\n  },\n};\n","export function floor(x: number, roundTo: number): number {\n  return Math.floor(x / roundTo) * roundTo;\n}\n","import {\n  distanceMultiplier,\n  durationMultiplier,\n  intensityMultiplier,\n} from \"../components/Bar/multipliers\";\nimport { Distance, Duration, isDuration, Length } from \"../types/Length\";\nimport { LengthType } from \"../types/LengthType\";\nimport { SportType } from \"../types/SportType\";\nimport { floor } from \"../utils/math\";\n\ninterface Precision {\n  meters: number;\n  seconds: number;\n}\n\n// Base class for duration-based Mode classes\nexport default abstract class Mode {\n  public abstract readonly sportType: SportType;\n  public abstract readonly lengthType: LengthType;\n\n  lengthToWidth(length: Length): number {\n    if (isDuration(length)) {\n      return length.seconds / durationMultiplier;\n    } else {\n      return length.meters / distanceMultiplier;\n    }\n  }\n\n  widthToLength(\n    width: number,\n    precision: Precision = { meters: 200, seconds: 5 }\n  ): Length {\n    if (this.lengthType === \"time\") {\n      return Duration(floor(width * durationMultiplier, precision.seconds));\n    } else {\n      return Distance(floor(width * distanceMultiplier, precision.meters));\n    }\n  }\n\n  intensityToHeight(intensity: number): number {\n    return intensity * intensityMultiplier;\n  }\n\n  heightToIntensity(height: number): number {\n    return height / intensityMultiplier;\n  }\n}\n","export const intensityMultiplier = 250;\nexport const durationMultiplier = 3;\nexport const distanceMultiplier = 10;\n","import { LengthType } from \"../types/LengthType\";\nimport { Duration, isDuration, Length } from \"../types/Length\";\nimport { SportType } from \"../types/SportType\";\nimport Mode from \"./Mode\";\nimport { Interval } from \"../types/Interval\";\n\nexport default class BikeMode extends Mode {\n  private ftp: number;\n  private weight: number;\n  public readonly sportType: SportType = \"bike\";\n  public readonly lengthType: LengthType = \"time\";\n\n  constructor(ftp: number, weight: number) {\n    super();\n    this.ftp = ftp;\n    this.weight = weight;\n  }\n\n  power(intensity: number): number {\n    return intensity * this.ftp;\n  }\n\n  wkg(intensity: number): number {\n    return this.power(intensity) / this.weight;\n  }\n\n  duration(length: Length): Duration {\n    if (isDuration(length)) {\n      return length;\n    } else {\n      throw new Error(\"Unexpected length:Distance encountered in BikeMode\");\n    }\n  }\n\n  intervalDuration(interval: Interval): Duration {\n    switch (interval.type) {\n      case \"free\":\n      case \"steady\":\n      case \"ramp\":\n        return this.duration(interval.length);\n      case \"repetition\": {\n        const onDuration = this.duration(interval.onLength);\n        const offDuration = this.duration(interval.offLength);\n        return Duration(\n          interval.repeat * (onDuration.seconds + offDuration.seconds)\n        );\n      }\n    }\n  }\n}\n","import { SportType } from \"../types/SportType\";\nimport { PaceType } from \"../types/PaceType\";\nimport { RunningTimes } from \"../types/RunningTimes\";\nimport { runningDistances } from \"../types/runningDistances\";\nimport { LengthType } from \"../types/LengthType\";\nimport Mode from \"./Mode\";\nimport {\n  Distance,\n  Duration,\n  isDistance,\n  isDuration,\n  Length,\n} from \"../types/Length\";\nimport { Interval } from \"../types/Interval\";\n\nexport default class RunMode extends Mode {\n  private runningTimes: RunningTimes;\n  public readonly sportType: SportType = \"run\";\n  public readonly lengthType: LengthType;\n\n  constructor(runningTimes: RunningTimes, lengthType: LengthType) {\n    super();\n    this.runningTimes = runningTimes;\n    this.lengthType = lengthType;\n  }\n\n  speed(intensity: number, pace: PaceType): number {\n    return (runningDistances[pace] / this.runningTimes[pace]) * intensity; // in m/s\n  }\n\n  distance(length: Length, intensity: number, pace: PaceType): Distance {\n    if (isDuration(length)) {\n      return Distance(this.speed(intensity, pace) * length.seconds);\n    } else {\n      return length;\n    }\n  }\n\n  duration(length: Length, intensity: number, pace: PaceType): Duration {\n    if (isDuration(length)) {\n      return length;\n    } else {\n      return Duration(length.meters / this.speed(intensity, pace));\n    }\n  }\n\n  intervalDistance(interval: Interval): Distance {\n    switch (interval.type) {\n      case \"free\": {\n        return isDistance(interval.length) ? interval.length : Distance(0);\n      }\n      case \"steady\": {\n        return this.distance(\n          interval.length,\n          interval.intensity,\n          interval.pace\n        );\n      }\n      case \"ramp\": {\n        return this.distance(\n          interval.length,\n          (interval.startIntensity + interval.endIntensity) / 2,\n          interval.pace\n        );\n      }\n      case \"repetition\": {\n        const onDistance = this.distance(\n          interval.onLength,\n          interval.onIntensity,\n          interval.pace\n        );\n        const offDistance = this.distance(\n          interval.offLength,\n          interval.offIntensity,\n          interval.pace\n        );\n        return Distance(\n          interval.repeat * (onDistance.meters + offDistance.meters)\n        );\n      }\n    }\n  }\n\n  intervalDuration(interval: Interval): Duration {\n    switch (interval.type) {\n      case \"free\":\n        return isDuration(interval.length) ? interval.length : Duration(0);\n      case \"steady\":\n        return this.duration(\n          interval.length,\n          interval.intensity,\n          interval.pace\n        );\n      case \"ramp\":\n        return this.duration(\n          interval.length,\n          (interval.startIntensity + interval.endIntensity) / 2,\n          interval.pace\n        );\n      case \"repetition\": {\n        const onDuration = this.duration(\n          interval.onLength,\n          interval.onIntensity,\n          interval.pace\n        );\n        const offDuration = this.duration(\n          interval.offLength,\n          interval.offIntensity,\n          interval.pace\n        );\n        return Duration(\n          interval.repeat * (onDuration.seconds + offDuration.seconds)\n        );\n      }\n    }\n  }\n}\n","import RunMode from \"../modes/RunMode\";\nimport { Interval } from \"../types/Interval\";\nimport { sum } from \"ramda\";\nimport { Distance } from \"../types/Length\";\n\nexport function workoutDistance(\n  intervals: Interval[],\n  mode: RunMode\n): Distance {\n  return Distance(\n    sum(\n      intervals\n        .map((interval) => mode.intervalDistance(interval))\n        .map((d) => d.meters)\n    )\n  );\n}\n","import { Interval } from \"../types/Interval\";\nimport { sum } from \"ramda\";\nimport { WorkoutMode } from \"../modes/WorkoutMode\";\nimport { Duration } from \"../types/Length\";\n\n// calculate total time\nexport function workoutDuration(\n  intervals: Interval[],\n  mode: WorkoutMode\n): Duration {\n  return Duration(\n    sum(\n      intervals\n        .map((interval) => mode.intervalDuration(interval))\n        .map((d) => d.seconds)\n    )\n  );\n}\n","import moment from \"moment\";\nimport \"moment-duration-format\";\nimport { Distance, Duration } from \"../types/Length\";\nimport { PaceType } from \"../types/PaceType\";\n\nexport const duration = (duration: Duration): string =>\n  moment.duration(duration.seconds, \"seconds\").format(\"mm:ss\", { trim: false });\n\nexport const distance = (distance: Distance): string =>\n  Math.round(distance.meters) + \" m\";\n\nexport const power = (power: number): string => Math.round(power) + \" W\";\n\nexport const wkg = (wkg: number): string => Math.round(wkg * 10) / 10 + \" W/kg\";\n\nexport const percentage = (intensity: number): string =>\n  Math.round(intensity * 100) + \"%\";\n\nexport const shortPaceName = (pace: PaceType): string => {\n  const paces = [\"1M\", \"5K\", \"10K\", \"HM\", \"M\"];\n  return paces[pace] + \" pace\";\n};\n\nexport const runningPace = (speed: number): string => {\n  if (speed === 0) {\n    return \"\";\n  }\n  const secondsPerKm = 1000 / speed;\n  return moment.duration(secondsPerKm, \"seconds\").format(\"m:ss\") + \"/km\";\n};\n","import React from \"react\";\nimport styled from \"styled-components\";\nimport intervalFactory from \"../../interval/intervalFactory\";\nimport BikeMode from \"../../modes/BikeMode\";\nimport RunMode from \"../../modes/RunMode\";\nimport { WorkoutMode } from \"../../modes/WorkoutMode\";\nimport { Interval } from \"../../types/Interval\";\nimport { workoutDistance } from \"../../utils/distance\";\nimport { workoutDuration } from \"../../utils/duration\";\nimport * as format from \"../../utils/format\";\nimport { Column } from \"../Layout/Column\";\nimport { Label } from \"../Label/Label\";\n\n// Displays summary statistics: workout length and TSS\n\ninterface StatsProps {\n  intervals: Interval[];\n  ftp: number;\n  mode: WorkoutMode;\n}\n\nconst Stats: React.FC<StatsProps> = ({ intervals, ftp, mode }) => {\n  return (\n    <>\n      <Col>\n        <Label>Workout Time</Label>\n        <TextInput\n          value={format.duration(workoutDuration(intervals, mode))}\n          disabled\n        />\n      </Col>\n      {mode instanceof RunMode && (\n        <Col>\n          <Label>Workout Distance</Label>\n          <TextInput\n            value={format.distance(workoutDistance(intervals, mode))}\n            disabled\n          />\n        </Col>\n      )}\n      {mode instanceof BikeMode && (\n        <Col>\n          <Label>TSS</Label>\n          <TextInput value={getStressScore(intervals, ftp, mode)} disabled />\n        </Col>\n      )}\n    </>\n  );\n};\n\nconst Col = styled(Column)`\n  max-width: 120px;\n  padding: 0 10px;\n`;\n\nconst TextInput = styled.input`\n  font-size: 20px;\n  border: 1px solid lightgray;\n  text-align: center;\n`;\n\nfunction getStressScore(\n  intervals: Interval[],\n  ftp: number,\n  mode: BikeMode\n): string {\n  // TSS = [(sec x NP x IF)/(FTP x 3600)] x 100\n  let tss = 0;\n\n  intervals.map((interval) => {\n    if (interval.type === \"steady\" && interval.intensity) {\n      const np = interval.intensity * ftp;\n      const iff = interval.intensity;\n\n      tss += mode.intervalDuration(interval).seconds * np * iff;\n    }\n    if (\n      interval.type === \"ramp\" &&\n      interval.startIntensity &&\n      interval.endIntensity\n    ) {\n      const np = ((interval.startIntensity + interval.endIntensity) / 2) * ftp;\n      const iff = (interval.startIntensity + interval.endIntensity) / 2;\n\n      tss += mode.intervalDuration(interval).seconds * np * iff;\n    }\n    if (\n      interval.type === \"repetition\" &&\n      interval.onIntensity &&\n      interval.offIntensity &&\n      interval.repeat &&\n      interval.onLength &&\n      interval.offLength\n    ) {\n      const npOn = interval.onIntensity * ftp;\n      const iffOn = interval.onIntensity;\n\n      const onDuration = mode.intervalDuration(\n        intervalFactory.steady(\n          {\n            length: interval.onLength,\n            intensity: interval.onIntensity,\n          },\n          mode\n        )\n      );\n      tss += onDuration.seconds * interval.repeat * npOn * iffOn;\n\n      const npOff = interval.offIntensity * ftp;\n      const iffOff = interval.offIntensity;\n\n      const offDuration = mode.intervalDuration(\n        intervalFactory.steady(\n          {\n            length: interval.offLength,\n            intensity: interval.offIntensity,\n          },\n          mode\n        )\n      );\n      tss += offDuration.seconds * interval.repeat * npOff * iffOff;\n    }\n    return false;\n  });\n  return ((tss / (ftp * 3600)) * 100).toFixed(0);\n}\n\nexport default Stats;\n","import { faEdit } from \"@fortawesome/free-solid-svg-icons\";\nimport { FontAwesomeIcon } from \"@fortawesome/react-fontawesome\";\nimport React from \"react\";\nimport styled from \"styled-components\";\n\n// Displays workut name, description & author\n\ninterface TitleProps {\n  name: string;\n  description: string;\n  author: string;\n  onClick: () => void;\n}\n\nconst Title: React.FC<TitleProps> = ({\n  name,\n  author,\n  description,\n  onClick,\n}) => {\n  return (\n    <Container onClick={onClick}>\n      <Heading>\n        {name} <StyledIcon icon={faEdit} />\n      </Heading>\n      <div>{description}</div>\n      <Author>{author ? `by ${author}` : \"\"}</Author>\n    </Container>\n  );\n};\n\nconst Container = styled.div`\n  flex: 1;\n  cursor: pointer;\n`;\n\nconst Heading = styled.h1`\n  padding: 10px 0;\n  margin: 0;\n`;\n\nconst StyledIcon = styled(FontAwesomeIcon)`\n  margin-left: 10px;\n  font-size: 21px;\n  color: gray;\n`;\n\nconst Author = styled.p`\n  font-style: italic;\n  margin: 10px 0 0 0;\n`;\n\nexport default Title;\n","export enum ZoneColor {\n  GRAY = \"#807F80\",\n  BLUE = \"#0E90D4\",\n  GREEN = \"#00C46A\",\n  YELLOW = \"#FFCB00\",\n  ORANGE = \"#FF6430\",\n  RED = \"#E90000\",\n  WHITE = \"#FFFFFF\",\n}\n\nexport const Zones = {\n  Z1: {\n    min: 0.1,\n    max: 0.605,\n  },\n  Z2: {\n    min: 0.605,\n    max: 0.763,\n  },\n  Z3: {\n    min: 0.763,\n    max: 0.901,\n  },\n  Z4: {\n    min: 0.901,\n    max: 1.053,\n  },\n  Z5: {\n    min: 1.053,\n    max: 1.194,\n  },\n  Z6: {\n    min: 1.194,\n    max: 2.0,\n  },\n};\n\nexport const ZonesArray = [\n  [Zones.Z1.min, Zones.Z1.max],\n  [Zones.Z2.min, Zones.Z2.max],\n  [Zones.Z3.min, Zones.Z3.max],\n  [Zones.Z4.min, Zones.Z4.max],\n  [Zones.Z5.min, Zones.Z5.max],\n  [Zones.Z6.min, Zones.Z6.max],\n];\n\nexport const zoneColor = (intensity: number): ZoneColor => {\n  if (intensity < Zones.Z1.max) {\n    return ZoneColor.GRAY;\n  } else if (intensity < Zones.Z2.max) {\n    return ZoneColor.BLUE;\n  } else if (intensity < Zones.Z3.max) {\n    return ZoneColor.GREEN;\n  } else if (intensity < Zones.Z4.max) {\n    return ZoneColor.YELLOW;\n  } else if (intensity < Zones.Z5.max) {\n    return ZoneColor.ORANGE;\n  } else {\n    return ZoneColor.RED;\n  }\n};\n","import { createSlice, createSelector, PayloadAction } from \"@reduxjs/toolkit\";\nimport { RunningTimes } from \"../../types/RunningTimes\";\nimport { RootState } from \"../store\";\n\ninterface AthleteState {\n  ftp: number;\n  weight: number;\n  runningTimes: RunningTimes;\n}\n\nconst initialState: AthleteState = {\n  ftp: 200,\n  weight: 75,\n  runningTimes: [0, 0, 0, 0, 0],\n};\n\nconst slice = createSlice({\n  name: \"athlete\",\n  initialState,\n  reducers: {\n    setFtp: (state, action: PayloadAction<number>) => ({\n      ...state,\n      ftp: action.payload,\n    }),\n    setWeight: (state, action: PayloadAction<number>) => ({\n      ...state,\n      weight: action.payload,\n    }),\n    setRunningTimes: (state, action: PayloadAction<number[]>) => ({\n      ...state,\n      runningTimes: action.payload,\n    }),\n  },\n});\n\nexport const reducer = slice.reducer;\nexport const { setFtp, setWeight, setRunningTimes } = slice.actions;\n\nconst selectAthlete = (state: RootState) => state.athlete;\nexport const selectFtp = createSelector(selectAthlete, (a) => a.ftp);\nexport const selectWeight = createSelector(selectAthlete, (a) => a.weight);\nexport const selectRunningTimes = createSelector(\n  selectAthlete,\n  (a) => a.runningTimes\n);\n","import { Zones } from \"../types/Zones\";\nimport { Interval } from \"../types/Interval\";\nimport { Duration } from \"../types/Length\";\nimport { WorkoutMode } from \"../modes/WorkoutMode\";\nimport { move, propEq, update } from \"ramda\";\n\n// Helpers for transforming intervals array\n\nfunction updateById(\n  id: string,\n  transform: (interval: Interval) => Interval,\n  intervals: Interval[]\n): Interval[] {\n  const index = intervals.findIndex(propEq(\"id\", id));\n  if (index === -1) {\n    return intervals;\n  }\n\n  return update(index, transform(intervals[index]), intervals);\n}\n\nexport function updateIntervalDuration(\n  id: string,\n  dDuration: Duration,\n  intervals: Interval[],\n  mode: WorkoutMode\n): Interval[] {\n  return updateById(\n    id,\n    (interval) => {\n      if (interval.type === \"steady\") {\n        const seconds =\n          mode.intervalDuration(interval).seconds + dDuration.seconds;\n        if (seconds > 0) {\n          return { ...interval, length: Duration(seconds) };\n        }\n      }\n      return interval;\n    },\n    intervals\n  );\n}\n\nexport function updateIntervalIntensity(\n  id: string,\n  dIntensity: number,\n  intervals: Interval[]\n): Interval[] {\n  return updateById(\n    id,\n    (interval) => {\n      if (interval.type === \"steady\") {\n        const intensity = interval.intensity + dIntensity;\n        if (intensity > Zones.Z1.min) {\n          return { ...interval, intensity };\n        }\n      }\n      return interval;\n    },\n    intervals\n  );\n}\n\nexport function moveInterval(\n  id: string,\n  direction: -1 | 1,\n  intervals: Interval[]\n): Interval[] {\n  const oldIndex = intervals.findIndex(propEq(\"id\", id));\n  const newIndex = oldIndex + direction;\n\n  if (oldIndex < 0 || newIndex < 0 || newIndex >= intervals.length) {\n    return intervals;\n  }\n\n  return move(oldIndex, newIndex, intervals);\n}\n","import { propEq, update } from \"ramda\";\n\n// Replaces element in array with item having the same id\nexport function replaceById<T extends { id: string }>(\n  item: T,\n  array: T[]\n): T[] {\n  const index = array.findIndex(propEq(\"id\", item.id));\n  return index === -1 ? array : update(index, item, array);\n}\n","import { createSlice, PayloadAction } from \"@reduxjs/toolkit\";\nimport { RootState } from \"../store\";\n\nconst slice = createSlice({\n  name: \"selectedId\",\n  initialState: null as string | null,\n  reducers: {\n    setSelectedId: (state, { payload }: PayloadAction<string>) => payload,\n    clearSelection: () => null,\n  },\n});\n\nexport const reducer = slice.reducer;\nexport const { setSelectedId, clearSelection } = slice.actions;\n\nexport const selectSelectedId = (state: RootState) =>\n  state.selectedId || undefined;\n","import { createSelector } from \"@reduxjs/toolkit\";\nimport createMode from \"../../modes/createMode\";\nimport { selectFtp, selectRunningTimes, selectWeight } from \"./athlete\";\nimport { selectLengthType, selectSportType } from \"./meta\";\n\nexport const selectMode = createSelector(\n  selectSportType,\n  selectFtp,\n  selectWeight,\n  selectRunningTimes,\n  selectLengthType,\n  (sportType, ftp, weight, runningTimes, lengthType) => {\n    return createMode({ sportType, ftp, weight, runningTimes, lengthType });\n  }\n);\n","import { LengthType } from \"../types/LengthType\";\nimport { RunningTimes } from \"../types/RunningTimes\";\nimport { SportType } from \"../types/SportType\";\nimport BikeMode from \"./BikeMode\";\nimport RunMode from \"./RunMode\";\nimport { WorkoutMode } from \"./WorkoutMode\";\n\ninterface CreateModeParams {\n  sportType: SportType;\n  ftp: number;\n  weight: number;\n  runningTimes: RunningTimes;\n  lengthType: LengthType;\n}\n\n// Creates appropriate type of mode for current sport type\nexport default function createMode({\n  sportType,\n  ftp,\n  weight,\n  runningTimes,\n  lengthType,\n}: CreateModeParams): WorkoutMode {\n  switch (sportType) {\n    case \"bike\":\n      return new BikeMode(ftp, weight);\n    case \"run\":\n      return new RunMode(runningTimes, lengthType);\n  }\n}\n","import {\n  createAsyncThunk,\n  createSelector,\n  createSlice,\n  PayloadAction,\n} from \"@reduxjs/toolkit\";\nimport { Interval } from \"../../types/Interval\";\nimport { RootState } from \"../store\";\nimport { clearWorkout, loadWorkout } from \"./workout\";\nimport {\n  updateIntervalIntensity,\n  updateIntervalDuration,\n  moveInterval,\n} from \"../../interval/intervalUtils\";\nimport { replaceById } from \"../../utils/array\";\nimport { clearSelection, selectSelectedId } from \"./selectedId\";\nimport intervalFactory from \"../../interval/intervalFactory\";\nimport { Duration } from \"../../types/Length\";\nimport { selectMode } from \"./mode\";\nimport { PaceType } from \"../../types/PaceType\";\n\nconst initialState: Interval[] = [];\n\nconst slice = createSlice({\n  name: \"intervals\",\n  initialState,\n  reducers: {\n    setIntervals: (state, action: PayloadAction<Interval[]>) => action.payload,\n    addInterval: (state, action: PayloadAction<Interval>) => [\n      ...state,\n      action.payload,\n    ],\n    updateInterval: (intervals, { payload }: PayloadAction<Interval>) =>\n      replaceById(payload, intervals),\n    removeInterval: (\n      intervals,\n      { payload: id }: PayloadAction<string | undefined>\n    ) => intervals.filter((item) => item.id !== id),\n  },\n  extraReducers: (builder) => {\n    builder\n      .addCase(clearWorkout, () => [])\n      .addCase(loadWorkout, (state, { payload }) => payload.intervals);\n  },\n});\n\nexport const reducer = slice.reducer;\nexport const {\n  setIntervals,\n  addInterval,\n  updateInterval,\n  removeInterval,\n} = slice.actions;\n\nexport const removeSelectedInterval = createAsyncThunk(\n  \"intervals/removeSelectedInterval\",\n  (_: void, { getState, dispatch }) => {\n    const selectedId = selectSelectedId(getState() as RootState);\n    dispatch(removeInterval(selectedId));\n    dispatch(clearSelection());\n  }\n);\n\nexport const duplicateSelectedInterval = createAsyncThunk(\n  \"intervals/duplicateSelectedInterval\",\n  (_: void, { getState, dispatch }) => {\n    const interval = selectSelectedInterval(getState() as RootState);\n    if (interval) {\n      dispatch(addInterval(intervalFactory.clone(interval)));\n    }\n    dispatch(clearSelection());\n  }\n);\n\nexport const adjustSelectedIntervalIntensity = createAsyncThunk(\n  \"intervals/adjustSelectedIntervalIntensity\",\n  (amount: number, { getState, dispatch }) => {\n    const selectedId = selectSelectedId(getState() as RootState);\n    if (selectedId) {\n      const intervals = selectIntervals(getState() as RootState);\n      dispatch(\n        setIntervals(updateIntervalIntensity(selectedId, amount, intervals))\n      );\n    }\n  }\n);\n\nexport const adjustSelectedIntervalDuration = createAsyncThunk(\n  \"intervals/adjustSelectedIntervalDuration\",\n  (amount: Duration, { getState, dispatch }) => {\n    const selectedId = selectSelectedId(getState() as RootState);\n    if (selectedId) {\n      const intervals = selectIntervals(getState() as RootState);\n      const mode = selectMode(getState() as RootState);\n      dispatch(\n        setIntervals(\n          updateIntervalDuration(selectedId, amount, intervals, mode)\n        )\n      );\n    }\n  }\n);\n\nexport const moveSelectedInterval = createAsyncThunk(\n  \"intervals/moveSelectedInterval\",\n  (direction: -1 | 1, { getState, dispatch }) => {\n    const selectedId = selectSelectedId(getState() as RootState);\n    if (selectedId) {\n      const intervals = selectIntervals(getState() as RootState);\n      dispatch(setIntervals(moveInterval(selectedId, direction, intervals)));\n    }\n  }\n);\n\nexport const setSelectedIntervalPace = createAsyncThunk(\n  \"intervals/setSelectedIntervalPace\",\n  (pace: PaceType, { getState, dispatch }) => {\n    const interval = selectSelectedInterval(getState() as RootState);\n    if (interval && interval.type === \"steady\") {\n      // TODO: Only steady?\n      dispatch(updateInterval({ ...interval, pace }));\n    }\n  }\n);\n\nexport const selectIntervals = (state: RootState) => state.intervals;\n\nexport const selectSelectedInterval = createSelector(\n  selectSelectedId,\n  selectIntervals,\n  (selectedId, intervals) => {\n    return intervals.find((interval) => interval.id === selectedId);\n  }\n);\n\nexport const selectSelectedIntervalPace = createSelector(\n  selectSelectedInterval,\n  (interval) => {\n    return interval && interval.type !== \"free\" ? interval.pace : undefined;\n  }\n);\n","import { createSlice, PayloadAction } from \"@reduxjs/toolkit\";\nimport { RootState } from \"../store\";\nimport { Instruction } from \"../../types/Instruction\";\nimport { clearWorkout, loadWorkout } from \"./workout\";\nimport { replaceById } from \"../../utils/array\";\n\nconst initialState: Instruction[] = [];\n\nconst slice = createSlice({\n  name: \"instructions\",\n  initialState,\n  reducers: {\n    setInstructions: (state, action: PayloadAction<Instruction[]>) =>\n      action.payload,\n    addInstruction: (state, action: PayloadAction<Instruction>) => [\n      ...state,\n      action.payload,\n    ],\n    updateInstruction: (\n      instructions,\n      { payload }: PayloadAction<Instruction>\n    ) => replaceById(payload, instructions),\n    removeInstruction: (instructions, { payload: id }: PayloadAction<string>) =>\n      instructions.filter((item) => item.id !== id),\n  },\n  extraReducers: (builder) => {\n    builder\n      .addCase(clearWorkout, () => [])\n      .addCase(loadWorkout, (state, { payload }) => payload.instructions);\n  },\n});\n\nexport const reducer = slice.reducer;\nexport const {\n  setInstructions,\n  addInstruction,\n  updateInstruction,\n  removeInstruction,\n} = slice.actions;\n\nexport const selectInstructions = (state: RootState) => state.instructions;\n","function _extends() { _extends = Object.assign || function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; }; return _extends.apply(this, arguments); }\n\nfunction _objectWithoutProperties(source, excluded) { if (source == null) return {}; var target = _objectWithoutPropertiesLoose(source, excluded); var key, i; if (Object.getOwnPropertySymbols) { var sourceSymbolKeys = Object.getOwnPropertySymbols(source); for (i = 0; i < sourceSymbolKeys.length; i++) { key = sourceSymbolKeys[i]; if (excluded.indexOf(key) >= 0) continue; if (!Object.prototype.propertyIsEnumerable.call(source, key)) continue; target[key] = source[key]; } } return target; }\n\nfunction _objectWithoutPropertiesLoose(source, excluded) { if (source == null) return {}; var target = {}; var sourceKeys = Object.keys(source); var key, i; for (i = 0; i < sourceKeys.length; i++) { key = sourceKeys[i]; if (excluded.indexOf(key) >= 0) continue; target[key] = source[key]; } return target; }\n\nimport React from \"react\";\n\nvar _ref2 = /*#__PURE__*/React.createElement(\"title\", null, \"Untitled\");\n\nvar _ref3 = /*#__PURE__*/React.createElement(\"desc\", null, \"Created with Sketch.\");\n\nvar _ref4 = /*#__PURE__*/React.createElement(\"defs\", null);\n\nvar _ref5 = /*#__PURE__*/React.createElement(\"g\", {\n  id: \"Page-1\",\n  stroke: \"none\",\n  strokeWidth: 1,\n  fill: \"none\",\n  fillRule: \"evenodd\"\n}, /*#__PURE__*/React.createElement(\"polygon\", {\n  id: \"Rectangle\",\n  fill: \"#7F7E7F\",\n  points: \"180 65.2104719 240 85.8538747 240 171.707749 180 171.707749\"\n}), /*#__PURE__*/React.createElement(\"polygon\", {\n  id: \"Rectangle\",\n  fill: \"#3F8FCF\",\n  points: \"120 43.4859336 180 65.1100145 180 171.707749 120 171.707749\"\n}), /*#__PURE__*/React.createElement(\"polygon\", {\n  id: \"Rectangle\",\n  fill: \"#58C073\",\n  points: \"60 22.1649934 120 43.597184 120 171.707749 60 171.707749\"\n}), /*#__PURE__*/React.createElement(\"polygon\", {\n  id: \"Rectangle\",\n  fill: \"#F8CC46\",\n  points: \"0 0 60 22.0976562 60 171.707749 0 171.707749\"\n}));\n\nvar SvgWarmdown = function SvgWarmdown(_ref) {\n  var svgRef = _ref.svgRef,\n      title = _ref.title,\n      props = _objectWithoutProperties(_ref, [\"svgRef\", \"title\"]);\n\n  return /*#__PURE__*/React.createElement(\"svg\", _extends({\n    viewBox: \"0 0 240 172\",\n    ref: svgRef\n  }, props), title === undefined ? _ref2 : title ? /*#__PURE__*/React.createElement(\"title\", null, title) : null, _ref3, _ref4, _ref5);\n};\n\nvar ForwardRef = /*#__PURE__*/React.forwardRef(function (props, ref) {\n  return /*#__PURE__*/React.createElement(SvgWarmdown, _extends({\n    svgRef: ref\n  }, props));\n});\nexport default __webpack_public_path__ + \"static/media/warmdown.a32c38a2.svg\";\nexport { ForwardRef as ReactComponent };","function _extends() { _extends = Object.assign || function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; }; return _extends.apply(this, arguments); }\n\nfunction _objectWithoutProperties(source, excluded) { if (source == null) return {}; var target = _objectWithoutPropertiesLoose(source, excluded); var key, i; if (Object.getOwnPropertySymbols) { var sourceSymbolKeys = Object.getOwnPropertySymbols(source); for (i = 0; i < sourceSymbolKeys.length; i++) { key = sourceSymbolKeys[i]; if (excluded.indexOf(key) >= 0) continue; if (!Object.prototype.propertyIsEnumerable.call(source, key)) continue; target[key] = source[key]; } } return target; }\n\nfunction _objectWithoutPropertiesLoose(source, excluded) { if (source == null) return {}; var target = {}; var sourceKeys = Object.keys(source); var key, i; for (i = 0; i < sourceKeys.length; i++) { key = sourceKeys[i]; if (excluded.indexOf(key) >= 0) continue; target[key] = source[key]; } return target; }\n\nimport React from \"react\";\n\nvar _ref2 = /*#__PURE__*/React.createElement(\"title\", null, \"Untitled\");\n\nvar _ref3 = /*#__PURE__*/React.createElement(\"desc\", null, \"Created with Sketch.\");\n\nvar _ref4 = /*#__PURE__*/React.createElement(\"defs\", null);\n\nvar _ref5 = /*#__PURE__*/React.createElement(\"g\", {\n  id: \"Page-1\",\n  stroke: \"none\",\n  strokeWidth: 1,\n  fill: \"none\",\n  fillRule: \"evenodd\"\n}, /*#__PURE__*/React.createElement(\"polygon\", {\n  id: \"Rectangle\",\n  fill: \"#7F7E7F\",\n  points: \"0 85.8538747 60 65.290624 60 171.707749 0 171.707749\"\n}), /*#__PURE__*/React.createElement(\"polygon\", {\n  id: \"Rectangle\",\n  fill: \"#3F8FCF\",\n  points: \"60 65.2906189 120 44 120 171.707749 60 171.707749\"\n}), /*#__PURE__*/React.createElement(\"polygon\", {\n  id: \"Rectangle\",\n  fill: \"#58C073\",\n  points: \"120 44 180 22 180 171.707749 120 171.707749\"\n}), /*#__PURE__*/React.createElement(\"polygon\", {\n  id: \"Rectangle\",\n  fill: \"#F8CC46\",\n  points: \"180 22 240 0 240 171.707749 180 171.707749\"\n}));\n\nvar SvgWarmup = function SvgWarmup(_ref) {\n  var svgRef = _ref.svgRef,\n      title = _ref.title,\n      props = _objectWithoutProperties(_ref, [\"svgRef\", \"title\"]);\n\n  return /*#__PURE__*/React.createElement(\"svg\", _extends({\n    viewBox: \"0 0 240 172\",\n    ref: svgRef\n  }, props), title === undefined ? _ref2 : title ? /*#__PURE__*/React.createElement(\"title\", null, title) : null, _ref3, _ref4, _ref5);\n};\n\nvar ForwardRef = /*#__PURE__*/React.forwardRef(function (props, ref) {\n  return /*#__PURE__*/React.createElement(SvgWarmup, _extends({\n    svgRef: ref\n  }, props));\n});\nexport default __webpack_public_path__ + \"static/media/warmup.edbffcc7.svg\";\nexport { ForwardRef as ReactComponent };","function _extends() { _extends = Object.assign || function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; }; return _extends.apply(this, arguments); }\n\nfunction _objectWithoutProperties(source, excluded) { if (source == null) return {}; var target = _objectWithoutPropertiesLoose(source, excluded); var key, i; if (Object.getOwnPropertySymbols) { var sourceSymbolKeys = Object.getOwnPropertySymbols(source); for (i = 0; i < sourceSymbolKeys.length; i++) { key = sourceSymbolKeys[i]; if (excluded.indexOf(key) >= 0) continue; if (!Object.prototype.propertyIsEnumerable.call(source, key)) continue; target[key] = source[key]; } } return target; }\n\nfunction _objectWithoutPropertiesLoose(source, excluded) { if (source == null) return {}; var target = {}; var sourceKeys = Object.keys(source); var key, i; for (i = 0; i < sourceKeys.length; i++) { key = sourceKeys[i]; if (excluded.indexOf(key) >= 0) continue; target[key] = source[key]; } return target; }\n\nimport React from \"react\";\n\nvar _ref2 = /*#__PURE__*/React.createElement(\"title\", null, \"interval\");\n\nvar _ref3 = /*#__PURE__*/React.createElement(\"desc\", null, \"Created with Sketch.\");\n\nvar _ref4 = /*#__PURE__*/React.createElement(\"defs\", null);\n\nvar _ref5 = /*#__PURE__*/React.createElement(\"g\", {\n  id: \"Page-1\",\n  stroke: \"none\",\n  strokeWidth: 1,\n  fill: \"none\",\n  fillRule: \"evenodd\"\n}, /*#__PURE__*/React.createElement(\"g\", {\n  id: \"interval\"\n}, /*#__PURE__*/React.createElement(\"rect\", {\n  id: \"Rectangle-2\",\n  fill: \"#F8CC46\",\n  x: 0,\n  y: 0,\n  width: 24,\n  height: 170\n}), /*#__PURE__*/React.createElement(\"rect\", {\n  id: \"Rectangle-2\",\n  fill: \"#F8CC46\",\n  x: 166,\n  y: 0,\n  width: 24,\n  height: 170\n}), /*#__PURE__*/React.createElement(\"rect\", {\n  id: \"Rectangle-2\",\n  fill: \"#F8CC46\",\n  x: 83,\n  y: 0,\n  width: 24,\n  height: 170\n}), /*#__PURE__*/React.createElement(\"rect\", {\n  id: \"Rectangle-3\",\n  fill: \"#3F8FCF\",\n  x: 24,\n  y: 63,\n  width: 59,\n  height: 107\n}), /*#__PURE__*/React.createElement(\"rect\", {\n  id: \"Rectangle-3\",\n  fill: \"#3F8FCF\",\n  x: 190,\n  y: 63,\n  width: 59,\n  height: 107\n}), /*#__PURE__*/React.createElement(\"rect\", {\n  id: \"Rectangle-3\",\n  fill: \"#3F8FCF\",\n  x: 107,\n  y: 63,\n  width: 59,\n  height: 107\n})));\n\nvar SvgInterval = function SvgInterval(_ref) {\n  var svgRef = _ref.svgRef,\n      title = _ref.title,\n      props = _objectWithoutProperties(_ref, [\"svgRef\", \"title\"]);\n\n  return /*#__PURE__*/React.createElement(\"svg\", _extends({\n    viewBox: \"0 0 249 170\",\n    ref: svgRef\n  }, props), title === undefined ? _ref2 : title ? /*#__PURE__*/React.createElement(\"title\", null, title) : null, _ref3, _ref4, _ref5);\n};\n\nvar ForwardRef = /*#__PURE__*/React.forwardRef(function (props, ref) {\n  return /*#__PURE__*/React.createElement(SvgInterval, _extends({\n    svgRef: ref\n  }, props));\n});\nexport default __webpack_public_path__ + \"static/media/interval.178113c8.svg\";\nexport { ForwardRef as ReactComponent };","function _extends() { _extends = Object.assign || function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; }; return _extends.apply(this, arguments); }\n\nfunction _objectWithoutProperties(source, excluded) { if (source == null) return {}; var target = _objectWithoutPropertiesLoose(source, excluded); var key, i; if (Object.getOwnPropertySymbols) { var sourceSymbolKeys = Object.getOwnPropertySymbols(source); for (i = 0; i < sourceSymbolKeys.length; i++) { key = sourceSymbolKeys[i]; if (excluded.indexOf(key) >= 0) continue; if (!Object.prototype.propertyIsEnumerable.call(source, key)) continue; target[key] = source[key]; } } return target; }\n\nfunction _objectWithoutPropertiesLoose(source, excluded) { if (source == null) return {}; var target = {}; var sourceKeys = Object.keys(source); var key, i; for (i = 0; i < sourceKeys.length; i++) { key = sourceKeys[i]; if (excluded.indexOf(key) >= 0) continue; target[key] = source[key]; } return target; }\n\nimport React from \"react\";\n\nvar _ref2 = /*#__PURE__*/React.createElement(\"title\", null, \"Rectangle\");\n\nvar _ref3 = /*#__PURE__*/React.createElement(\"desc\", null, \"Created with Sketch.\");\n\nvar _ref4 = /*#__PURE__*/React.createElement(\"defs\", null);\n\nvar _ref5 = /*#__PURE__*/React.createElement(\"g\", {\n  id: \"Page-1\",\n  stroke: \"none\",\n  strokeWidth: 1,\n  fill: \"none\",\n  fillRule: \"evenodd\"\n}, /*#__PURE__*/React.createElement(\"g\", {\n  id: \"warmup\",\n  fillRule: \"nonzero\",\n  fill: \"#F8CC46\"\n}, /*#__PURE__*/React.createElement(\"polygon\", {\n  id: \"Rectangle\",\n  points: \"0 0 40 0 40 121.707749 6.24500451e-16 121.707749\"\n})));\n\nvar SvgSteady = function SvgSteady(_ref) {\n  var svgRef = _ref.svgRef,\n      title = _ref.title,\n      props = _objectWithoutProperties(_ref, [\"svgRef\", \"title\"]);\n\n  return /*#__PURE__*/React.createElement(\"svg\", _extends({\n    viewBox: \"0 0 40 30\",\n    ref: svgRef\n  }, props), title === undefined ? _ref2 : title ? /*#__PURE__*/React.createElement(\"title\", null, title) : null, _ref3, _ref4, _ref5);\n};\n\nvar ForwardRef = /*#__PURE__*/React.forwardRef(function (props, ref) {\n  return /*#__PURE__*/React.createElement(SvgSteady, _extends({\n    svgRef: ref\n  }, props));\n});\nexport default __webpack_public_path__ + \"static/media/steady.7e9a2283.svg\";\nexport { ForwardRef as ReactComponent };","import React from \"react\";\nimport styled from \"styled-components\";\nimport { Label } from \"../Label/Label\";\nimport { Column } from \"../Layout/Column\";\n\n// Displays workut name, description & author\n\ninterface NumberFieldProps {\n  name: string;\n  label: string;\n  value: number;\n  onChange: (value: number) => void;\n}\n\nconst NumberField: React.FC<NumberFieldProps> = ({\n  name,\n  label,\n  value,\n  onChange,\n}) => {\n  return (\n    <Col>\n      <Label htmlFor={name}>{label}</Label>\n      <TextInput\n        type=\"number\"\n        name={name}\n        value={value}\n        onChange={(e) => onChange(parseInt(e.target.value))}\n      />\n    </Col>\n  );\n};\n\nconst TextInput = styled.input`\n  font-size: 20px;\n  border: 1px solid lightgray;\n  text-align: center;\n`;\n\nconst Col = styled(Column)`\n  max-width: 100px;\n`;\n\nexport default NumberField;\n","import styled from \"styled-components\";\n\nconst Button = styled.button`\n  display: inline-block;\n  background-color: white;\n  border: 1px solid lightgray;\n  text-align: center;\n  font-size: 13px;\n  border-radius: 5px;\n  min-width: 50px;\n`;\n\nexport default Button;\n","import React from \"react\";\nimport { FontAwesomeIcon } from \"@fortawesome/react-fontawesome\";\nimport { IconDefinition } from \"@fortawesome/free-solid-svg-icons\";\nimport Button from \"./Button\";\nimport styled from \"styled-components\";\n\ninterface IconButtonProps {\n  icon: IconDefinition;\n  children: string;\n  onClick: () => void;\n}\n\nconst IconButton: React.FC<IconButtonProps> = ({ icon, children, onClick }) => {\n  return (\n    <Button onClick={onClick}>\n      <StyledIcon icon={icon} size=\"lg\" fixedWidth /> {children}\n    </Button>\n  );\n};\n\nconst StyledIcon = styled(FontAwesomeIcon)`\n  display: block;\n  margin: 0 auto;\n`;\n\nexport default IconButton;\n","import Converter from \"xml-js\";\nimport { v4 as uuidv4 } from \"uuid\";\nimport intervalFactory from \"../interval/intervalFactory\";\nimport { createEmptyWorkout, Workout } from \"../types/Workout\";\nimport { Distance, Duration } from \"../types/Length\";\nimport { WorkoutMode } from \"../modes/WorkoutMode\";\n\nexport default function parseWorkoutXml(\n  data: string,\n  mode: WorkoutMode\n): Workout {\n  const workout: Workout = createEmptyWorkout(mode.sportType, mode.lengthType);\n\n  data = data.replace(/<!--(.*?)-->/gm, \"\");\n\n  const workout_file = Converter.xml2js(data).elements[0];\n\n  if (workout_file.name !== \"workout_file\") {\n    throw new Error(\"Invalid ZWO file\");\n  }\n\n  const sportTypeIndex = workout_file.elements.findIndex(\n    (element: { name: string }) => element.name === \"sportType\"\n  );\n  if (sportTypeIndex !== -1 && workout_file.elements[sportTypeIndex].elements) {\n    workout.sportType = workout_file.elements[sportTypeIndex].elements[0].text;\n  }\n\n  const lengthTypeIndex = workout_file.elements.findIndex(\n    (element: { name: string }) => element.name === \"durationType\"\n  );\n  if (\n    lengthTypeIndex !== -1 &&\n    workout_file.elements[lengthTypeIndex].elements\n  ) {\n    workout.lengthType =\n      workout_file.elements[lengthTypeIndex].elements[0].text;\n  }\n\n  const authorIndex = workout_file.elements.findIndex(\n    (element: { name: string }) => element.name === \"author\"\n  );\n  if (authorIndex !== -1 && workout_file.elements[authorIndex].elements) {\n    workout.author = workout_file.elements[authorIndex].elements[0].text;\n  }\n\n  const nameIndex = workout_file.elements.findIndex(\n    (element: { name: string }) => element.name === \"name\"\n  );\n  if (nameIndex !== -1 && workout_file.elements[nameIndex].elements) {\n    workout.name = workout_file.elements[nameIndex].elements[0].text;\n  }\n\n  const descriptionIndex = workout_file.elements.findIndex(\n    (element: { name: string }) => element.name === \"description\"\n  );\n  if (\n    descriptionIndex !== -1 &&\n    workout_file.elements[descriptionIndex].elements\n  ) {\n    workout.description =\n      workout_file.elements[descriptionIndex].elements[0].text;\n  }\n\n  const tagsIndex = workout_file.elements.findIndex(\n    (element: { name: string }) => element.name === \"tags\"\n  );\n  if (tagsIndex !== -1 && workout_file.elements[tagsIndex].elements) {\n    workout.tags = workout_file.elements[tagsIndex].elements.map(\n      (el: { attributes: { name: string } }) => el.attributes.name\n    );\n  }\n\n  const workoutEl = workout_file.elements.find(\n    (element: { name: string }) =>\n      element.name === \"workout\" && \"elements\" in element\n  );\n  if (!workoutEl) {\n    return workout;\n  }\n\n  // either meters (distance) or seconds (duration)\n  let totalLength = 0;\n\n  const readLength = (x: number) =>\n    workout.lengthType === \"time\" ? Duration(x) : Distance(x);\n\n  workoutEl.elements.map(\n    (w: {\n      name: string;\n      attributes: {\n        Power: any;\n        PowerLow: string;\n        Duration: string;\n        PowerHigh: string;\n        Cadence?: string;\n        CadenceResting?: string;\n        Repeat: string;\n        OnDuration: string;\n        OffDuration: string;\n        OnPower: string;\n        OffPower: string;\n        pace: string;\n      };\n      elements: any;\n    }) => {\n      let length = parseFloat(w.attributes.Duration);\n\n      if (w.name === \"SteadyState\") {\n        workout.intervals.push(\n          intervalFactory.steady(\n            {\n              intensity: parseFloat(\n                w.attributes.Power || w.attributes.PowerLow\n              ),\n              length: readLength(parseFloat(w.attributes.Duration)),\n              cadence: w.attributes.Cadence\n                ? parseFloat(w.attributes.Cadence)\n                : undefined,\n              pace: parseInt(w.attributes.pace || \"0\"),\n            },\n            mode\n          )\n        );\n      }\n      if (w.name === \"Ramp\" || w.name === \"Warmup\" || w.name === \"Cooldown\") {\n        workout.intervals.push(\n          intervalFactory.ramp(\n            {\n              startIntensity: parseFloat(w.attributes.PowerLow),\n              endIntensity: parseFloat(w.attributes.PowerHigh),\n              length: readLength(parseFloat(w.attributes.Duration)),\n              pace: parseInt(w.attributes.pace || \"0\"),\n              cadence: w.attributes.Cadence\n                ? parseFloat(w.attributes.Cadence)\n                : undefined,\n            },\n            mode\n          )\n        );\n      }\n      if (w.name === \"IntervalsT\") {\n        workout.intervals.push(\n          intervalFactory.repetition(\n            {\n              repeat: parseFloat(w.attributes.Repeat),\n              onLength: readLength(parseFloat(w.attributes.OnDuration)),\n              offLength: readLength(parseFloat(w.attributes.OffDuration)),\n              onIntensity: parseFloat(w.attributes.OnPower),\n              offIntensity: parseFloat(w.attributes.OffPower),\n              onCadence: w.attributes.Cadence\n                ? parseFloat(w.attributes.Cadence)\n                : undefined,\n              offCadence: w.attributes.CadenceResting\n                ? parseFloat(w.attributes.CadenceResting)\n                : undefined,\n              pace: parseInt(w.attributes.pace || \"0\"),\n            },\n            mode\n          )\n        );\n        length =\n          (parseFloat(w.attributes.OnDuration) +\n            parseFloat(w.attributes.OffDuration)) *\n          parseFloat(w.attributes.Repeat);\n      }\n      if (w.name === \"FreeRide\") {\n        workout.intervals.push(\n          intervalFactory.free(\n            {\n              length: readLength(parseFloat(w.attributes.Duration)),\n              cadence: w.attributes.Cadence\n                ? parseFloat(w.attributes.Cadence)\n                : undefined,\n            },\n            mode\n          )\n        );\n      }\n\n      // check for instructions\n      const textElements = w.elements;\n      if (textElements && textElements.length > 0) {\n        textElements.forEach(\n          (t: {\n            name: string;\n            attributes: { message: string | undefined; timeoffset: string };\n          }) => {\n            if (t.name.toLowerCase() === \"textevent\")\n              workout.instructions.push({\n                text: t.attributes.message || \"\",\n                offset: readLength(\n                  totalLength + parseFloat(t.attributes.timeoffset)\n                ),\n                id: uuidv4(),\n              });\n          }\n        );\n      }\n\n      totalLength = totalLength + length;\n      // map functions expect return value\n      return false;\n    }\n  );\n\n  return workout;\n}\n","import { SportType } from \"./SportType\";\nimport { Instruction } from \"./Instruction\";\nimport { Interval } from \"./Interval\";\nimport { LengthType } from \"./LengthType\";\n\nexport interface Workout {\n  author: string;\n  name: string;\n  description: string;\n  sportType: SportType;\n  lengthType: LengthType;\n  tags: string[];\n  intervals: Array<Interval>;\n  instructions: Array<Instruction>;\n}\n\nexport function createEmptyWorkout(\n  sportType: SportType,\n  lengthType: LengthType\n): Workout {\n  return {\n    author: \"\",\n    name: \"\",\n    description: \"\",\n    sportType: sportType,\n    lengthType: lengthType,\n    tags: [],\n    intervals: [],\n    instructions: [],\n  };\n}\n","import React from \"react\";\nimport { faUpload } from \"@fortawesome/free-solid-svg-icons\";\nimport IconButton from \"../Button/IconButton\";\nimport parseWorkoutXml from \"../../xml/parseWorkoutXml\";\nimport { WorkoutMode } from \"../../modes/WorkoutMode\";\nimport { Workout } from \"../../types/Workout\";\n\ninterface UploadButtonProps {\n  mode: WorkoutMode;\n  onUpload: (workout: Workout) => void;\n}\n\nconst UploadButton: React.FC<UploadButtonProps> = ({ mode, onUpload }) => {\n  async function handleUpload(file: File) {\n    try {\n      onUpload(parseWorkoutXml(await file.text(), mode));\n    } catch (e) {\n      console.error(e);\n    }\n  }\n\n  return (\n    <>\n      <input\n        accept=\".xml,.zwo\"\n        id=\"contained-button-file\"\n        type=\"file\"\n        style={{ display: \"none\" }}\n        onChange={(e) => handleUpload(e.target.files![0])}\n      />\n      <IconButton\n        icon={faUpload}\n        onClick={() =>\n          document.getElementById(\"contained-button-file\")!.click()\n        }\n      >\n        Upload\n      </IconButton>\n    </>\n  );\n};\n\nexport default UploadButton;\n","import styled from \"styled-components\";\nimport Button from \"./Button\";\n\nconst ColorButton = styled(Button)<{ color: string }>`\n  color: white;\n  width: 50px;\n  height: 50px;\n  background-color: ${(props) => props.color};\n`;\n\nexport default ColorButton;\n","import React from \"react\";\nimport { connect } from \"react-redux\";\nimport { faDownload } from \"@fortawesome/free-solid-svg-icons\";\nimport createWorkoutXml from \"../../xml/createWorkoutXml\";\nimport IconButton from \"../Button/IconButton\";\nimport {\n  selectAuthor,\n  selectDescription,\n  selectName,\n  selectTags,\n  selectSportType,\n  selectLengthType,\n} from \"../../rdx/state/meta\";\nimport { RootState } from \"../../rdx/store\";\nimport { selectIntervals } from \"../../rdx/state/intervals\";\nimport { selectInstructions } from \"../../rdx/state/instructions\";\nimport { selectMode } from \"../../rdx/state/mode\";\nimport { ConnectedProps } from \"../../types/ConnectedProps\";\n\nconst mapStateToProps = (state: RootState) => ({\n  name: selectName(state),\n  author: selectAuthor(state),\n  description: selectDescription(state),\n  tags: selectTags(state),\n  sportType: selectSportType(state),\n  lengthType: selectLengthType(state),\n  intervals: selectIntervals(state),\n  instructions: selectInstructions(state),\n  mode: selectMode(state),\n});\n\ntype DownloadButtonProps = ConnectedProps<typeof mapStateToProps>;\n\nconst DownloadButton = (props: DownloadButtonProps) => {\n  function createZwoFile() {\n    const xml = createWorkoutXml(\n      {\n        name: props.name,\n        author: props.author,\n        description: props.description,\n        tags: props.tags,\n        sportType: props.sportType,\n        lengthType: props.lengthType,\n        intervals: props.intervals,\n        instructions: props.instructions,\n      },\n      props.mode\n    );\n\n    return new Blob([xml], { type: \"application/xml\" });\n  }\n\n  function downloadWorkout() {\n    const tempFile = createZwoFile();\n    const url = window.URL.createObjectURL(tempFile);\n\n    var a = document.createElement(\"a\");\n    document.body.appendChild(a);\n    a.style.display = \"none\";\n    a.href = url;\n    a.download = `workout.zwo`;\n    a.click();\n    window.URL.revokeObjectURL(url);\n  }\n\n  return (\n    <IconButton icon={faDownload} onClick={downloadWorkout}>\n      Download\n    </IconButton>\n  );\n};\n\nexport default connect(mapStateToProps)(DownloadButton);\n","import Builder from \"xmlbuilder\";\nimport RunMode from \"../modes/RunMode\";\nimport { WorkoutMode } from \"../modes/WorkoutMode\";\nimport { Instruction } from \"../types/Instruction\";\nimport { Interval } from \"../types/Interval\";\nimport { isDuration, Length } from \"../types/Length\";\nimport { Workout } from \"../types/Workout\";\n\nexport default function createWorkoutXml(\n  {\n    author,\n    name,\n    description,\n    sportType,\n    lengthType,\n    tags,\n    intervals,\n    instructions,\n  }: Workout,\n  mode: WorkoutMode\n): string {\n  var totalLength = 0;\n\n  let xml = Builder.begin()\n    .ele(\"workout_file\")\n    .ele(\"author\", author)\n    .up()\n    .ele(\"name\", name)\n    .up()\n    .ele(\"description\", description)\n    .up()\n    .ele(\"sportType\", sportType)\n    .up()\n    .ele(\"durationType\", lengthType)\n    .up()\n    .ele(\"tags\");\n\n  tags.forEach((tag: string) => {\n    var t: Builder.XMLNode;\n    t = Builder.create(\"tag\").att(\"name\", tag);\n    xml.importDocument(t);\n  });\n\n  xml = xml.up().ele(\"workout\");\n\n  const writeLength = (len: Length): number =>\n    isDuration(len) ? len.seconds : len.meters;\n\n  intervals.forEach((interval, index) => {\n    var segment: Builder.XMLNode;\n    var ramp;\n\n    if (interval.type === \"steady\") {\n      segment = Builder.create(\"SteadyState\")\n        .att(\"Duration\", writeLength(interval.length))\n        .att(\"Power\", interval.intensity)\n        .att(\"pace\", interval.pace);\n\n      // add cadence if not zero\n      interval.cadence !== 0 && segment.att(\"Cadence\", interval.cadence);\n    } else if (\n      interval.type === \"ramp\" &&\n      interval.startIntensity &&\n      interval.endIntensity\n    ) {\n      // index 0 is warmup\n      // last index is cooldown\n      // everything else is ramp\n\n      ramp = \"Ramp\";\n      if (index === 0) ramp = \"Warmup\";\n      if (index === intervals.length - 1) ramp = \"Cooldown\";\n\n      if (interval.startIntensity < interval.endIntensity) {\n        // warmup\n        segment = Builder.create(ramp)\n          .att(\"Duration\", writeLength(interval.length))\n          .att(\"PowerLow\", interval.startIntensity)\n          .att(\"PowerHigh\", interval.endIntensity)\n          .att(\"pace\", interval.pace);\n        interval.cadence !== undefined &&\n          segment.att(\"Cadence\", interval.cadence);\n      } else {\n        // cooldown\n        segment = Builder.create(ramp)\n          .att(\"Duration\", writeLength(interval.length))\n          .att(\"PowerLow\", interval.startIntensity) // these 2 values are inverted\n          .att(\"PowerHigh\", interval.endIntensity) // looks like a bug on zwift editor\n          .att(\"pace\", interval.pace);\n        interval.cadence !== undefined &&\n          segment.att(\"Cadence\", interval.cadence);\n      }\n    } else if (interval.type === \"repetition\") {\n      // <IntervalsT Repeat=\"5\" OnDuration=\"60\" OffDuration=\"300\" OnPower=\"0.8844353\" OffPower=\"0.51775455\" pace=\"0\"/>\n      segment = Builder.create(\"IntervalsT\")\n        .att(\"Repeat\", interval.repeat)\n        .att(\"OnDuration\", writeLength(interval.onLength))\n        .att(\"OffDuration\", writeLength(interval.offLength))\n        .att(\"OnPower\", interval.onIntensity)\n        .att(\"OffPower\", interval.offIntensity)\n        .att(\"pace\", interval.pace);\n      interval.onCadence !== undefined &&\n        segment.att(\"Cadence\", interval.onCadence);\n      interval.offCadence !== undefined &&\n        segment.att(\"CadenceResting\", interval.offCadence);\n    } else {\n      // free ride\n      segment = Builder.create(\"FreeRide\")\n        .att(\"Duration\", writeLength(interval.length))\n        .att(\"FlatRoad\", 0); // Without this, Zwift will adjust resistance when gradient changes\n      interval.cadence !== undefined &&\n        segment.att(\"Cadence\", interval.cadence);\n    }\n\n    const intervalLength = (interval: Interval): number =>\n      mode instanceof RunMode && mode.lengthType === \"distance\"\n        ? mode.intervalDistance(interval).meters\n        : mode.intervalDuration(interval).seconds;\n\n    const instructionInsideInterval = (instruction: Instruction): boolean =>\n      writeLength(instruction.offset) >= totalLength &&\n      writeLength(instruction.offset) < totalLength + intervalLength(interval);\n\n    // add instructions if present\n    instructions.filter(instructionInsideInterval).forEach((i) => {\n      segment.ele(\"textevent\", {\n        timeoffset: writeLength(i.offset) - totalLength,\n        message: i.text,\n      });\n    });\n\n    xml.importDocument(segment);\n\n    totalLength += intervalLength(interval);\n  });\n\n  return xml.end({ pretty: true });\n}\n","import React from \"react\";\nimport styled from \"styled-components\";\nimport Button from \"./Button\";\n\ntype SvgComponent = React.FunctionComponent<\n  React.SVGProps<SVGSVGElement> & { title?: string }\n>;\n\ninterface SvgButtonProps {\n  svg: SvgComponent;\n  onClick: () => void;\n}\n\nconst SvgButton: React.FC<SvgButtonProps> = ({ svg, children, onClick }) => {\n  return (\n    <Button onClick={onClick}>\n      <StyledSvg as={svg} /> {children}\n    </Button>\n  );\n};\n\nconst StyledSvg = styled.svg`\n  width: 30px;\n  margin: 0 auto;\n  display: block;\n  margin: 0 auto;\n`;\n\nexport default SvgButton;\n","import React from \"react\";\nimport { connect } from \"react-redux\";\nimport { ZoneColor, Zones } from \"../../types/Zones\";\nimport {\n  faFile,\n  faComment,\n  faBicycle,\n  faRunning,\n} from \"@fortawesome/free-solid-svg-icons\";\nimport { ReactComponent as WarmdownLogo } from \"../../assets/warmdown.svg\";\nimport { ReactComponent as WarmupLogo } from \"../../assets/warmup.svg\";\nimport { ReactComponent as IntervalLogo } from \"../../assets/interval.svg\";\nimport { ReactComponent as SteadyLogo } from \"../../assets/steady.svg\";\nimport { createInstruction } from \"../../types/Instruction\";\nimport intervalFactory from \"../../interval/intervalFactory\";\nimport NumberField from \"./NumberField\";\nimport UploadButton from \"./UploadButton\";\nimport IconButton from \"../Button/IconButton\";\nimport ColorButton from \"../Button/ColorButton\";\nimport { selectSportType } from \"../../rdx/state/meta\";\nimport { RootState } from \"../../rdx/store\";\nimport {\n  selectFtp,\n  selectWeight,\n  setFtp,\n  setWeight,\n} from \"../../rdx/state/athlete\";\nimport { addInterval } from \"../../rdx/state/intervals\";\nimport { addInstruction } from \"../../rdx/state/instructions\";\nimport { selectMode } from \"../../rdx/state/mode\";\nimport { clearWorkout, loadWorkout } from \"../../rdx/state/workout\";\nimport DownloadButton from \"./DownloadButton\";\nimport styled from \"styled-components\";\nimport { ConnectedProps } from \"../../types/ConnectedProps\";\nimport SvgButton from \"../Button/SvgButton\";\n\nconst mapStateToProps = (state: RootState) => ({\n  sportType: selectSportType(state),\n  ftp: selectFtp(state),\n  weight: selectWeight(state),\n  mode: selectMode(state),\n});\n\nconst mapDispatchToProps = {\n  setFtp,\n  setWeight,\n  addInterval,\n  addInstruction,\n  clearWorkout,\n  loadWorkout,\n};\n\ntype ToolbarProps = ConnectedProps<\n  typeof mapStateToProps,\n  typeof mapDispatchToProps\n>;\n\nconst Toolbar = ({\n  mode,\n  addInterval,\n  addInstruction,\n  ...props\n}: ToolbarProps) => {\n  return (\n    <Container>\n      {props.sportType === \"bike\" ? (\n        <div>\n          <ColorButton\n            color={ZoneColor.GRAY}\n            onClick={() =>\n              addInterval(intervalFactory.steady({ intensity: 0.5 }, mode))\n            }\n          >\n            Z1\n          </ColorButton>\n          <ColorButton\n            color={ZoneColor.BLUE}\n            onClick={() =>\n              addInterval(\n                intervalFactory.steady({ intensity: Zones.Z2.min }, mode)\n              )\n            }\n          >\n            Z2\n          </ColorButton>\n          <ColorButton\n            color={ZoneColor.GREEN}\n            onClick={() =>\n              addInterval(\n                intervalFactory.steady({ intensity: Zones.Z3.min }, mode)\n              )\n            }\n          >\n            Z3\n          </ColorButton>\n          <ColorButton\n            color={ZoneColor.YELLOW}\n            onClick={() =>\n              addInterval(\n                intervalFactory.steady({ intensity: Zones.Z4.min }, mode)\n              )\n            }\n          >\n            Z4\n          </ColorButton>\n          <ColorButton\n            color={ZoneColor.ORANGE}\n            onClick={() =>\n              addInterval(\n                intervalFactory.steady({ intensity: Zones.Z5.min }, mode)\n              )\n            }\n          >\n            Z5\n          </ColorButton>\n          <ColorButton\n            color={ZoneColor.RED}\n            onClick={() =>\n              addInterval(\n                intervalFactory.steady({ intensity: Zones.Z6.min }, mode)\n              )\n            }\n          >\n            Z6\n          </ColorButton>\n        </div>\n      ) : (\n        <SvgButton\n          svg={SteadyLogo}\n          onClick={() => addInterval(intervalFactory.steady({}, mode))}\n        >\n          Steady Pace\n        </SvgButton>\n      )}\n\n      <SvgButton\n        svg={WarmupLogo}\n        onClick={() =>\n          addInterval(\n            intervalFactory.ramp(\n              { startIntensity: 0.25, endIntensity: 0.75 },\n              mode\n            )\n          )\n        }\n      >\n        Warm up\n      </SvgButton>\n      <SvgButton\n        svg={WarmdownLogo}\n        onClick={() =>\n          addInterval(\n            intervalFactory.ramp(\n              { startIntensity: 0.75, endIntensity: 0.25 },\n              mode\n            )\n          )\n        }\n      >\n        Cool down\n      </SvgButton>\n      <SvgButton\n        svg={IntervalLogo}\n        onClick={() => addInterval(intervalFactory.repetition({}, mode))}\n      >\n        Interval\n      </SvgButton>\n      <IconButton\n        icon={props.sportType === \"bike\" ? faBicycle : faRunning}\n        onClick={() => addInterval(intervalFactory.free({}, mode))}\n      >\n        {props.sportType === \"bike\" ? \"Free Ride\" : \"Free Run\"}\n      </IconButton>\n      <IconButton\n        icon={faComment}\n        onClick={() => addInstruction(createInstruction({}, mode))}\n      >\n        Text Event\n      </IconButton>\n      {props.sportType === \"bike\" && (\n        <NumberField\n          name=\"ftp\"\n          label={\"FTP (W)\"}\n          value={props.ftp}\n          onChange={props.setFtp}\n        />\n      )}\n      {props.sportType === \"bike\" && (\n        <NumberField\n          name=\"weight\"\n          label={\"Body Weight (kg)\"}\n          value={props.weight}\n          onChange={props.setWeight}\n        />\n      )}\n      <IconButton\n        icon={faFile}\n        onClick={() => {\n          if (window.confirm(\"Are you sure you want to create a new workout?\"))\n            props.clearWorkout();\n        }}\n      >\n        New\n      </IconButton>\n      <DownloadButton />\n      <UploadButton mode={mode} onUpload={props.loadWorkout} />\n    </Container>\n  );\n};\n\nconst Container = styled.div`\n  display: flex;\n  flex-direction: row;\n  flex-wrap: wrap;\n  margin: 10px auto;\n  padding: 20px;\n  background-color: white;\n\n  -webkit-box-shadow: 0px 0px 27px -9px rgba(0, 0, 0, 0.35);\n  -moz-box-shadow: 0px 0px 27px -9px rgba(0, 0, 0, 0.35);\n  box-shadow: 0px 0px 27px -9px rgba(0, 0, 0, 0.35);\n  border-radius: 5px;\n`;\n\nexport default connect(mapStateToProps, mapDispatchToProps)(Toolbar);\n","import { v4 as uuidv4 } from \"uuid\";\nimport { WorkoutMode } from \"../modes/WorkoutMode\";\nimport { Distance, Duration, Length } from \"./Length\";\n\nexport interface Instruction {\n  id: string;\n  text: string;\n  offset: Length;\n}\n\nexport function createInstruction(\n  fields: Partial<Instruction>,\n  mode: WorkoutMode\n): Instruction {\n  return {\n    id: uuidv4(),\n    text: \"\",\n    offset: mode.lengthType === \"time\" ? Duration(0) : Distance(0),\n    ...fields,\n  };\n}\n","import React, { useState } from \"react\";\nimport { FontAwesomeIcon } from \"@fortawesome/react-fontawesome\";\nimport { faBolt, faClock, faRuler } from \"@fortawesome/free-solid-svg-icons\";\nimport styled from \"styled-components\";\nimport {\n  FreeInterval,\n  RampInterval,\n  SteadyInterval,\n} from \"../../types/Interval\";\nimport { WorkoutMode } from \"../../modes/WorkoutMode\";\nimport BikeMode from \"../../modes/BikeMode\";\nimport RunMode from \"../../modes/RunMode\";\nimport * as format from \"../../utils/format\";\nimport cadenceImage from \"../../assets/cadence.png\";\n\ninterface TooltipProps {\n  interval: SteadyInterval | RampInterval | FreeInterval;\n  mode: WorkoutMode;\n  onCadenceChange: (cadence: number | undefined) => void;\n}\n\nconst Tooltip = ({ mode, ...props }: TooltipProps) => {\n  return (\n    <TooltipContainer>\n      <div>\n        <FontAwesomeIcon icon={faClock} fixedWidth />{\" \"}\n        {format.duration(mode.intervalDuration(props.interval))}\n      </div>\n      {mode instanceof BikeMode ? (\n        <BikeData mode={mode} {...props} />\n      ) : (\n        <RunData mode={mode} {...props} />\n      )}\n    </TooltipContainer>\n  );\n};\n\nconst TooltipContainer = styled.div`\n  position: absolute;\n  z-index: 100;\n  top: -95px;\n  left: 0;\n  color: white;\n  background-color: rgba(0, 0, 0, 0.7);\n  width: 150px;\n  border-radius: 5px;\n  margin: 5px 0;\n  font-size: 14px;\n  padding: 5px;\n`;\n\nfunction BikeData({\n  interval,\n  mode,\n  onCadenceChange,\n}: TooltipProps & { mode: BikeMode }) {\n  return (\n    <>\n      {interval.type === \"steady\" && (\n        <>\n          <div>\n            <FontAwesomeIcon icon={faBolt} fixedWidth />{\" \"}\n            {format.power(mode.power(interval.intensity))}\n          </div>\n          <div>\n            {format.wkg(mode.wkg(interval.intensity))} &middot;{\" \"}\n            {format.percentage(interval.intensity)} FTP\n          </div>\n        </>\n      )}\n      {interval.type === \"ramp\" && (\n        <>\n          <div>\n            <FontAwesomeIcon icon={faBolt} fixedWidth />{\" \"}\n            {format.power(mode.power(interval.startIntensity))} -{\" \"}\n            {format.power(mode.power(interval.endIntensity))}\n          </div>\n          <div>\n            {format.percentage(interval.startIntensity)} -{\" \"}\n            {format.percentage(interval.endIntensity)} FTP\n          </div>\n        </>\n      )}\n      <CadenceItem cadence={interval.cadence} onChange={onCadenceChange} />\n    </>\n  );\n}\n\ntype CadenceItemProps = {\n  cadence?: number;\n  onChange: (v: number | undefined) => void;\n};\n\nconst CadenceItem: React.FC<CadenceItemProps> = ({ cadence, onChange }) => {\n  const [hover, setHover] = useState(false);\n  const [focus, setFocus] = useState(false);\n\n  return (\n    <CadenceRow\n      onMouseOver={() => setHover(true)}\n      onMouseOut={() => setHover(false)}\n    >\n      <CadenceLabel>\n        <img src={cadenceImage} width=\"16\" alt=\"Cadence\" />\n      </CadenceLabel>\n      {hover || focus ? (\n        <CadenceInput\n          cadence={cadence}\n          onCadenceChange={onChange}\n          onFocus={() => setFocus(true)}\n          onBlur={() => setFocus(false)}\n        />\n      ) : (\n        <CadenceValue>{cadence ? cadence + \" rpm\" : \"—\"}</CadenceValue>\n      )}\n    </CadenceRow>\n  );\n};\n\nfunction RunData({ interval, mode }: TooltipProps & { mode: RunMode }) {\n  return (\n    <>\n      <div>\n        <FontAwesomeIcon icon={faRuler} fixedWidth />{\" \"}\n        {format.distance(mode.intervalDistance(interval))}\n      </div>\n      {interval.type === \"steady\" && (\n        <>\n          <div>\n            {format.percentage(interval.intensity)}{\" \"}\n            {format.shortPaceName(interval.pace)}\n          </div>\n          <div>\n            {format.runningPace(mode.speed(interval.intensity, interval.pace))}\n          </div>\n        </>\n      )}\n      {interval.type === \"ramp\" && (\n        <>\n          <div>\n            {format.percentage(interval.startIntensity)} to{\" \"}\n            {format.percentage(interval.endIntensity)}{\" \"}\n            {format.shortPaceName(interval.pace)}\n          </div>\n          <div>\n            {format.runningPace(\n              mode.speed(interval.startIntensity, interval.pace)\n            )}{\" \"}\n            to{\" \"}\n            {format.runningPace(\n              mode.speed(interval.endIntensity, interval.pace)\n            )}\n          </div>\n        </>\n      )}\n    </>\n  );\n}\n\nconst CadenceRow = styled.div`\n  display: flex;\n`;\n\nconst CadenceLabel = styled.label`\n  font-size: 14px;\n  padding-right: 5px;\n`;\n\ntype CadenceInputProps = {\n  cadence?: number;\n  onCadenceChange: (v: number | undefined) => void;\n};\n\nconst CadenceInput = styled.input.attrs<CadenceInputProps>((props) => ({\n  type: \"number\",\n  min: \"40\",\n  max: \"150\",\n  step: \"5\",\n  value: props.cadence || \"\",\n  onChange: (e: React.ChangeEvent<HTMLInputElement>) => {\n    props.onCadenceChange(\n      e.target.value ? parseInt(e.target.value) : undefined\n    );\n  },\n  onClick: (e: React.MouseEvent<HTMLInputElement>) => {\n    e.stopPropagation();\n  },\n}))<CadenceInputProps>`\n  background-color: rgba(255, 255, 255, 0.1);\n  color: white;\n  border: 0;\n  border-bottom: 0px solid white;\n  font-size: 14px;\n  min-width: 1px;\n  flex: 1;\n`;\n\nconst CadenceValue = styled.span`\n  flex: 1;\n  display: inline-block;\n  font-size: 14px;\n  height: 19px;\n`;\n\nexport default Tooltip;\n","import React, { useState } from \"react\";\nimport styled from \"styled-components\";\nimport { Resizable } from \"re-resizable\";\nimport \"moment-duration-format\";\nimport Tooltip from \"../Tooltip/Tooltip\";\nimport { FreeInterval } from \"../../types/Interval\";\nimport { durationMultiplier } from \"./multipliers\";\nimport { WorkoutMode } from \"../../modes/WorkoutMode\";\nimport freerideSvg from \"../../assets/freeride.svg\";\n\ninterface FreeBarProps {\n  interval: FreeInterval;\n  mode: WorkoutMode;\n  onChange: (interval: FreeInterval) => void;\n  onClick: (id: string) => void;\n  selected: boolean;\n}\n\nconst FreeBar = ({ interval, mode, ...props }: FreeBarProps) => {\n  const [width, setWidth] = useState(mode.lengthToWidth(interval.length));\n\n  const [showTooltip, setShowTooltip] = useState(false);\n\n  const handleCadenceChange = (cadence: number | undefined) => {\n    props.onChange({ ...interval, cadence });\n  };\n\n  // standard height\n  const height = 100;\n\n  const handleResizeStop = (dWidth: number) => {\n    setWidth(width + dWidth);\n    notifyChange(dWidth);\n  };\n\n  const notifyChange = (dWidth: number) => {\n    props.onChange({ ...interval, length: mode.widthToLength(width + dWidth) });\n  };\n\n  return (\n    <Container\n      onMouseEnter={() => setShowTooltip(true)}\n      onMouseLeave={() => setShowTooltip(false)}\n      style={props.selected ? { zIndex: 1 } : {}}\n      onClick={() => props.onClick(interval.id)}\n    >\n      {(props.selected || showTooltip) && (\n        <Tooltip\n          interval={interval}\n          mode={mode}\n          onCadenceChange={(cadence) => handleCadenceChange(cadence)}\n        />\n      )}\n      <ResizableFreeBar\n        size={{\n          width: mode.lengthToWidth(interval.length),\n          height: height,\n        }}\n        minWidth={durationMultiplier}\n        minHeight={height}\n        maxHeight={height}\n        enable={{ right: true }}\n        grid={[1, 1]}\n        onResizeStop={(e, direction, ref, d) => handleResizeStop(d.width)}\n        onResize={(e, direction, ref, d) => notifyChange(d.width)}\n      ></ResizableFreeBar>\n    </Container>\n  );\n};\n\nconst Container = styled.div`\n  position: relative;\n`;\n\nconst ResizableFreeBar = styled(Resizable)`\n  border: 1px solid white;\n  background-image: url(\"${freerideSvg}\");\n`;\n\nexport default FreeBar;\n","import React, { useState, useEffect } from \"react\";\nimport styled from \"styled-components\";\nimport { zoneColor, Zones } from \"../../types/Zones\";\nimport { Resizable } from \"re-resizable\";\nimport Tooltip from \"../Tooltip/Tooltip\";\nimport { SteadyInterval } from \"../../types/Interval\";\nimport { intensityMultiplier } from \"./multipliers\";\nimport { WorkoutMode } from \"../../modes/WorkoutMode\";\nimport cadenceImage from \"../../assets/cadence.png\";\n\ninterface SteadyBarProps {\n  interval: SteadyInterval;\n  mode: WorkoutMode;\n  onChange: (interval: SteadyInterval) => void;\n  onClick: (id: string) => void;\n  selected: boolean;\n  showTooltip: boolean;\n}\n\nconst SteadyBar = ({ interval, mode, ...props }: SteadyBarProps) => {\n  const style = {\n    backgroundColor: zoneColor(interval.intensity),\n  };\n\n  const [width, setWidth] = useState(mode.lengthToWidth(interval.length));\n\n  const [height, setHeight] = useState(\n    mode.intensityToHeight(interval.intensity)\n  );\n\n  const [showTooltip, setShowTooltip] = useState(false);\n\n  const [selected, setSelected] = useState(props.selected);\n\n  useEffect(() => {\n    setSelected(props.selected);\n  }, [props.selected]);\n\n  const handleCadenceChange = (cadence: number | undefined) => {\n    props.onChange({ ...interval, cadence });\n  };\n\n  const handleResizeStop = (dWidth: number, dHeight: number) => {\n    setWidth(width + dWidth);\n    setHeight(height + dHeight);\n\n    notifyChange(dWidth, dHeight);\n  };\n\n  const notifyChange = (dWidth: number, dHeight: number) => {\n    props.onChange({\n      ...interval,\n      length: mode.widthToLength(width + dWidth),\n      intensity: mode.heightToIntensity(height + dHeight),\n    });\n  };\n\n  return (\n    <Container\n      onMouseEnter={() => setShowTooltip(true)}\n      onMouseLeave={() => setShowTooltip(false)}\n      onClick={() => props.onClick(interval.id)}\n      style={props.selected ? { zIndex: 10 } : {}}\n    >\n      {(selected || showTooltip) && props.showTooltip && (\n        <Tooltip\n          interval={interval}\n          mode={mode}\n          onCadenceChange={(cadence) => handleCadenceChange(cadence)}\n        />\n      )}\n      <RoundedResizable\n        size={{\n          width: mode.lengthToWidth(interval.length),\n          height: mode.intensityToHeight(interval.intensity),\n        }}\n        minWidth={3}\n        minHeight={intensityMultiplier * Zones.Z1.min}\n        maxHeight={intensityMultiplier * Zones.Z6.max}\n        enable={{ top: true, right: true }}\n        grid={[1, 1]}\n        onResizeStop={(e, direction, ref, d) =>\n          handleResizeStop(d.width, d.height)\n        }\n        onResize={(e, direction, ref, d) => notifyChange(d.width, d.height)}\n        $hasCadence={Boolean(interval.cadence)}\n        style={style}\n      ></RoundedResizable>\n    </Container>\n  );\n};\n\nconst Container = styled.div`\n  position: relative;\n`;\n\nconst RoundedResizable = styled(Resizable)<{ $hasCadence: boolean }>`\n  border-radius: 10px;\n  border: 1px solid white;\n  background-image: ${({ $hasCadence }) =>\n    $hasCadence ? \"url(\" + cadenceImage + \")\" : \"none\"};\n  background-size: 16px;\n  background-position: 2px 2px;\n  background-repeat: no-repeat;\n`;\n\nexport default SteadyBar;\n","import React, { useState } from \"react\";\nimport styled from \"styled-components\";\nimport { zoneColor, ZoneColor, Zones, ZonesArray } from \"../../types/Zones\";\nimport { Resizable } from \"re-resizable\";\nimport Tooltip from \"../Tooltip/Tooltip\";\nimport { RampInterval } from \"../../types/Interval\";\nimport { intensityMultiplier } from \"./multipliers\";\nimport { WorkoutMode } from \"../../modes/WorkoutMode\";\n\ninterface IDictionary {\n  [index: string]: number;\n}\n\ninterface RampBarProps {\n  interval: RampInterval;\n  mode: WorkoutMode;\n  onChange: (interval: RampInterval) => void;\n  onClick: (id: string) => void;\n  selected: boolean;\n}\n\nconst RampBar = ({ interval, mode, ...props }: RampBarProps) => {\n  const [showTooltip, setShowTooltip] = useState(false);\n\n  const handleCadenceChange = (cadence: number | undefined) => {\n    props.onChange({ ...interval, cadence: cadence });\n  };\n\n  const width = mode.lengthToWidth(interval.length);\n  const [resizableWidth, setResizableWidth] = useState(width);\n\n  const startHeight = mode.intensityToHeight(interval.startIntensity);\n  const [resizableStartHeight, setResizableStartHeight] = useState(startHeight);\n\n  const endHeight = mode.intensityToHeight(interval.endIntensity);\n  const [resizableEndHeight, setResizableEndHeight] = useState(endHeight);\n\n  const handleStartResizeStop = (dHeight: number) => {\n    setResizableStartHeight(resizableStartHeight + dHeight);\n  };\n  const handleEndResizeStop = (dWidth: number, dHeight: number) => {\n    setResizableWidth(resizableWidth + dWidth);\n    setResizableEndHeight(resizableEndHeight + dHeight);\n  };\n\n  const handleStartResize = (dHeight: number) => {\n    props.onChange({\n      ...interval,\n      startIntensity: mode.heightToIntensity(resizableStartHeight + dHeight),\n    });\n  };\n  const handleEndResize = (dWidth: number, dHeight: number) => {\n    props.onChange({\n      ...interval,\n      length: mode.widthToLength(resizableWidth + dWidth),\n      startIntensity: mode.heightToIntensity(resizableStartHeight),\n      endIntensity: mode.heightToIntensity(resizableEndHeight + dHeight),\n    });\n  };\n\n  return (\n    <Container\n      onMouseEnter={() => setShowTooltip(true)}\n      onMouseLeave={() => setShowTooltip(false)}\n      style={props.selected ? { zIndex: 1 } : {}}\n      onClick={() => props.onClick(interval.id)}\n    >\n      {(props.selected || showTooltip) && (\n        <Tooltip\n          interval={interval}\n          mode={mode}\n          onCadenceChange={(cadence) => handleCadenceChange(cadence)}\n        />\n      )}\n      <Ramp onClick={() => props.onClick(interval.id)}>\n        <ResizableRamp\n          size={{\n            width: resizableWidth / 2,\n            height: resizableStartHeight,\n          }}\n          minWidth={3}\n          minHeight={intensityMultiplier * Zones.Z1.min}\n          maxHeight={intensityMultiplier * Zones.Z6.max}\n          enable={{ top: true, right: true }}\n          grid={[1, 1]}\n          onResizeStop={(e, direction, ref, d) =>\n            handleStartResizeStop(d.height)\n          }\n          onResize={(e, direction, ref, d) => handleStartResize(d.height)}\n        ></ResizableRamp>\n        <ResizableRamp\n          size={{\n            width: resizableWidth / 2,\n            height: resizableEndHeight,\n          }}\n          minWidth={3}\n          minHeight={intensityMultiplier * Zones.Z1.min}\n          maxHeight={intensityMultiplier * Zones.Z6.max}\n          enable={{ top: true, right: true }}\n          grid={[1, 1]}\n          onResizeStop={(e, direction, ref, d) =>\n            handleEndResizeStop(d.width, d.height)\n          }\n          onResize={(e, direction, ref, d) =>\n            handleEndResize(d.width, d.height)\n          }\n        ></ResizableRamp>\n      </Ramp>\n      <Rainbow\n        interval={interval}\n        startHeight={startHeight}\n        endHeight={endHeight}\n      />\n      <SvgPolygons\n        width={width}\n        startHeight={startHeight}\n        endHeight={endHeight}\n      />\n    </Container>\n  );\n};\n\nconst Container = styled.div`\n  position: relative;\n`;\n\nconst Ramp = styled.div`\n  display: flex;\n  align-items: flex-end;\n`;\n\nconst ResizableRamp = styled(Resizable)`\n  border-top: 1px dotted gray;\n  z-index: 5;\n`;\n\nconst Rainbow: React.FC<{\n  interval: RampInterval;\n  startHeight: number;\n  endHeight: number;\n}> = ({ interval, startHeight, endHeight }) => {\n  const trapezeHeight = endHeight > startHeight ? endHeight : startHeight;\n  const bars =\n    endHeight > startHeight\n      ? calculateColors(interval.startIntensity, interval.endIntensity)\n      : calculateColors(interval.endIntensity, interval.startIntensity);\n  const flexDirection = endHeight > startHeight ? \"row\" : \"row-reverse\";\n\n  return (\n    <RampColors\n      style={{\n        height: trapezeHeight,\n        flexDirection: flexDirection,\n        backgroundColor: zoneColor(interval.startIntensity),\n      }}\n    >\n      <Color\n        style={{\n          backgroundColor: ZoneColor.GRAY,\n          width: `${\n            (bars[\"Z1\"] * 100) /\n            Math.abs(interval.endIntensity - interval.startIntensity)\n          }%`,\n        }}\n      />\n      <Color\n        style={{\n          backgroundColor: ZoneColor.BLUE,\n          width: `${\n            (bars[\"Z2\"] * 100) /\n            Math.abs(interval.endIntensity - interval.startIntensity)\n          }%`,\n        }}\n      />\n      <Color\n        style={{\n          backgroundColor: ZoneColor.GREEN,\n          width: `${\n            (bars[\"Z3\"] * 100) /\n            Math.abs(interval.endIntensity - interval.startIntensity)\n          }%`,\n        }}\n      />\n      <Color\n        style={{\n          backgroundColor: ZoneColor.YELLOW,\n          width: `${\n            (bars[\"Z4\"] * 100) /\n            Math.abs(interval.endIntensity - interval.startIntensity)\n          }%`,\n        }}\n      />\n      <Color\n        style={{\n          backgroundColor: ZoneColor.ORANGE,\n          width: `${\n            (bars[\"Z5\"] * 100) /\n            Math.abs(interval.endIntensity - interval.startIntensity)\n          }%`,\n        }}\n      />\n      <Color\n        style={{\n          backgroundColor: ZoneColor.RED,\n          width: `${\n            (bars[\"Z6\"] * 100) /\n            Math.abs(interval.endIntensity - interval.startIntensity)\n          }%`,\n        }}\n      />\n    </RampColors>\n  );\n};\n\nconst RampColors = styled.div`\n  position: absolute;\n  bottom: 0px;\n  left: 0;\n  width: 100%;\n  display: flex;\n`;\n\nconst Color = styled.div`\n  &:first-child {\n    border-bottom-left-radius: 5px;\n  }\n  &:last-child {\n    border-bottom-right-radius: 5px;\n  }\n`;\n\nfunction calculateColors(start: number, end: number): IDictionary {\n  const bars = {} as IDictionary;\n\n  ZonesArray.forEach((zone, index) => {\n    if (start >= zone[0] && start < zone[1]) {\n      bars[\"Z\" + (index + 1)] = zone[1] - start;\n    } else if (end >= zone[0] && end < zone[1]) {\n      bars[\"Z\" + (index + 1)] = end - zone[0];\n    } else if (end >= zone[1] && start < zone[0]) {\n      bars[\"Z\" + (index + 1)] = zone[1] - zone[0];\n    } else {\n      bars[\"Z\" + (index + 1)] = 0;\n    }\n  });\n  return bars;\n}\n\nconst SvgPolygons: React.FC<{\n  width: number;\n  startHeight: number;\n  endHeight: number;\n}> = ({ width, startHeight, endHeight }) => {\n  const trapezeHeight = endHeight > startHeight ? endHeight : startHeight;\n  const trapezeTop =\n    endHeight > startHeight ? endHeight - startHeight : startHeight - endHeight;\n\n  const vertexB = endHeight > startHeight ? 0 : width;\n  const vertexA = endHeight > startHeight ? trapezeTop : 0;\n  const vertexD = endHeight > startHeight ? 0 : trapezeTop;\n\n  return (\n    <RampSvg height={`${trapezeHeight}`} width={`${width}`}>\n      <TransparentPolygon\n        points={`0,${vertexA} 0,${trapezeHeight} ${width},${trapezeHeight} ${width},${vertexD}`}\n      />\n      <HiddenPolygon points={`0,0 ${vertexB},${trapezeTop} ${width},0`} />\n    </RampSvg>\n  );\n};\n\nconst RampSvg = styled.svg`\n  position: absolute;\n  bottom: 0;\n  left: 0;\n`;\n\nconst TransparentPolygon = styled.polygon`\n  fill: transparent;\n`;\n\nconst HiddenPolygon = styled.polygon`\n  fill: white;\n  display: hidden;\n`;\n\nexport default RampBar;\n","import React, { useMemo, useState } from \"react\";\nimport SteadyBar from \"./SteadyBar\";\nimport styled from \"styled-components\";\nimport { RepetitionInterval, SteadyInterval } from \"../../types/Interval\";\nimport { WorkoutMode } from \"../../modes/WorkoutMode\";\nimport intervalFactory from \"../../interval/intervalFactory\";\nimport { range } from \"ramda\";\n\ninterface RepetitionBarProps {\n  interval: RepetitionInterval;\n  mode: WorkoutMode;\n  onChange: (interval: RepetitionInterval) => void;\n  onClick: (id: string) => void;\n  selected: boolean;\n}\n\nconst RepetitionBar = ({ interval, ...props }: RepetitionBarProps) => {\n  const [repeat, setRepeat] = useState(interval.repeat);\n\n  const [onLength, setOnLength] = useState(interval.onLength);\n  const [offLength, setOffLength] = useState(interval.offLength);\n\n  const subIntervals = useMemo(() => {\n    return range(0, repeat).flatMap(() => [\n      intervalFactory.steady(\n        {\n          length: onLength,\n          intensity: interval.onIntensity,\n          cadence: interval.onCadence,\n          pace: interval.pace,\n        },\n        props.mode\n      ),\n      intervalFactory.steady(\n        {\n          length: offLength,\n          intensity: interval.offIntensity,\n          cadence: interval.offCadence,\n          pace: interval.pace,\n        },\n        props.mode\n      ),\n    ]);\n    // eslint-disable-next-line\n  }, [repeat]);\n\n  function handleOnChange(values: SteadyInterval) {\n    const index = subIntervals.findIndex((sub) => sub.id === values.id);\n\n    if (index % 2 === 1) {\n      setOffLength(values.length);\n    } else {\n      setOnLength(values.length);\n    }\n\n    for (var i = 0; i < subIntervals.length; i++) {\n      if (index % 2 === i % 2) {\n        subIntervals[i].length = values.length;\n        subIntervals[i].intensity = values.intensity;\n        subIntervals[i].cadence = values.cadence;\n      }\n    }\n\n    props.onChange({\n      ...interval,\n      onCadence: subIntervals[0].cadence,\n      offCadence: subIntervals[1].cadence,\n      repeat: repeat,\n      onLength: subIntervals[0].length,\n      offLength: subIntervals[1].length,\n      onIntensity: subIntervals[0].intensity,\n      offIntensity: subIntervals[1].intensity,\n    });\n  }\n\n  function handleAddInterval() {\n    setRepeat(repeat + 1);\n    props.onChange({\n      ...interval,\n      repeat: interval.repeat + 1,\n    });\n  }\n\n  function handleRemoveInterval() {\n    if (repeat > 1) {\n      setRepeat(repeat - 1);\n      props.onChange({\n        ...interval,\n        repeat: interval.repeat - 1,\n      });\n    }\n  }\n\n  const renderBar = (subInterval: SteadyInterval, withTooltip: boolean) => (\n    <SteadyBar\n      key={subInterval.id}\n      interval={subInterval}\n      mode={props.mode}\n      onChange={handleOnChange}\n      onClick={() => props.onClick(interval.id)}\n      selected={props.selected}\n      showTooltip={withTooltip}\n    />\n  );\n\n  return (\n    <div>\n      <Buttons>\n        <button onClick={handleAddInterval}>+</button>\n        <button onClick={handleRemoveInterval}>-</button>\n      </Buttons>\n      <SubIntervals>\n        {subIntervals.map((sub, index) =>\n          renderBar(sub, index === 0 || index === subIntervals.length - 1)\n        )}\n      </SubIntervals>\n    </div>\n  );\n};\n\nconst Buttons = styled.div`\n  position: absolute;\n  margin-top: -30px;\n`;\n\nconst SubIntervals = styled.div`\n  display: flex;\n  flex-direction: row;\n  align-items: flex-end;\n`;\n\nexport default RepetitionBar;\n","import React from \"react\";\nimport { Interval } from \"../../types/Interval\";\nimport FreeBar from \"./FreeBar\";\nimport SteadyBar from \"./SteadyBar\";\nimport RampBar from \"./RampBar\";\nimport RepetitionBar from \"./RepetitionBar\";\nimport { WorkoutMode } from \"../../modes/WorkoutMode\";\n\ninterface GenericBarProps {\n  interval: Interval;\n  mode: WorkoutMode;\n  selected: boolean;\n  onChange: (interval: Interval) => void;\n  onClick: (id: string) => void;\n}\n\nconst GenericBar = ({\n  interval,\n  mode,\n  selected,\n  onChange,\n  onClick,\n}: GenericBarProps) => {\n  switch (interval.type) {\n    case \"steady\":\n      return (\n        <SteadyBar\n          interval={interval}\n          mode={mode}\n          onChange={onChange}\n          onClick={onClick}\n          selected={selected}\n          showTooltip={true}\n        />\n      );\n    case \"ramp\":\n      return (\n        <RampBar\n          interval={interval}\n          mode={mode}\n          onChange={onChange}\n          onClick={onClick}\n          selected={selected}\n        />\n      );\n    case \"free\":\n      return (\n        <FreeBar\n          interval={interval}\n          mode={mode}\n          onChange={onChange}\n          onClick={onClick}\n          selected={selected}\n        />\n      );\n    case \"repetition\":\n      return (\n        <RepetitionBar\n          interval={interval}\n          mode={mode}\n          onChange={onChange}\n          onClick={onClick}\n          selected={selected}\n        />\n      );\n  }\n};\n\nexport default GenericBar;\n","import React, { useState } from \"react\";\nimport Draggable from \"react-draggable\";\nimport styled from \"styled-components\";\nimport { FontAwesomeIcon } from \"@fortawesome/react-fontawesome\";\nimport { faComment, faTrashAlt } from \"@fortawesome/free-solid-svg-icons\";\nimport { Instruction } from \"../../types/Instruction\";\nimport * as format from \"../../utils/format\";\nimport { isDuration, Length } from \"../../types/Length\";\nimport { WorkoutMode } from \"../../modes/WorkoutMode\";\n\ninterface InstructionEditorProps {\n  instruction: Instruction;\n  width: number;\n  onChange: (instruction: Instruction) => void;\n  onDelete: (id: string) => void;\n  index: number;\n  mode: WorkoutMode;\n}\n\nconst roundingPrecision = { meters: 10, seconds: 5 };\n\nconst InstructionEditor = (props: InstructionEditorProps) => {\n  const [text, setText] = useState(props.instruction.text);\n  const [xPosition, setXPosition] = useState(\n    props.mode.lengthToWidth(props.instruction.offset)\n  );\n\n  const [showInput, setShowInput] = useState(false);\n\n  function handleTouch(position: number) {\n    props.onChange({\n      id: props.instruction.id,\n      text: text,\n      offset: props.mode.widthToLength(position, roundingPrecision),\n    });\n  }\n\n  function handleDragging(position: number) {\n    setShowInput(false);\n    setXPosition(position);\n  }\n\n  function handleInputChange(value: string) {\n    setText(value);\n\n    props.onChange({\n      id: props.instruction.id,\n      text: value,\n      offset: props.mode.widthToLength(xPosition, roundingPrecision),\n    });\n  }\n\n  function handleDelete() {\n    if (\n      text === \"\" ||\n      window.confirm(\"Are you sure you want to delete this comment?\")\n    ) {\n      props.onDelete(props.instruction.id);\n    }\n  }\n\n  const renderOffset = (offset: Length): string =>\n    isDuration(offset) ? format.duration(offset) : `${offset.meters} m`;\n\n  return (\n    <Draggable\n      axis=\"x\"\n      handle=\".handle\"\n      defaultPosition={{ x: xPosition, y: (props.index % 5) * 20 }}\n      bounds={{ left: 0, right: props.width }}\n      scale={1}\n      onStop={(e, data) => handleTouch(data.x)}\n      onDrag={(e, data) => handleDragging(data.x)}\n    >\n      <DraggableItem>\n        <DragHandle onMouseDown={() => setShowInput(!showInput)} />\n        {showInput && (\n          <EditorContainer>\n            <DeleteButton onClick={() => handleDelete()} />\n            <Offset>{renderOffset(props.instruction.offset)}</Offset>\n            <TextEditor\n              value={text}\n              onChange={(e) => handleInputChange(e.target.value)}\n            />\n          </EditorContainer>\n        )}\n        <VerticalLine />\n      </DraggableItem>\n    </Draggable>\n  );\n};\n\nconst DraggableItem = styled.div`\n  position: absolute;\n`;\n\nconst DragHandle = styled(FontAwesomeIcon).attrs(() => ({\n  icon: faComment,\n  size: \"lg\",\n  fixedWidth: true,\n  className: \"handle\", // Referenced by Draggable\n}))`\n  display: block;\n  opacity: 0.7;\n`;\n\nconst EditorContainer = styled.div`\n  position: relative;\n  padding: 5px;\n`;\n\nconst VerticalLine = styled.div`\n  position: absolute;\n  top: 30px;\n  left: 0px;\n  right: 0;\n  height: 90vh;\n  width: 1px;\n  border-left: 1px dotted gray;\n  z-index: 0;\n`;\n\nconst Offset = styled.span`\n  font-size: 13px;\n`;\n\nconst TextEditor = styled.textarea`\n  display: block;\n  padding: 5px;\n  width: 250px;\n  background-color: white;\n`;\n\nconst DeleteButton = styled(FontAwesomeIcon).attrs(() => ({\n  icon: faTrashAlt,\n  fixedWidth: true,\n}))`\n  color: gray;\n`;\n\nexport default InstructionEditor;\n","import styled from \"styled-components\";\n\nexport const XAxis = styled.div<{ width: number }>`\n  position: absolute;\n  bottom: 0px;\n  border-top: 1px solid gray;\n  overflow: hidden;\n  min-width: 1320px;\n  width: ${({ width }) => width}px;\n`;\n\nexport const XAxisValue = styled.span`\n  position: relative;\n  display: inline-block;\n  margin-top: 20px;\n  padding: 0;\n\n  &::before {\n    content: \"\";\n    position: absolute;\n    width: 1px;\n    height: 10px;\n    top: -20px;\n    left: 0;\n    background-color: gray;\n  }\n`;\n","import React from \"react\";\nimport styled from \"styled-components\";\nimport { XAxis, XAxisValue } from \"./XAxis\";\n\nconst hoursBy10Minutes = (hours: number): string[] =>\n  [...new Array(hours)].flatMap((v, h) =>\n    [\"00\", \"10\", \"20\", \"30\", \"40\", \"50\"].map((m) => `${h}:${m}`)\n  );\n\nconst TimeAxis = ({ width }: { width: number }) => (\n  <XAxis width={width}>\n    {hoursBy10Minutes(6).map((time) => (\n      <TimeAxisValue key={time}>{time}</TimeAxisValue>\n    ))}\n  </XAxis>\n);\n\nconst TimeAxisValue = styled(XAxisValue)`\n  width: 200px;\n`;\n\nexport default TimeAxis;\n","import React from \"react\";\nimport styled from \"styled-components\";\nimport { Zones } from \"../../types/Zones\";\n\nconst ZoneAxis = () => (\n  <Container>\n    {Object.entries(Zones)\n      .reverse()\n      .map(([name, zone]) => (\n        <ZoneItem key={name} zone={zone}>\n          {name}\n        </ZoneItem>\n      ))}\n  </Container>\n);\n\nconst Container = styled.div`\n  position: absolute;\n  bottom: 50px;\n  left: 2px;\n  color: gray;\n`;\n\nconst ZoneItem = styled.div<{ zone: { max: number } }>`\n  position: absolute;\n  bottom: 0;\n  left: 0;\n  height: ${({ zone }) => zone.max * 250}px;\n\n  /* Zone 6 has no upper bound */\n  &:not(:first-child) {\n    border-top: 1px solid gray;\n  }\n`;\n\nexport default ZoneAxis;\n","import React from \"react\";\nimport styled from \"styled-components\";\nimport { XAxis, XAxisValue } from \"./XAxis\";\n\nconst DistanceAxis = ({ width }: { width: number }) => (\n  <XAxis width={width}>\n    {[...new Array(44)].map((e, i) => (\n      <DistanceAxisValue key={i}>{i}K</DistanceAxisValue>\n    ))}\n  </XAxis>\n);\n\nconst DistanceAxisValue = styled(XAxisValue)`\n  width: 100px;\n`;\n\nexport default DistanceAxis;\n","import React from \"react\";\nimport styled from \"styled-components\";\nimport { PaceType } from \"../../types/PaceType\";\n\ninterface PaceSelectorProps {\n  value?: PaceType;\n  onChange: (value: PaceType) => void;\n}\n\nconst PaceSelector = ({ value, onChange }: PaceSelectorProps) => (\n  <StyledSelect\n    name=\"pace\"\n    value={value}\n    onChange={(e) => onChange(parseInt(e.target.value))}\n  >\n    <option value=\"0\">1 Mile Pace</option>\n    <option value=\"1\">5K Pace</option>\n    <option value=\"2\">10K Pace</option>\n    <option value=\"3\">Half Marathon Pace</option>\n    <option value=\"4\">Marathon Pace</option>\n  </StyledSelect>\n);\n\nconst StyledSelect = styled.select`\n  font-size: 16px;\n  background-color: rgba(0, 0, 0, 0.7);\n  color: white;\n  padding: 10px;\n  border-radius: 5px;\n`;\n\nexport default PaceSelector;\n","import React from \"react\";\nimport { IconDefinition } from \"@fortawesome/fontawesome-svg-core\";\nimport { FontAwesomeIcon } from \"@fortawesome/react-fontawesome\";\nimport styled from \"styled-components\";\n\ninterface ActionButtonProps {\n  title: string;\n  icon: IconDefinition;\n  onClick: () => void;\n}\n\nconst ActionButton: React.FC<ActionButtonProps> = ({\n  title,\n  icon,\n  onClick,\n}) => {\n  return (\n    <RoundButton onClick={onClick} title={title}>\n      <FontAwesomeIcon icon={icon} size=\"lg\" fixedWidth />\n    </RoundButton>\n  );\n};\n\nconst RoundButton = styled.button`\n  padding: 20px;\n  margin: 0 5px;\n  background-color: rgba(0, 0, 0, 0.7);\n  color: white;\n  border: 0;\n  border-radius: 50%;\n`;\n\nexport default ActionButton;\n","import React from \"react\";\nimport { connect } from \"react-redux\";\nimport {\n  faTrash,\n  faArrowRight,\n  faArrowLeft,\n  faCopy,\n} from \"@fortawesome/free-solid-svg-icons\";\nimport PaceSelector from \"./PaceSelector\";\nimport ActionButton from \"../Button/ActionButton\";\nimport { selectSportType } from \"../../rdx/state/meta\";\nimport { RootState } from \"../../rdx/store\";\nimport {\n  removeSelectedInterval,\n  duplicateSelectedInterval,\n  moveSelectedInterval,\n  selectSelectedIntervalPace,\n  setSelectedIntervalPace,\n} from \"../../rdx/state/intervals\";\nimport { ConnectedProps } from \"../../types/ConnectedProps\";\nimport styled from \"styled-components\";\n\nconst mapStateToProps = (state: RootState) => ({\n  sportType: selectSportType(state),\n  selectedIntervalPace: selectSelectedIntervalPace(state),\n});\n\nconst mapDispatchToProps = {\n  setSelectedIntervalPace,\n  removeSelectedInterval,\n  duplicateSelectedInterval,\n  moveSelectedInterval,\n};\n\ntype SelectionToolbarProps = ConnectedProps<\n  typeof mapStateToProps,\n  typeof mapDispatchToProps\n>;\n\nconst SelectionToolbar = (props: SelectionToolbarProps) => {\n  const {\n    sportType,\n    selectedIntervalPace,\n    setSelectedIntervalPace,\n    removeSelectedInterval,\n    duplicateSelectedInterval,\n    moveSelectedInterval,\n  } = props;\n\n  return (\n    <ActionsContainer>\n      <ActionButton\n        title=\"Move Left\"\n        icon={faArrowLeft}\n        onClick={() => moveSelectedInterval(-1)}\n      />\n      <ActionButton\n        title=\"Move Right\"\n        icon={faArrowRight}\n        onClick={() => moveSelectedInterval(+1)}\n      />\n      <ActionButton\n        title=\"Delete\"\n        icon={faTrash}\n        onClick={removeSelectedInterval}\n      />\n      <ActionButton\n        title=\"Duplicate\"\n        icon={faCopy}\n        onClick={duplicateSelectedInterval}\n      />\n      {sportType === \"run\" && (\n        <PaceSelector\n          value={selectedIntervalPace}\n          onChange={setSelectedIntervalPace}\n        />\n      )}\n    </ActionsContainer>\n  );\n};\n\nconst ActionsContainer = styled.div`\n  position: absolute;\n  top: 0;\n  left: 0;\n  right: 0;\n  width: 220px;\n  margin: 0 auto;\n  padding: 5px;\n  z-index: 10;\n`;\n\nexport default connect(mapStateToProps, mapDispatchToProps)(SelectionToolbar);\n","import React, { useState, useEffect, useRef } from \"react\";\nimport { connect } from \"react-redux\";\nimport GenericBar from \"../Bar/GenericBar\";\nimport InstructionEditor from \"../InstructionEditor/InstructionEditor\";\nimport TimeAxis from \"../Axis/TimeAxis\";\nimport ZoneAxis from \"../Axis/ZoneAxis\";\nimport { workoutDuration } from \"../../utils/duration\";\nimport DistanceAxis from \"../Axis/DistanceAxis\";\nimport { selectLengthType } from \"../../rdx/state/meta\";\nimport { RootState } from \"../../rdx/store\";\nimport { selectIntervals, updateInterval } from \"../../rdx/state/intervals\";\nimport {\n  selectInstructions,\n  updateInstruction,\n  removeInstruction,\n} from \"../../rdx/state/instructions\";\nimport { selectMode } from \"../../rdx/state/mode\";\nimport { ConnectedProps } from \"../../types/ConnectedProps\";\nimport {\n  selectSelectedId,\n  clearSelection,\n  setSelectedId,\n} from \"../../rdx/state/selectedId\";\nimport SelectionToolbar from \"../SelectionToolbar/SelectionToolbar\";\nimport styled from \"styled-components\";\n\nconst mapStateToProps = (state: RootState) => ({\n  lengthType: selectLengthType(state),\n  intervals: selectIntervals(state),\n  instructions: selectInstructions(state),\n  mode: selectMode(state),\n  selectedId: selectSelectedId(state),\n});\n\nconst mapDispatchToProps = {\n  updateInterval,\n  updateInstruction,\n  setSelectedId,\n  clearSelection,\n  removeInstruction,\n};\n\ntype EditorProps = ConnectedProps<\n  typeof mapStateToProps,\n  typeof mapDispatchToProps\n>;\n\nconst Editor = ({\n  lengthType,\n  intervals,\n  instructions,\n  mode,\n  selectedId,\n  updateInterval,\n  updateInstruction,\n  setSelectedId,\n  clearSelection,\n  removeInstruction,\n}: EditorProps) => {\n  const segmentsRef = useRef<HTMLDivElement>(null);\n  const [xAxisWidth, setXAxisWidth] = useState(1320);\n\n  useEffect(() => {\n    setXAxisWidth(segmentsRef.current?.scrollWidth || 1320);\n  }, [segmentsRef]);\n\n  function toggleSelection(id: string) {\n    if (id === selectedId) {\n      clearSelection();\n    } else {\n      setSelectedId(id);\n    }\n  }\n\n  return (\n    <Container>\n      {selectedId && <SelectionToolbar />}\n\n      <Canvas>\n        {selectedId && (\n          <Fader style={{ width: xAxisWidth }} onClick={clearSelection} />\n        )}\n        <Segments ref={segmentsRef}>\n          {intervals.map((interval) => (\n            <GenericBar\n              key={interval.id}\n              interval={interval}\n              mode={mode}\n              onChange={updateInterval}\n              onClick={toggleSelection}\n              selected={interval.id === selectedId}\n            />\n          ))}\n        </Segments>\n\n        <Slider>\n          {instructions.map((instruction, index) => (\n            <InstructionEditor\n              key={instruction.id}\n              instruction={instruction}\n              width={workoutDuration(intervals, mode).seconds / 3}\n              onChange={updateInstruction}\n              onDelete={removeInstruction}\n              index={index}\n              mode={mode}\n            />\n          ))}\n        </Slider>\n\n        {lengthType === \"time\" ? (\n          <TimeAxis width={xAxisWidth} />\n        ) : (\n          <DistanceAxis width={xAxisWidth} />\n        )}\n      </Canvas>\n      <ZoneAxis />\n    </Container>\n  );\n};\n\nconst Container = styled.div`\n  flex: 1;\n  position: relative;\n  white-space: nowrap;\n  background-color: white;\n\n  padding: 0px 40px;\n  margin: 10px auto;\n  overflow-x: hidden;\n  width: 100%;\n  max-width: 1280px;\n  -webkit-box-shadow: 0px 0px 27px -9px rgba(0, 0, 0, 0.35);\n  -moz-box-shadow: 0px 0px 27px -9px rgba(0, 0, 0, 0.35);\n  box-shadow: 0px 0px 27px -9px rgba(0, 0, 0, 0.35);\n  border-radius: 5px;\n`;\n\nconst Canvas = styled.div`\n  position: absolute;\n  width: 100%;\n  max-width: 1320px;\n  height: 100%;\n  overflow-y: hidden;\n  overflow-x: visible;\n  bottom: 10px;\n`;\n\nconst Segments = styled.div`\n  position: absolute;\n  display: flex;\n  flex-wrap: nowrap;\n  justify-content: flex-start;\n  align-items: flex-end;\n  bottom: 0px;\n  padding-bottom: 40px;\n  margin-right: 100px;\n`;\n\nconst Fader = styled.div`\n  position: absolute;\n  background-color: rgba(255, 255, 255, 0.9);\n  top: 0;\n  left: 0;\n  right: 0;\n  bottom: 0;\n  width: 50000px;\n  height: 100%;\n  z-index: 1;\n`;\n\nconst Slider = styled.div`\n  position: absolute;\n  top: 10px;\n  left: 0px;\n`;\n\nexport default connect(mapStateToProps, mapDispatchToProps)(Editor);\n","import React, { useState } from \"react\";\nimport { connect } from \"react-redux\";\nimport Popup from \"../Popup/Popup\";\nimport Footer from \"../Footer/Footer\";\nimport {\n  faBiking,\n  faRunning,\n  faClock,\n  faRuler,\n} from \"@fortawesome/free-solid-svg-icons\";\nimport SaveForm from \"../Forms/SaveForm\";\nimport Head from \"../Head/Head\";\nimport RunningTimesEditor from \"./RunningTimesEditor\";\nimport LeftRightToggle from \"./LeftRightToggle\";\nimport Keyboard from \"../Keyboard/Keyboard\";\nimport Stats from \"./Stats\";\nimport Title from \"./Title\";\nimport { SportType } from \"../../types/SportType\";\nimport { Duration } from \"../../types/Length\";\nimport { LengthType } from \"../../types/LengthType\";\nimport {\n  selectAuthor,\n  selectDescription,\n  selectName,\n  selectSportType,\n  selectLengthType,\n  setSportType,\n  setLengthType,\n} from \"../../rdx/state/meta\";\nimport { RootState } from \"../../rdx/store\";\nimport {\n  selectFtp,\n  selectRunningTimes,\n  setRunningTimes,\n} from \"../../rdx/state/athlete\";\nimport {\n  selectIntervals,\n  adjustSelectedIntervalIntensity,\n  adjustSelectedIntervalDuration,\n  updateInterval,\n  removeSelectedInterval,\n  setIntervals,\n} from \"../../rdx/state/intervals\";\nimport {\n  updateInstruction,\n  removeInstruction,\n  selectInstructions,\n  setInstructions,\n} from \"../../rdx/state/instructions\";\nimport { selectMode } from \"../../rdx/state/mode\";\nimport Toolbar from \"../Toolbar/Toolbar\";\nimport { ConnectedProps } from \"../../types/ConnectedProps\";\nimport { clearSelection, setSelectedId } from \"../../rdx/state/selectedId\";\nimport Editor from \"../Editor/Editor\";\nimport styled from \"styled-components\";\n\nconst mapStateToProps = (state: RootState) => ({\n  name: selectName(state),\n  author: selectAuthor(state),\n  description: selectDescription(state),\n  sportType: selectSportType(state),\n  lengthType: selectLengthType(state),\n  ftp: selectFtp(state),\n  runningTimes: selectRunningTimes(state),\n  intervals: selectIntervals(state),\n  instructions: selectInstructions(state),\n  mode: selectMode(state),\n});\n\nconst mapDispatchToProps = {\n  setSportType,\n  setLengthType,\n  setRunningTimes,\n  setIntervals,\n  setInstructions,\n  adjustSelectedIntervalIntensity,\n  adjustSelectedIntervalDuration,\n  updateInterval,\n  updateInstruction,\n  setSelectedId,\n  clearSelection,\n  removeSelectedInterval,\n  removeInstruction,\n};\n\ntype EditorPageProps = ConnectedProps<\n  typeof mapStateToProps,\n  typeof mapDispatchToProps\n>;\n\nconst EditorPage = ({\n  name,\n  author,\n  description,\n  sportType,\n  lengthType,\n  ftp,\n  runningTimes,\n  intervals,\n  instructions,\n  mode,\n  setSportType,\n  setLengthType,\n  setRunningTimes,\n  setIntervals,\n  setInstructions,\n  adjustSelectedIntervalIntensity,\n  adjustSelectedIntervalDuration,\n  removeSelectedInterval,\n}: EditorPageProps) => {\n  const [savePopupIsVisile, setSavePopupVisibility] = useState(false);\n\n  const isEmpty = () => intervals.length === 0 && instructions.length === 0;\n\n  function switchSportType(newSportType: SportType) {\n    if (\n      isEmpty() ||\n      window.confirm(\n        `Switching from ${sportType} to ${newSportType} will clear current workout. Are you sure?`\n      )\n    ) {\n      setIntervals([]);\n      setInstructions([]);\n      setSportType(newSportType);\n    }\n  }\n\n  function switchLengthType(newLengthType: LengthType) {\n    if (\n      isEmpty() ||\n      window.confirm(\n        `Switching from ${lengthType} to ${newLengthType} will clear current workout. Are you sure?`\n      )\n    ) {\n      setIntervals([]);\n      setInstructions([]);\n      setLengthType(newLengthType);\n    }\n  }\n\n  return (\n    <KeyboardContainer\n      onBackspacePress={removeSelectedInterval}\n      onUpPress={() => adjustSelectedIntervalIntensity(0.01)}\n      onDownPress={() => adjustSelectedIntervalIntensity(-0.01)}\n      onLeftPress={() => adjustSelectedIntervalDuration(Duration(-5))}\n      onRightPress={() => adjustSelectedIntervalDuration(Duration(5))}\n    >\n      <Head name={name} description={description} />\n\n      {savePopupIsVisile && (\n        <Popup width=\"500px\" onClose={() => setSavePopupVisibility(false)}>\n          <SaveForm />\n        </Popup>\n      )}\n      <Header>\n        <Title\n          name={name}\n          author={author}\n          description={description}\n          onClick={() => setSavePopupVisibility(true)}\n        />\n        <HeaderRight>\n          <Stats intervals={intervals} ftp={ftp} mode={mode} />\n          {sportType === \"run\" && (\n            <LeftRightToggle<\"time\", \"distance\">\n              label=\"Duration Type\"\n              leftValue=\"time\"\n              rightValue=\"distance\"\n              leftIcon={faClock}\n              rightIcon={faRuler}\n              selected={lengthType}\n              onChange={switchLengthType}\n            />\n          )}\n          <LeftRightToggle<\"bike\", \"run\">\n            label=\"Sport Type\"\n            leftValue=\"bike\"\n            rightValue=\"run\"\n            leftIcon={faBiking}\n            rightIcon={faRunning}\n            selected={sportType}\n            onChange={switchSportType}\n          />\n        </HeaderRight>\n      </Header>\n      {sportType === \"run\" && (\n        <RunningTimesEditor times={runningTimes} onChange={setRunningTimes} />\n      )}\n\n      <Editor />\n\n      <Toolbar />\n      <Footer />\n    </KeyboardContainer>\n  );\n};\n\nconst KeyboardContainer = styled(Keyboard)`\n  display: flex;\n  flex-direction: column;\n  min-height: 100%;\n  margin: 0px;\n  background-color: #eaeaea;\n  overflow-x: hidden;\n`;\n\nconst Header = styled.div`\n  margin: 0 auto;\n  text-align: left;\n  max-width: 1360px;\n  width: 100%;\n  display: flex;\n  flex-direction: row;\n`;\n\nconst HeaderRight = styled.div`\n  padding: 10px;\n  display: flex;\n  flex-direction: row;\n`;\n\nexport default connect(mapStateToProps, mapDispatchToProps)(EditorPage);\n","import React from \"react\";\nimport { BrowserRouter as Router, Switch, Route } from \"react-router-dom\";\nimport EditorPage from \"./components/EditorPage/EditorPage\";\n\nexport default function App() {\n  return (\n    <Router>\n      <Switch>\n        <Route path=\"/\">\n          <EditorPage />\n        </Route>\n      </Switch>\n    </Router>\n  );\n}\n","// This optional code is used to register a service worker.\n// register() is not called by default.\n\n// This lets the app load faster on subsequent visits in production, and gives\n// it offline capabilities. However, it also means that developers (and users)\n// will only see deployed updates on subsequent visits to a page, after all the\n// existing tabs open on the page have been closed, since previously cached\n// resources are updated in the background.\n\n// To learn more about the benefits of this model and instructions on how to\n// opt-in, read https://bit.ly/CRA-PWA\n\nconst isLocalhost = Boolean(\n  window.location.hostname === \"localhost\" ||\n    // [::1] is the IPv6 localhost address.\n    window.location.hostname === \"[::1]\" ||\n    // 127.0.0.0/8 are considered localhost for IPv4.\n    window.location.hostname.match(\n      /^127(?:\\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/\n    )\n);\n\nexport function register(config) {\n  if (process.env.NODE_ENV === \"production\" && \"serviceWorker\" in navigator) {\n    // The URL constructor is available in all browsers that support SW.\n    const publicUrl = new URL(process.env.PUBLIC_URL, window.location.href);\n    if (publicUrl.origin !== window.location.origin) {\n      // Our service worker won't work if PUBLIC_URL is on a different origin\n      // from what our page is served on. This might happen if a CDN is used to\n      // serve assets; see https://github.com/facebook/create-react-app/issues/2374\n      return;\n    }\n\n    window.addEventListener(\"load\", () => {\n      const swUrl = `${process.env.PUBLIC_URL}/service-worker.js`;\n\n      if (isLocalhost) {\n        // This is running on localhost. Let's check if a service worker still exists or not.\n        checkValidServiceWorker(swUrl, config);\n\n        // Add some additional logging to localhost, pointing developers to the\n        // service worker/PWA documentation.\n        navigator.serviceWorker.ready.then(() => {\n          console.log(\n            \"This web app is being served cache-first by a service \" +\n              \"worker. To learn more, visit https://bit.ly/CRA-PWA\"\n          );\n        });\n      } else {\n        // Is not localhost. Just register service worker\n        registerValidSW(swUrl, config);\n      }\n    });\n  }\n}\n\nfunction registerValidSW(swUrl, config) {\n  navigator.serviceWorker\n    .register(swUrl)\n    .then((registration) => {\n      registration.onupdatefound = () => {\n        const installingWorker = registration.installing;\n        if (installingWorker == null) {\n          return;\n        }\n        installingWorker.onstatechange = () => {\n          if (installingWorker.state === \"installed\") {\n            if (navigator.serviceWorker.controller) {\n              // At this point, the updated precached content has been fetched,\n              // but the previous service worker will still serve the older\n              // content until all client tabs are closed.\n              console.log(\n                \"New content is available and will be used when all \" +\n                  \"tabs for this page are closed. See https://bit.ly/CRA-PWA.\"\n              );\n\n              // Execute callback\n              if (config && config.onUpdate) {\n                config.onUpdate(registration);\n              }\n            } else {\n              // At this point, everything has been precached.\n              // It's the perfect time to display a\n              // \"Content is cached for offline use.\" message.\n              console.log(\"Content is cached for offline use.\");\n\n              // Execute callback\n              if (config && config.onSuccess) {\n                config.onSuccess(registration);\n              }\n            }\n          }\n        };\n      };\n    })\n    .catch((error) => {\n      console.error(\"Error during service worker registration:\", error);\n    });\n}\n\nfunction checkValidServiceWorker(swUrl, config) {\n  // Check if the service worker can be found. If it can't reload the page.\n  fetch(swUrl, {\n    headers: { \"Service-Worker\": \"script\" },\n  })\n    .then((response) => {\n      // Ensure service worker exists, and that we really are getting a JS file.\n      const contentType = response.headers.get(\"content-type\");\n      if (\n        response.status === 404 ||\n        (contentType != null && contentType.indexOf(\"javascript\") === -1)\n      ) {\n        // No service worker found. Probably a different app. Reload the page.\n        navigator.serviceWorker.ready.then((registration) => {\n          registration.unregister().then(() => {\n            window.location.reload();\n          });\n        });\n      } else {\n        // Service worker found. Proceed as normal.\n        registerValidSW(swUrl, config);\n      }\n    })\n    .catch(() => {\n      console.log(\n        \"No internet connection found. App is running in offline mode.\"\n      );\n    });\n}\n\nexport function unregister() {\n  if (\"serviceWorker\" in navigator) {\n    navigator.serviceWorker.ready\n      .then((registration) => {\n        registration.unregister();\n      })\n      .catch((error) => {\n        console.error(error.message);\n      });\n  }\n}\n","import { reducer as meta } from \"./state/meta\";\nimport { reducer as athlete } from \"./state/athlete\";\nimport { reducer as intervals } from \"./state/intervals\";\nimport { reducer as instructions } from \"./state/instructions\";\nimport { reducer as selectedId } from \"./state/selectedId\";\nimport { persistCombineReducers } from \"redux-persist\";\nimport storage from \"redux-persist/lib/storage\";\n\nexport const reducer = persistCombineReducers(\n  {\n    key: \"root\",\n    storage,\n  },\n  {\n    meta,\n    athlete,\n    intervals,\n    instructions,\n    selectedId,\n  }\n);\n","import { configureStore } from \"@reduxjs/toolkit\";\nimport { reducer } from \"./reducer\";\nimport { persistStore } from \"redux-persist\";\n\nexport type RootState = ReturnType<typeof reducer>;\n\nexport const store = configureStore({\n  reducer,\n});\n\nexport const persistor = persistStore(store);\n","import React from \"react\";\nimport ReactDOM from \"react-dom\";\nimport { Provider } from \"react-redux\";\nimport \"./index.css\";\nimport App from \"./App\";\nimport * as serviceWorker from \"./serviceWorker\";\nimport { store } from \"./rdx/store\";\n\nReactDOM.render(\n  <React.StrictMode>\n    <Provider store={store}>\n      <App />\n    </Provider>\n  </React.StrictMode>,\n  document.getElementById(\"root\")\n);\n\n// If you want your app to work offline and load faster, you can change\n// unregister() to register() below. Note this comes with some pitfalls.\n// Learn more about service workers: https://bit.ly/CRA-PWA\nserviceWorker.unregister();\n","module.exports = __webpack_public_path__ + \"static/media/cadence.b638b56b.png\";"],"sourceRoot":""}