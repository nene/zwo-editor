{"version":3,"sources":["assets/freeride.svg","components/Popup/Popup.tsx","const.ts","components/Footer/Footer.tsx","rdx/state/workout.ts","rdx/state/meta.ts","components/Label/Label.tsx","components/Forms/Checkbox.tsx","components/Forms/SaveForm.tsx","types/PaceType.ts","components/Head/Head.tsx","types/runningDistances.ts","components/Layout/Column.tsx","components/EditorPage/RunningTimesEditor.tsx","components/EditorPage/LeftRightToggle.tsx","components/Keyboard/Keyboard.tsx","types/Length.ts","interval/intervalFactory.ts","utils/math.ts","modes/Mode.ts","components/Bar/multipliers.ts","modes/BikeMode.ts","modes/RunMode.ts","utils/distance.ts","utils/duration.ts","utils/format.ts","components/EditorPage/Stats.tsx","components/EditorPage/Title.tsx","types/Zones.ts","rdx/state/athlete.ts","interval/intervalUtils.ts","utils/array.ts","rdx/state/selectedId.ts","rdx/state/mode.ts","modes/createMode.ts","rdx/state/intervals.ts","assets/warmdown.svg","assets/warmup.svg","assets/interval.svg","assets/steady.svg","components/Toolbar/NumberField.tsx","components/Button/Button.tsx","components/Button/IconButton.tsx","xml/parseWorkoutXml.ts","types/Workout.ts","components/Toolbar/UploadButton.tsx","components/Button/ColorButton.tsx","xml/createWorkoutXml.ts","components/Toolbar/DownloadButton.tsx","components/Button/SvgButton.tsx","components/Toolbar/Toolbar.tsx","components/Tooltip/Tooltip.tsx","components/Bar/BarIcons.tsx","components/Bar/FreeBar.tsx","components/Bar/SteadyBar.tsx","components/Bar/RampBar.tsx","interval/repetition.ts","components/Bar/RepetitionBar.tsx","components/InstructionEditor/InstructionEditor.tsx","components/Bar/GenericBar.tsx","components/Axis/XAxis.tsx","components/Axis/TimeAxis.tsx","components/Axis/ZoneAxis.tsx","components/Axis/DistanceAxis.tsx","components/SelectionToolbar/PaceSelector.tsx","components/Button/ActionButton.tsx","types/Instruction.ts","components/SelectionToolbar/SelectionToolbar.tsx","components/Editor/Editor.tsx","components/EditorPage/EditorPage.tsx","App.tsx","serviceWorker.js","rdx/reducer.ts","rdx/store.ts","index.js","assets/cadence.png"],"names":["module","exports","Background","styled","div","Window","CloseButton","button","Popup","props","style","width","height","onClick","onClose","icon","faTimesCircle","size","fixedWidth","children","GITHUB_URL","Footer","Container","List","Item","Hyperlink","href","target","ul","li","a","clearWorkout","createAction","loadWorkout","initialState","name","author","description","tags","sportType","lengthType","slice","createSlice","reducers","setName","state","action","payload","setAuthor","setDescription","setTags","setSportType","setLengthType","extraReducers","builder","addCase","reducer","actions","selectMeta","meta","selectName","createSelector","m","selectAuthor","selectDescription","selectTags","selectSportType","selectLengthType","Label","label","CheckboxLabel","Checkbox","type","checked","isSelected","onChange","e","onCheckboxChange","className","DEFAULT_TAGS","mapDispatchToProps","PaceType","Heading","h2","Field","FieldLabel","TextInput","input","connect","htmlFor","id","placeholder","value","as","map","tagName","key","includes","filter","item","addOrRemoveTag","Head","Helmet","content","runningDistances","Column","RunningTimesEditor","times","estimateRunningTimes","useCallback","timesOrig","distances","estimatedTimes","forEach","i","index","length","calculateEstimatedTimes","handleInputChange","pace","t","timesCopy","time","oneMile","fiveKm","tenKm","halfMarathon","marathon","Col","RunTimeInput","title","TimePickerStyleOverrides","StyledTimePicker","undefined","moment","utc","defaultOpenValue","duration","format","asSeconds","createGlobalStyle","TimePicker","LeftRight","ToggleIcon","FontAwesomeIcon","$active","LeftRightToggle","leftValue","rightValue","leftIcon","rightIcon","selected","checkedIcon","uncheckedIcon","onColor","offColor","Keyboard","onKeyDown","event","HTMLInputElement","HTMLTextAreaElement","keyCode","onBackspacePress","preventDefault","onLeftPress","onRightPress","onUpPress","onDownPress","tabIndex","Distance","meters","Duration","seconds","isDuration","obj","defaultDuration","defaultDistance","defaultPace","defaultLength","mode","interval","uuidv4","intensity","cadence","instructions","startIntensity","defaultIntensity","endIntensity","repeat","onLength","offLength","onIntensity","offIntensity","onCadence","offCadence","floor","x","roundTo","Math","Mode","precision","this","BikeMode","ftp","weight","power","Error","onDuration","offDuration","intervalDuration","RunMode","runningTimes","speed","distance","onDistance","offDistance","intervalDistance","workoutDistance","intervals","sum","d","workoutDuration","trim","round","percentage","shortPaceName","runningPace","secondsPerKm","getStressScore","tss","np","iff","npOn","iffOn","intervalFactory","npOff","iffOff","toFixed","Stats","disabled","ZoneColor","h1","StyledIcon","Author","p","Title","faEdit","setFtp","setWeight","setRunningTimes","selectAthlete","athlete","selectFtp","selectWeight","selectRunningTimes","Zones","Z1","min","max","Z2","Z3","Z4","Z5","Z6","ZonesArray","zoneColor","GRAY","BLUE","GREEN","YELLOW","ORANGE","RED","updateById","transform","findIndex","propEq","update","replaceById","array","setSelectedId","clearSelection","selectSelectedId","selectedId","selectMode","createMode","setIntervals","addInterval","updateInterval","removeInterval","removeInstruction","updateInstructionsField","intervalId","instructionId","updateInstruction","instruction","addInstruction","find","removeSelectedInterval","createAsyncThunk","_","getState","dispatch","duplicateSelectedInterval","selectSelectedInterval","adjustSelectedIntervalIntensity","amount","selectIntervals","dIntensity","updateIntervalIntensity","adjustSelectedIntervalDuration","dDuration","updateIntervalDuration","moveSelectedInterval","direction","oldIndex","newIndex","move","moveInterval","setSelectedIntervalPace","selectSelectedIntervalPace","selectSelectedIntervalId","_extends","Object","assign","arguments","source","prototype","hasOwnProperty","call","apply","_objectWithoutProperties","excluded","sourceKeys","keys","indexOf","_objectWithoutPropertiesLoose","getOwnPropertySymbols","sourceSymbolKeys","propertyIsEnumerable","createElement","stroke","strokeWidth","fill","fillRule","points","_ref","svgRef","viewBox","ref","ForwardRef","forwardRef","y","NumberField","parseInt","Button","IconButton","parseWorkoutXml","data","workout","replace","workout_file","Converter","xml2js","elements","sportTypeIndex","element","text","lengthTypeIndex","authorIndex","nameIndex","descriptionIndex","tagsIndex","el","attributes","workoutEl","toLength","w","push","parseFloat","Power","PowerLow","Cadence","textEventsToInstructions","PowerHigh","Repeat","OnDuration","OffDuration","OnPower","OffPower","CadenceResting","textElements","toLowerCase","message","offset","timeoffset","UploadButton","onUpload","file","console","error","accept","display","handleUpload","files","faUpload","document","getElementById","click","ColorButton","color","createWorkoutXml","xml","Builder","begin","ele","up","tag","create","att","importDocument","segment","ramp","fromLength","intervalLength","end","pretty","faDownload","tempFile","Blob","createZwoFile","url","window","URL","createObjectURL","body","appendChild","download","revokeObjectURL","StyledSvg","svg","SvgButton","SteadyLogo","WarmupLogo","WarmdownLogo","IntervalLogo","faBicycle","faRunning","faFile","confirm","TooltipContainer","BikeData","wkg","onCadenceChange","faBolt","CadenceItem","useState","hover","setHover","focus","setFocus","CadenceRow","onMouseOver","onMouseOut","CadenceLabel","src","cadenceImage","alt","CadenceInput","$cadence","$onCadenceChange","onFocus","onBlur","CadenceValue","RunData","faRuler","attrs","step","stopPropagation","span","Tooltip","faClock","BarIcons","IconsWrap","$height","IconLine","faComment","ResizableFreeBar","Resizable","freerideSvg","FreeBarIcons","FreeBar","lengthToWidth","setWidth","showTooltip","setShowTooltip","notifyChange","dWidth","widthToLength","onMouseEnter","onMouseLeave","zIndex","handleCadenceChange","minWidth","minHeight","maxHeight","enable","right","grid","onResizeStop","onResize","RoundedResizable","SteadyBar","backgroundColor","intensityToHeight","setHeight","setSelected","useEffect","dHeight","heightToIntensity","top","Ramp","ResizableRamp","Rainbow","startHeight","endHeight","trapezeHeight","bars","calculateColors","flexDirection","RampColors","Color","abs","start","zone","SvgPolygons","trapezeTop","vertexB","vertexA","vertexD","RampSvg","TransparentPolygon","HiddenPolygon","polygon","RampBar","resizableWidth","setResizableWidth","resizableStartHeight","setResizableStartHeight","resizableEndHeight","setResizableEndHeight","withinRange","from","to","ins","Buttons","SubIntervals","RepetitionBar","subIntervals","useMemo","range","flatMap","n","onSize","offSize","precedingSize","repetitionToSteadyIntervals","handleOnChange","values","sub","subInterval","withTooltip","roundingPrecision","DraggableItem","DragHandle","EditorContainer","VerticalLine","Offset","TextEditor","textarea","DeleteButton","faTrashAlt","InstructionEditor","setText","xPosition","setXPosition","showInput","setShowInput","axis","handle","defaultPosition","bounds","left","scale","onStop","position","onDrag","onMouseDown","onDelete","InstructionsList","InstructionsWrap","IntervalBar","GenericBar","onInstructionChange","onInstructionDelete","XAxis","XAxisValue","TimeAxisValue","TimeAxis","hours","Array","v","h","ZoneItem","ZoneAxis","entries","reverse","DistanceAxisValue","DistanceAxis","StyledSelect","select","PaceSelector","RoundButton","ActionButton","createInstruction","fields","ActionsContainer","selectedIntervalPace","selectedIntervalId","faArrowLeft","faArrowRight","faTrash","faCopy","Canvas","Segments","Fader","segmentsRef","useRef","xAxisWidth","setXAxisWidth","toggleSelection","debounce","current","scrollWidth","KeyboardContainer","Header","HeaderRight","savePopupIsVisile","setSavePopupVisibility","isEmpty","newLengthType","faBiking","newSportType","App","path","Boolean","location","hostname","match","persistCombineReducers","storage","store","configureStore","persistStore","ReactDOM","render","StrictMode","navigator","serviceWorker","ready","then","registration","unregister","catch"],"mappings":"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","file":"static/js/main.f7149117.chunk.js","sourcesContent":["module.exports = __webpack_public_path__ + \"static/media/freeride.27f6b079.svg\";","import React from \"react\";\nimport { FontAwesomeIcon } from \"@fortawesome/react-fontawesome\";\nimport { faTimesCircle } from \"@fortawesome/free-solid-svg-icons\";\nimport styled from \"styled-components\";\n\nconst Popup: React.FC<{\n  width: string;\n  height?: string;\n  onClose: () => void;\n}> = (props) => {\n  return (\n    <Background>\n      <Window style={{ width: props.width, height: props.height }}>\n        <CloseButton onClick={props.onClose}>\n          <FontAwesomeIcon icon={faTimesCircle} size=\"lg\" fixedWidth />\n        </CloseButton>\n        {props.children}\n      </Window>\n    </Background>\n  );\n};\n\nconst Background = styled.div`\n  position: fixed;\n  background-color: rgba(0, 0, 0, 0.5);\n  top: 0;\n  bottom: 0;\n  left: 0;\n  right: 0;\n  width: 100%;\n  height: 100%;\n  z-index: 1000;\n`;\n\nconst Window = styled.div`\n  position: fixed;\n  position: fixed;\n  left: 50%;\n  top: 50%;\n  transform: translate(-50%, -50%);\n\n  padding: 10px;\n\n  align-self: center;\n  margin: 0 auto;\n  background-color: white;\n  border-radius: 5px;\n\n  box-shadow: -5px 1px 51px 0px rgba(0, 0, 0, 0.75);\n  -webkit-box-shadow: -5px 1px 51px 0px rgba(0, 0, 0, 0.75);\n  -moz-box-shadow: -5px 1px 51px 0px rgba(0, 0, 0, 0.75);\n\n  overflow-y: scroll;\n`;\n\nconst CloseButton = styled.button`\n  background-color: rgba(0, 0, 0, 0);\n  border: 0;\n  float: right;\n  color: white;\n  position: absolute;\n  top: 10px;\n  right: 10px;\n  color: black;\n`;\n\nexport default Popup;\n","export const GITHUB_URL = \"https://github.com/nene/zwo-editor\";\n","import React from \"react\";\nimport styled from \"styled-components\";\nimport { GITHUB_URL } from \"../../const\";\n\nexport default function Footer() {\n  return (\n    <Container>\n      <List>\n        <Item>\n          Zwift Workout v2.0 (\n          <Hyperlink\n            href={`${GITHUB_URL}/blob/master/LICENSE.md`}\n            target=\"blank\"\n          >\n            open source / MIT license\n          </Hyperlink>\n          )\n        </Item>\n        <Item>\n          <Hyperlink href={`${GITHUB_URL}/issues`} target=\"blank\">\n            Report an issue\n          </Hyperlink>\n        </Item>\n      </List>\n    </Container>\n  );\n}\n\nconst Container = styled.div`\n  padding: 10px;\n  font-size: 12px;\n  text-align: center;\n  background-color: black;\n  color: white;\n`;\n\nconst List = styled.ul`\n  list-style: none;\n  margin: 0;\n  padding: 0;\n`;\n\nconst Item = styled.li`\n  display: inline;\n  padding: 0 10px;\n  margin: 0;\n`;\n\nconst Hyperlink = styled.a`\n  text-decoration: none;\n  color: #00c46a;\n`;\n","import { createAction } from \"@reduxjs/toolkit\";\nimport { Workout } from \"../../types/Workout\";\n\nexport const clearWorkout = createAction(\"workout/clearWorkout\");\nexport const loadWorkout = createAction<Workout>(\"workout/loadWorkout\");\n","import { createSlice, createSelector, PayloadAction } from \"@reduxjs/toolkit\";\nimport { LengthType } from \"../../types/LengthType\";\nimport { SportType } from \"../../types/SportType\";\nimport { RootState } from \"../store\";\nimport { clearWorkout, loadWorkout } from \"./workout\";\n\ninterface MetaState {\n  name: string;\n  author: string;\n  description: string;\n  tags: string[];\n  sportType: SportType;\n  lengthType: LengthType;\n}\n\nconst DEFAULT_NAME = \"Untitled workout\";\n\nconst initialState: MetaState = {\n  name: DEFAULT_NAME,\n  author: \"\",\n  description: \"\",\n  tags: [],\n  sportType: \"bike\",\n  lengthType: \"time\",\n};\n\nconst slice = createSlice({\n  name: \"meta\",\n  initialState,\n  reducers: {\n    setName: (state, action: PayloadAction<string>) => ({\n      ...state,\n      name: action.payload,\n    }),\n    setAuthor: (state, action: PayloadAction<string>) => ({\n      ...state,\n      author: action.payload,\n    }),\n    setDescription: (state, action: PayloadAction<string>) => ({\n      ...state,\n      description: action.payload,\n    }),\n    setTags: (state, action: PayloadAction<string[]>) => ({\n      ...state,\n      tags: action.payload,\n    }),\n    setSportType: (state, action: PayloadAction<SportType>) => ({\n      ...state,\n      sportType: action.payload,\n    }),\n    setLengthType: (state, action: PayloadAction<LengthType>) => ({\n      ...state,\n      lengthType: action.payload,\n    }),\n  },\n  extraReducers: (builder) => {\n    builder\n      .addCase(clearWorkout, (state) => ({\n        ...state,\n        name: DEFAULT_NAME,\n        author: \"\",\n        description: \"\",\n        tags: [],\n      }))\n      .addCase(loadWorkout, (state, { payload }) => ({\n        name: payload.name,\n        author: payload.author,\n        description: payload.description,\n        tags: payload.tags,\n        sportType: payload.sportType,\n        lengthType: payload.lengthType,\n      }));\n  },\n});\n\nexport const reducer = slice.reducer;\nexport const {\n  setName,\n  setAuthor,\n  setDescription,\n  setTags,\n  setSportType,\n  setLengthType,\n} = slice.actions;\n\nconst selectMeta = (state: RootState) => state.meta;\nexport const selectName = createSelector(selectMeta, (m) => m.name);\nexport const selectAuthor = createSelector(selectMeta, (m) => m.author);\nexport const selectDescription = createSelector(\n  selectMeta,\n  (m) => m.description\n);\nexport const selectTags = createSelector(selectMeta, (m) => m.tags);\nexport const selectSportType = createSelector(selectMeta, (m) => m.sportType);\nexport const selectLengthType = createSelector(selectMeta, (m) => m.lengthType);\n","import styled from \"styled-components\";\n\nexport const Label = styled.label`\n  font-size: 10px;\n  text-align: center;\n  padding: 5px;\n`;\n","import React from \"react\";\nimport styled from \"styled-components\";\nimport { Label } from \"../Label/Label\";\n\nconst Checkbox = (props: {\n  label: string;\n  isSelected: boolean;\n  onCheckboxChange: Function;\n}) => (\n  <Container>\n    <CheckboxLabel>\n      <input\n        type=\"checkbox\"\n        name={props.label}\n        checked={props.isSelected}\n        onChange={(e) => props.onCheckboxChange()}\n        className=\"form-check-input\"\n      />\n      {props.label}\n    </CheckboxLabel>\n  </Container>\n);\n\nconst Container = styled.div`\n  display: inline-block;\n  padding: 10px 10px 10px 0;\n`;\n\nconst CheckboxLabel = styled(Label)`\n  font-size: 16px;\n  color: gray;\n`;\n\nexport default Checkbox;\n","import React from \"react\";\nimport { connect } from \"react-redux\";\nimport styled from \"styled-components\";\nimport {\n  selectAuthor,\n  selectDescription,\n  selectName,\n  selectTags,\n  setName,\n  setAuthor,\n  setDescription,\n  setTags,\n} from \"../../rdx/state/meta\";\nimport { RootState } from \"../../rdx/store\";\nimport { ConnectedProps } from \"../../types/ConnectedProps\";\nimport { Label } from \"../Label/Label\";\nimport Checkbox from \"./Checkbox\";\n\nconst DEFAULT_TAGS = [\"Recovery\", \"Intervals\", \"FTP\", \"TT\"];\n\nconst mapStateToProps = (state: RootState) => ({\n  name: selectName(state),\n  author: selectAuthor(state),\n  description: selectDescription(state),\n  tags: selectTags(state),\n});\n\nconst mapDispatchToProps = {\n  setName,\n  setAuthor,\n  setDescription,\n  setTags,\n};\n\ntype SaveFormProps = ConnectedProps<\n  typeof mapStateToProps,\n  typeof mapDispatchToProps\n>;\n\nfunction SaveForm(props: SaveFormProps) {\n  return (\n    <div>\n      <Heading>Workout metadata</Heading>\n      <Field>\n        <FieldLabel htmlFor=\"name\">Workout Title</FieldLabel>\n        <TextInput\n          type=\"text\"\n          id=\"name\"\n          placeholder=\"Workout title\"\n          value={props.name}\n          onChange={(e) => props.setName(e.target.value)}\n        />\n      </Field>\n      <Field>\n        <FieldLabel htmlFor=\"description\">Workout description</FieldLabel>\n        <TextInput\n          as=\"textarea\"\n          id=\"description\"\n          placeholder=\"Workout description\"\n          value={props.description}\n          onChange={(e: React.ChangeEvent<HTMLTextAreaElement>) =>\n            props.setDescription(e.target.value)\n          }\n        />\n      </Field>\n      <Field>\n        <FieldLabel htmlFor=\"author\">Workout Author</FieldLabel>\n        <TextInput\n          type=\"text\"\n          id=\"author\"\n          placeholder=\"Workout Author\"\n          value={props.author}\n          onChange={(e) => props.setAuthor(e.target.value)}\n        />\n      </Field>\n      <Field>\n        <FieldLabel>Workout Tags</FieldLabel>\n        {DEFAULT_TAGS.map((tagName) => (\n          <Checkbox\n            key={tagName}\n            label={tagName}\n            isSelected={props.tags.includes(tagName)}\n            onCheckboxChange={() =>\n              props.setTags(addOrRemoveTag(props.tags, tagName))\n            }\n          />\n        ))}\n      </Field>\n    </div>\n  );\n}\n\nfunction addOrRemoveTag(tags: string[], tagName: string): string[] {\n  if (tags.includes(tagName)) {\n    return tags.filter((item) => item !== tagName);\n  } else {\n    return [...tags, tagName];\n  }\n}\n\nconst Heading = styled.h2`\n  font-size: 34px;\n  font-weight: 200;\n  margin: 0;\n  text-transform: uppercase;\n`;\n\nconst Field = styled.div`\n  margin: 10px 0;\n  width: 100%;\n`;\n\nconst FieldLabel = styled(Label)`\n  font-size: 14px;\n  color: gray;\n  display: block;\n  text-align: left;\n`;\n\nconst TextInput = styled.input`\n  display: block;\n  width: 100%;\n  padding: 10px;\n  margin-top: 10px;\n\n  font-size: 16px;\n  border: 1px solid #aaa;\n  border-radius: 5px;\n  box-sizing: border-box;\n`;\n\nexport default connect(mapStateToProps, mapDispatchToProps)(SaveForm);\n","export enum PaceType {\n  oneMile = 0,\n  fiveKm = 1,\n  tenKm = 2,\n  halfMarathon = 3,\n  marathon = 4,\n}\n","import React from \"react\";\nimport { Helmet } from \"react-helmet\";\n\ninterface HeadProps {\n  name: string;\n  description: string;\n}\n\nconst Head = ({ name, description }: HeadProps) => (\n  <Helmet>\n    <title>\n      {name\n        ? `${name} - Zwift Workout Editor`\n        : \"My Workout - Zwift Workout Editor\"}\n    </title>\n    <meta name=\"description\" content={description} />\n  </Helmet>\n);\n\nexport default Head;\n","// Distances corresponding to each PaceType. In meters.\nexport const runningDistances = [1609.34, 5000, 10000, 21097.5, 42195];\n","import styled from \"styled-components\";\n\nexport const Column = styled.div`\n  display: flex;\n  flex-direction: column;\n`;\n","import React, { useCallback } from \"react\";\nimport TimePicker from \"rc-time-picker\";\nimport \"rc-time-picker/assets/index.css\";\nimport moment from \"moment\";\nimport { RunningTimes } from \"../../types/RunningTimes\";\nimport { PaceType } from \"../../types/PaceType\";\nimport { runningDistances } from \"../../types/runningDistances\";\nimport styled, { createGlobalStyle } from \"styled-components\";\nimport { Column } from \"../Layout/Column\";\nimport { Label } from \"../Label/Label\";\n\ninterface RunningTimesEditorProps {\n  times: RunningTimes;\n  onChange: (times: RunningTimes) => void;\n}\n\nexport default function RunningTimesEditor({\n  times,\n  onChange,\n}: RunningTimesEditorProps) {\n  const estimateRunningTimes = useCallback(() => {\n    onChange(calculateEstimatedTimes(times));\n  }, [times, onChange]);\n\n  const handleInputChange = (pace: PaceType, t: number) => {\n    const timesCopy = [...times];\n    timesCopy[pace] = t;\n    onChange(timesCopy);\n  };\n\n  return (\n    <Container>\n      <RunTimeInput\n        time={times[PaceType.oneMile]}\n        onChange={(t) => handleInputChange(PaceType.oneMile, t)}\n      >\n        1 mile time\n      </RunTimeInput>\n      <RunTimeInput\n        time={times[PaceType.fiveKm]}\n        onChange={(t) => handleInputChange(PaceType.fiveKm, t)}\n      >\n        5 km time\n      </RunTimeInput>\n      <RunTimeInput\n        time={times[PaceType.tenKm]}\n        onChange={(t) => handleInputChange(PaceType.tenKm, t)}\n      >\n        10 km time\n      </RunTimeInput>\n      <RunTimeInput\n        time={times[PaceType.halfMarathon]}\n        onChange={(t) => handleInputChange(PaceType.halfMarathon, t)}\n      >\n        Half marathon time\n      </RunTimeInput>\n      <RunTimeInput\n        time={times[PaceType.marathon]}\n        onChange={(t) => handleInputChange(PaceType.marathon, t)}\n      >\n        Marathon time\n      </RunTimeInput>\n      <Col>\n        <button onClick={estimateRunningTimes} className=\"btn\">\n          Estimate missing times\n        </button>\n      </Col>\n    </Container>\n  );\n}\n\nconst Container = styled.div`\n  display: flex;\n  margin: 0 auto;\n  flex-direction: row;\n  width: 100%;\n  max-width: 1360px;\n`;\n\nconst Col = styled(Column)`\n  padding-right: 10px;\n  align-self: flex-end;\n`;\n\nconst RunTimeInput: React.FC<{\n  time: number;\n  onChange: (time: number) => void;\n}> = ({ time, onChange, children }) => (\n  <Col>\n    <Label>\n      <abbr title=\"hh:mm:ss\">{children}</abbr>\n    </Label>\n    <TimePickerStyleOverrides />\n    <StyledTimePicker\n      value={time === 0 ? undefined : moment.utc(time * 1000)}\n      placeholder=\"00:00:00\"\n      defaultOpenValue={moment(\"00:00:00\")}\n      onChange={(value) =>\n        onChange(\n          value ? moment.duration(value.format(\"HH:mm:ss\")).asSeconds() : 0\n        )\n      }\n    />\n  </Col>\n);\n\nconst TimePickerStyleOverrides = createGlobalStyle`\n  .rc-time-picker-panel-input {\n    font-size: 18px;  \n    font-family: monospace;\n  }\n\n  .rc-time-picker-panel-select > ul > li {\n    font-size: 16px;  \n    font-family: monospace;\n  }\n`;\n\nconst StyledTimePicker = styled(TimePicker)`\n  width: 120px;\n\n  & > input {\n    font-size: 18px;\n    font-family: monospace;\n    color: black;\n  }\n`;\n\nconst defaultDistance = 1609.34; // one mile in meters\nconst defaultTime = 11 * 60 + 20; // 00:11:20\n\nexport function calculateEstimatedTimes(timesOrig: number[]): number[] {\n  const distances = [...runningDistances, defaultDistance];\n  const times = [...timesOrig, defaultTime];\n  const estimatedTimes: number[] = [];\n\n  timesOrig.forEach((value, i) => {\n    if (!value) {\n      for (let index = 0; index < times.length; index++) {\n        // found a time\n        if (times[index]) {\n          // Predictions calculated using Riegel's formula: T2 = T1 x (D2/D1) x 1.06\n          // T1 = T2 / (1.06 * (D2/D1))\n          estimatedTimes[i] =\n            times[index] * (distances[i] / distances[index]) * 1.06;\n          break;\n        }\n      }\n    } else {\n      estimatedTimes[i] = value;\n    }\n  });\n\n  return estimatedTimes;\n}\n","import { IconProp } from \"@fortawesome/fontawesome-svg-core\";\nimport { FontAwesomeIcon } from \"@fortawesome/react-fontawesome\";\nimport React from \"react\";\nimport Switch from \"react-switch\";\nimport styled from \"styled-components\";\nimport { Column } from \"../Layout/Column\";\nimport { Label } from \"../Label/Label\";\n\ninterface LeftRightToggleProps<TLeft, TRight> {\n  label: string;\n  leftValue: TLeft;\n  rightValue: TRight;\n  leftIcon: IconProp;\n  rightIcon: IconProp;\n  selected: TLeft | TRight;\n  onChange: (selected: TLeft | TRight) => void;\n}\n\nconst COLOR = \"#00C46A\";\n\nconst LeftRightToggle = <TLeft, TRight>({\n  label,\n  leftValue,\n  rightValue,\n  leftIcon,\n  rightIcon,\n  selected,\n  onChange,\n}: LeftRightToggleProps<TLeft, TRight>) => (\n  <Col>\n    <Label>{label}</Label>\n    <LeftRight>\n      <ToggleIcon\n        $active={selected === leftValue}\n        icon={leftIcon}\n        size=\"lg\"\n        fixedWidth\n      />\n      <Switch\n        onChange={() =>\n          onChange(selected === leftValue ? rightValue : leftValue)\n        }\n        checked={selected === rightValue}\n        checkedIcon={false}\n        uncheckedIcon={false}\n        onColor={COLOR}\n        offColor={COLOR}\n      />\n      <ToggleIcon\n        $active={selected === rightValue}\n        icon={rightIcon}\n        size=\"lg\"\n        fixedWidth\n      />\n    </LeftRight>\n  </Col>\n);\n\nconst Col = styled(Column)`\n  max-width: 120px;\n  padding: 0 10px;\n`;\n\nconst LeftRight = styled.div`\n  display: flex;\n  flex-direction: row;\n  color: lightgray;\n`;\n\nconst ToggleIcon = styled(FontAwesomeIcon)<{ $active: boolean }>`\n  padding: 5px;\n  color: ${({ $active }) => ($active ? \"#00C46A\" : \"inherit\")};\n`;\n\nexport default LeftRightToggle;\n","import React from \"react\";\n\n// Component which captures key press events\n\ninterface KeyboardProps {\n  className?: string;\n  onBackspacePress: () => void;\n  onDownPress: () => void;\n  onUpPress: () => void;\n  onLeftPress: () => void;\n  onRightPress: () => void;\n}\n\nconst Keyboard: React.FC<KeyboardProps> = (props) => {\n  function handleKeyPress(event: React.KeyboardEvent<HTMLDivElement>) {\n    if (\n      event.target instanceof HTMLInputElement ||\n      event.target instanceof HTMLTextAreaElement\n    ) {\n      // Ignore key presses coming from input elements\n      return;\n    }\n\n    switch (event.keyCode) {\n      case 8:\n        props.onBackspacePress();\n        // Prevent navigation to previous page\n        event.preventDefault();\n        break;\n      case 37:\n        props.onLeftPress();\n        break;\n      case 39:\n        props.onRightPress();\n        break;\n      case 38:\n        props.onUpPress();\n        break;\n      case 40:\n        props.onDownPress();\n        break;\n    }\n  }\n\n  return (\n    // Adding tabIndex allows div element to receive keyboard events\n    <div className={props.className} onKeyDown={handleKeyPress} tabIndex={0}>\n      {props.children}\n    </div>\n  );\n};\n\nexport default Keyboard;\n","/**\n * Distance & Duration\n *\n * These types are just wrappers around Number,\n * to discriminate between two kinds of lengths.\n *\n * Previously these were implemented as classes,\n * which made interop with Redux problematic,\n * especially because it complicated the serialization & deserialization\n * when saving Redux state to localStorage.\n */\nexport type Distance = { meters: number };\nexport type Duration = { seconds: number };\nexport type Length = Distance | Duration;\n\nexport const Distance = (meters: number): Distance => ({ meters });\nexport const Duration = (seconds: number): Duration => ({ seconds });\n\nexport const isDistance = (obj: Length): obj is Distance => \"meters\" in obj;\nexport const isDuration = (obj: Length): obj is Duration => \"seconds\" in obj;\n","import { v4 as uuidv4 } from \"uuid\";\nimport { PaceType } from \"../types/PaceType\";\nimport {\n  FreeInterval,\n  Interval,\n  RampInterval,\n  RepetitionInterval,\n  SteadyInterval,\n} from \"../types/Interval\";\nimport { Distance, Duration, Length } from \"../types/Length\";\nimport { WorkoutMode } from \"../modes/WorkoutMode\";\n\nconst defaultDuration = Duration(300);\nconst defaultDistance = Distance(1000);\nconst defaultIntensity = 1.0;\nconst defaultPace = PaceType.oneMile;\n\nconst defaultLength = (mode: WorkoutMode): Length =>\n  mode.lengthType === \"time\" ? defaultDuration : defaultDistance;\n\nexport default {\n  steady(interval: Partial<SteadyInterval>, mode: WorkoutMode): SteadyInterval {\n    return {\n      type: \"steady\",\n      id: uuidv4(),\n      length: defaultLength(mode),\n      intensity: defaultIntensity,\n      cadence: undefined,\n      pace: defaultPace,\n      instructions: [],\n      ...interval,\n    };\n  },\n\n  ramp(interval: Partial<RampInterval>, mode: WorkoutMode): RampInterval {\n    return {\n      type: \"ramp\",\n      id: uuidv4(),\n      length: defaultLength(mode),\n      startIntensity: defaultIntensity / 2,\n      endIntensity: defaultIntensity,\n      cadence: undefined,\n      pace: defaultPace,\n      instructions: [],\n      ...interval,\n    };\n  },\n\n  free(interval: Partial<FreeInterval>, mode: WorkoutMode): FreeInterval {\n    return {\n      type: \"free\",\n      id: uuidv4(),\n      length: defaultLength(mode),\n      cadence: undefined,\n      instructions: [],\n      ...interval,\n    };\n  },\n\n  repetition(\n    interval: Partial<RepetitionInterval>,\n    mode: WorkoutMode\n  ): RepetitionInterval {\n    return {\n      type: \"repetition\",\n      id: uuidv4(),\n      repeat: 3,\n      onLength: mode.lengthType === \"time\" ? Duration(30) : Distance(200),\n      offLength: mode.lengthType === \"time\" ? Duration(120) : Distance(200),\n      onIntensity: defaultIntensity,\n      offIntensity: defaultIntensity / 2,\n      onCadence: undefined,\n      offCadence: undefined,\n      pace: defaultPace,\n      instructions: [],\n      ...interval,\n    };\n  },\n\n  // Creates a copy of the interval, with a new ID\n  clone(interval: Interval): Interval {\n    return { ...interval, id: uuidv4() };\n  },\n};\n","export function floor(x: number, roundTo: number): number {\n  return Math.floor(x / roundTo) * roundTo;\n}\n","import {\n  distanceMultiplier,\n  durationMultiplier,\n  intensityMultiplier,\n} from \"../components/Bar/multipliers\";\nimport { Distance, Duration, isDuration, Length } from \"../types/Length\";\nimport { LengthType } from \"../types/LengthType\";\nimport { SportType } from \"../types/SportType\";\nimport { floor } from \"../utils/math\";\n\ninterface Precision {\n  meters: number;\n  seconds: number;\n}\n\n// Base class for duration-based Mode classes\nexport default abstract class Mode {\n  public abstract readonly sportType: SportType;\n  public abstract readonly lengthType: LengthType;\n\n  lengthToWidth(length: Length): number {\n    if (isDuration(length)) {\n      return length.seconds / durationMultiplier;\n    } else {\n      return length.meters / distanceMultiplier;\n    }\n  }\n\n  widthToLength(\n    width: number,\n    precision: Precision = { meters: 200, seconds: 5 }\n  ): Length {\n    if (this.lengthType === \"time\") {\n      return Duration(floor(width * durationMultiplier, precision.seconds));\n    } else {\n      return Distance(floor(width * distanceMultiplier, precision.meters));\n    }\n  }\n\n  // Returns the underlyng number within Length type\n  fromLength(length: Length): number {\n    return isDuration(length) ? length.seconds : length.meters;\n  }\n\n  intensityToHeight(intensity: number): number {\n    return intensity * intensityMultiplier;\n  }\n\n  heightToIntensity(height: number): number {\n    return height / intensityMultiplier;\n  }\n}\n","export const intensityMultiplier = 250;\nexport const durationMultiplier = 3;\nexport const distanceMultiplier = 10;\n","import { LengthType } from \"../types/LengthType\";\nimport { Duration, isDuration, Length } from \"../types/Length\";\nimport { SportType } from \"../types/SportType\";\nimport Mode from \"./Mode\";\nimport { Interval } from \"../types/Interval\";\n\nexport default class BikeMode extends Mode {\n  private ftp: number;\n  private weight: number;\n  public readonly sportType: SportType = \"bike\";\n  public readonly lengthType: LengthType = \"time\";\n\n  constructor(ftp: number, weight: number) {\n    super();\n    this.ftp = ftp;\n    this.weight = weight;\n  }\n\n  power(intensity: number): number {\n    return intensity * this.ftp;\n  }\n\n  wkg(intensity: number): number {\n    return this.power(intensity) / this.weight;\n  }\n\n  duration(length: Length): Duration {\n    if (isDuration(length)) {\n      return length;\n    } else {\n      throw new Error(\"Unexpected length:Distance encountered in BikeMode\");\n    }\n  }\n\n  intervalDuration(interval: Interval): Duration {\n    switch (interval.type) {\n      case \"free\":\n      case \"steady\":\n      case \"ramp\":\n        return this.duration(interval.length);\n      case \"repetition\": {\n        const onDuration = this.duration(interval.onLength);\n        const offDuration = this.duration(interval.offLength);\n        return Duration(\n          interval.repeat * (onDuration.seconds + offDuration.seconds)\n        );\n      }\n    }\n  }\n\n  intervalLength(interval: Interval): Length {\n    return this.intervalDuration(interval);\n  }\n}\n","import { SportType } from \"../types/SportType\";\nimport { PaceType } from \"../types/PaceType\";\nimport { RunningTimes } from \"../types/RunningTimes\";\nimport { runningDistances } from \"../types/runningDistances\";\nimport { LengthType } from \"../types/LengthType\";\nimport Mode from \"./Mode\";\nimport {\n  Distance,\n  Duration,\n  isDistance,\n  isDuration,\n  Length,\n} from \"../types/Length\";\nimport { Interval } from \"../types/Interval\";\n\nexport default class RunMode extends Mode {\n  private runningTimes: RunningTimes;\n  public readonly sportType: SportType = \"run\";\n  public readonly lengthType: LengthType;\n\n  constructor(runningTimes: RunningTimes, lengthType: LengthType) {\n    super();\n    this.runningTimes = runningTimes;\n    this.lengthType = lengthType;\n  }\n\n  speed(intensity: number, pace: PaceType): number {\n    return (runningDistances[pace] / this.runningTimes[pace]) * intensity; // in m/s\n  }\n\n  distance(length: Length, intensity: number, pace: PaceType): Distance {\n    if (isDuration(length)) {\n      return Distance(this.speed(intensity, pace) * length.seconds);\n    } else {\n      return length;\n    }\n  }\n\n  duration(length: Length, intensity: number, pace: PaceType): Duration {\n    if (isDuration(length)) {\n      return length;\n    } else {\n      return Duration(length.meters / this.speed(intensity, pace));\n    }\n  }\n\n  intervalDistance(interval: Interval): Distance {\n    switch (interval.type) {\n      case \"free\": {\n        return isDistance(interval.length) ? interval.length : Distance(0);\n      }\n      case \"steady\": {\n        return this.distance(\n          interval.length,\n          interval.intensity,\n          interval.pace\n        );\n      }\n      case \"ramp\": {\n        return this.distance(\n          interval.length,\n          (interval.startIntensity + interval.endIntensity) / 2,\n          interval.pace\n        );\n      }\n      case \"repetition\": {\n        const onDistance = this.distance(\n          interval.onLength,\n          interval.onIntensity,\n          interval.pace\n        );\n        const offDistance = this.distance(\n          interval.offLength,\n          interval.offIntensity,\n          interval.pace\n        );\n        return Distance(\n          interval.repeat * (onDistance.meters + offDistance.meters)\n        );\n      }\n    }\n  }\n\n  intervalDuration(interval: Interval): Duration {\n    switch (interval.type) {\n      case \"free\":\n        return isDuration(interval.length) ? interval.length : Duration(0);\n      case \"steady\":\n        return this.duration(\n          interval.length,\n          interval.intensity,\n          interval.pace\n        );\n      case \"ramp\":\n        return this.duration(\n          interval.length,\n          (interval.startIntensity + interval.endIntensity) / 2,\n          interval.pace\n        );\n      case \"repetition\": {\n        const onDuration = this.duration(\n          interval.onLength,\n          interval.onIntensity,\n          interval.pace\n        );\n        const offDuration = this.duration(\n          interval.offLength,\n          interval.offIntensity,\n          interval.pace\n        );\n        return Duration(\n          interval.repeat * (onDuration.seconds + offDuration.seconds)\n        );\n      }\n    }\n  }\n\n  intervalLength(interval: Interval): Length {\n    if (this.lengthType === \"time\") {\n      return this.intervalDuration(interval);\n    } else {\n      return this.intervalDistance(interval);\n    }\n  }\n}\n","import RunMode from \"../modes/RunMode\";\nimport { Interval } from \"../types/Interval\";\nimport { sum } from \"ramda\";\nimport { Distance } from \"../types/Length\";\n\nexport function workoutDistance(\n  intervals: Interval[],\n  mode: RunMode\n): Distance {\n  return Distance(\n    sum(\n      intervals\n        .map((interval) => mode.intervalDistance(interval))\n        .map((d) => d.meters)\n    )\n  );\n}\n","import { Interval } from \"../types/Interval\";\nimport { sum } from \"ramda\";\nimport { WorkoutMode } from \"../modes/WorkoutMode\";\nimport { Duration } from \"../types/Length\";\n\n// calculate total time\nexport function workoutDuration(\n  intervals: Interval[],\n  mode: WorkoutMode\n): Duration {\n  return Duration(\n    sum(\n      intervals\n        .map((interval) => mode.intervalDuration(interval))\n        .map((d) => d.seconds)\n    )\n  );\n}\n","import moment from \"moment\";\nimport \"moment-duration-format\";\nimport { Distance, Duration } from \"../types/Length\";\nimport { PaceType } from \"../types/PaceType\";\n\nexport const duration = (duration: Duration): string =>\n  moment.duration(duration.seconds, \"seconds\").format(\"mm:ss\", { trim: false });\n\nexport const distance = (distance: Distance): string =>\n  Math.round(distance.meters) + \" m\";\n\nexport const power = (power: number): string => Math.round(power) + \" W\";\n\nexport const wkg = (wkg: number): string => Math.round(wkg * 10) / 10 + \" W/kg\";\n\nexport const percentage = (intensity: number): string =>\n  Math.round(intensity * 100) + \"%\";\n\nexport const shortPaceName = (pace: PaceType): string => {\n  const paces = [\"1M\", \"5K\", \"10K\", \"HM\", \"M\"];\n  return paces[pace] + \" pace\";\n};\n\nexport const runningPace = (speed: number): string => {\n  if (speed === 0) {\n    return \"\";\n  }\n  const secondsPerKm = 1000 / speed;\n  return moment.duration(secondsPerKm, \"seconds\").format(\"m:ss\") + \"/km\";\n};\n","import React from \"react\";\nimport styled from \"styled-components\";\nimport intervalFactory from \"../../interval/intervalFactory\";\nimport BikeMode from \"../../modes/BikeMode\";\nimport RunMode from \"../../modes/RunMode\";\nimport { WorkoutMode } from \"../../modes/WorkoutMode\";\nimport { Interval } from \"../../types/Interval\";\nimport { workoutDistance } from \"../../utils/distance\";\nimport { workoutDuration } from \"../../utils/duration\";\nimport * as format from \"../../utils/format\";\nimport { Column } from \"../Layout/Column\";\nimport { Label } from \"../Label/Label\";\n\n// Displays summary statistics: workout length and TSS\n\ninterface StatsProps {\n  intervals: Interval[];\n  ftp: number;\n  mode: WorkoutMode;\n}\n\nconst Stats: React.FC<StatsProps> = ({ intervals, ftp, mode }) => {\n  return (\n    <>\n      <Col>\n        <Label>Workout Time</Label>\n        <TextInput\n          value={format.duration(workoutDuration(intervals, mode))}\n          disabled\n        />\n      </Col>\n      {mode instanceof RunMode && (\n        <Col>\n          <Label>Workout Distance</Label>\n          <TextInput\n            value={format.distance(workoutDistance(intervals, mode))}\n            disabled\n          />\n        </Col>\n      )}\n      {mode instanceof BikeMode && (\n        <Col>\n          <Label>TSS</Label>\n          <TextInput value={getStressScore(intervals, ftp, mode)} disabled />\n        </Col>\n      )}\n    </>\n  );\n};\n\nconst Col = styled(Column)`\n  max-width: 120px;\n  padding: 0 10px;\n`;\n\nconst TextInput = styled.input`\n  font-size: 20px;\n  border: 1px solid lightgray;\n  text-align: center;\n`;\n\nfunction getStressScore(\n  intervals: Interval[],\n  ftp: number,\n  mode: BikeMode\n): string {\n  // TSS = [(sec x NP x IF)/(FTP x 3600)] x 100\n  let tss = 0;\n\n  intervals.map((interval) => {\n    if (interval.type === \"steady\" && interval.intensity) {\n      const np = interval.intensity * ftp;\n      const iff = interval.intensity;\n\n      tss += mode.intervalDuration(interval).seconds * np * iff;\n    }\n    if (\n      interval.type === \"ramp\" &&\n      interval.startIntensity &&\n      interval.endIntensity\n    ) {\n      const np = ((interval.startIntensity + interval.endIntensity) / 2) * ftp;\n      const iff = (interval.startIntensity + interval.endIntensity) / 2;\n\n      tss += mode.intervalDuration(interval).seconds * np * iff;\n    }\n    if (\n      interval.type === \"repetition\" &&\n      interval.onIntensity &&\n      interval.offIntensity &&\n      interval.repeat &&\n      interval.onLength &&\n      interval.offLength\n    ) {\n      const npOn = interval.onIntensity * ftp;\n      const iffOn = interval.onIntensity;\n\n      const onDuration = mode.intervalDuration(\n        intervalFactory.steady(\n          {\n            length: interval.onLength,\n            intensity: interval.onIntensity,\n          },\n          mode\n        )\n      );\n      tss += onDuration.seconds * interval.repeat * npOn * iffOn;\n\n      const npOff = interval.offIntensity * ftp;\n      const iffOff = interval.offIntensity;\n\n      const offDuration = mode.intervalDuration(\n        intervalFactory.steady(\n          {\n            length: interval.offLength,\n            intensity: interval.offIntensity,\n          },\n          mode\n        )\n      );\n      tss += offDuration.seconds * interval.repeat * npOff * iffOff;\n    }\n    return false;\n  });\n  return ((tss / (ftp * 3600)) * 100).toFixed(0);\n}\n\nexport default Stats;\n","import { faEdit } from \"@fortawesome/free-solid-svg-icons\";\nimport { FontAwesomeIcon } from \"@fortawesome/react-fontawesome\";\nimport React from \"react\";\nimport styled from \"styled-components\";\n\n// Displays workut name, description & author\n\ninterface TitleProps {\n  name: string;\n  description: string;\n  author: string;\n  onClick: () => void;\n}\n\nconst Title: React.FC<TitleProps> = ({\n  name,\n  author,\n  description,\n  onClick,\n}) => {\n  return (\n    <Container onClick={onClick}>\n      <Heading>\n        {name} <StyledIcon icon={faEdit} />\n      </Heading>\n      <div>{description}</div>\n      <Author>{author ? `by ${author}` : \"\"}</Author>\n    </Container>\n  );\n};\n\nconst Container = styled.div`\n  flex: 1;\n  cursor: pointer;\n`;\n\nconst Heading = styled.h1`\n  padding: 10px 0;\n  margin: 0;\n`;\n\nconst StyledIcon = styled(FontAwesomeIcon)`\n  margin-left: 10px;\n  font-size: 21px;\n  color: gray;\n`;\n\nconst Author = styled.p`\n  font-style: italic;\n  margin: 10px 0 0 0;\n`;\n\nexport default Title;\n","export enum ZoneColor {\n  GRAY = \"#807F80\",\n  BLUE = \"#0E90D4\",\n  GREEN = \"#00C46A\",\n  YELLOW = \"#FFCB00\",\n  ORANGE = \"#FF6430\",\n  RED = \"#E90000\",\n  WHITE = \"#FFFFFF\",\n}\n\nexport const Zones = {\n  Z1: {\n    min: 0.1,\n    max: 0.605,\n  },\n  Z2: {\n    min: 0.605,\n    max: 0.763,\n  },\n  Z3: {\n    min: 0.763,\n    max: 0.901,\n  },\n  Z4: {\n    min: 0.901,\n    max: 1.053,\n  },\n  Z5: {\n    min: 1.053,\n    max: 1.194,\n  },\n  Z6: {\n    min: 1.194,\n    max: 2.0,\n  },\n};\n\nexport const ZonesArray = [\n  [Zones.Z1.min, Zones.Z1.max],\n  [Zones.Z2.min, Zones.Z2.max],\n  [Zones.Z3.min, Zones.Z3.max],\n  [Zones.Z4.min, Zones.Z4.max],\n  [Zones.Z5.min, Zones.Z5.max],\n  [Zones.Z6.min, Zones.Z6.max],\n];\n\nexport const zoneColor = (intensity: number): ZoneColor => {\n  if (intensity < Zones.Z1.max) {\n    return ZoneColor.GRAY;\n  } else if (intensity < Zones.Z2.max) {\n    return ZoneColor.BLUE;\n  } else if (intensity < Zones.Z3.max) {\n    return ZoneColor.GREEN;\n  } else if (intensity < Zones.Z4.max) {\n    return ZoneColor.YELLOW;\n  } else if (intensity < Zones.Z5.max) {\n    return ZoneColor.ORANGE;\n  } else {\n    return ZoneColor.RED;\n  }\n};\n","import { createSlice, createSelector, PayloadAction } from \"@reduxjs/toolkit\";\nimport { RunningTimes } from \"../../types/RunningTimes\";\nimport { RootState } from \"../store\";\n\ninterface AthleteState {\n  ftp: number;\n  weight: number;\n  runningTimes: RunningTimes;\n}\n\nconst initialState: AthleteState = {\n  ftp: 200,\n  weight: 75,\n  runningTimes: [0, 0, 0, 0, 0],\n};\n\nconst slice = createSlice({\n  name: \"athlete\",\n  initialState,\n  reducers: {\n    setFtp: (state, action: PayloadAction<number>) => ({\n      ...state,\n      ftp: action.payload,\n    }),\n    setWeight: (state, action: PayloadAction<number>) => ({\n      ...state,\n      weight: action.payload,\n    }),\n    setRunningTimes: (state, action: PayloadAction<number[]>) => ({\n      ...state,\n      runningTimes: action.payload,\n    }),\n  },\n});\n\nexport const reducer = slice.reducer;\nexport const { setFtp, setWeight, setRunningTimes } = slice.actions;\n\nconst selectAthlete = (state: RootState) => state.athlete;\nexport const selectFtp = createSelector(selectAthlete, (a) => a.ftp);\nexport const selectWeight = createSelector(selectAthlete, (a) => a.weight);\nexport const selectRunningTimes = createSelector(\n  selectAthlete,\n  (a) => a.runningTimes\n);\n","import { Zones } from \"../types/Zones\";\nimport { Interval } from \"../types/Interval\";\nimport { Duration } from \"../types/Length\";\nimport { WorkoutMode } from \"../modes/WorkoutMode\";\nimport { move, propEq, update } from \"ramda\";\n\n// Helpers for transforming intervals array\n\nfunction updateById(\n  id: string,\n  transform: (interval: Interval) => Interval,\n  intervals: Interval[]\n): Interval[] {\n  const index = intervals.findIndex(propEq(\"id\", id));\n  if (index === -1) {\n    return intervals;\n  }\n\n  return update(index, transform(intervals[index]), intervals);\n}\n\nexport function updateIntervalDuration(\n  id: string,\n  dDuration: Duration,\n  intervals: Interval[],\n  mode: WorkoutMode\n): Interval[] {\n  return updateById(\n    id,\n    (interval) => {\n      if (interval.type === \"steady\") {\n        const seconds =\n          mode.intervalDuration(interval).seconds + dDuration.seconds;\n        if (seconds > 0) {\n          return { ...interval, length: Duration(seconds) };\n        }\n      }\n      return interval;\n    },\n    intervals\n  );\n}\n\nexport function updateIntervalIntensity(\n  id: string,\n  dIntensity: number,\n  intervals: Interval[]\n): Interval[] {\n  return updateById(\n    id,\n    (interval) => {\n      if (interval.type === \"steady\") {\n        const intensity = interval.intensity + dIntensity;\n        if (intensity > Zones.Z1.min) {\n          return { ...interval, intensity };\n        }\n      }\n      return interval;\n    },\n    intervals\n  );\n}\n\nexport function moveInterval(\n  id: string,\n  direction: -1 | 1,\n  intervals: Interval[]\n): Interval[] {\n  const oldIndex = intervals.findIndex(propEq(\"id\", id));\n  const newIndex = oldIndex + direction;\n\n  if (oldIndex < 0 || newIndex < 0 || newIndex >= intervals.length) {\n    return intervals;\n  }\n\n  return move(oldIndex, newIndex, intervals);\n}\n","import { propEq, update } from \"ramda\";\n\n// Replaces element in array with item having the same id\nexport function replaceById<T extends { id: string }>(\n  item: T,\n  array: T[]\n): T[] {\n  const index = array.findIndex(propEq(\"id\", item.id));\n  return index === -1 ? array : update(index, item, array);\n}\n","import { createSlice, PayloadAction } from \"@reduxjs/toolkit\";\nimport { RootState } from \"../store\";\n\nconst slice = createSlice({\n  name: \"selectedId\",\n  initialState: null as string | null,\n  reducers: {\n    setSelectedId: (state, { payload }: PayloadAction<string>) => payload,\n    clearSelection: () => null,\n  },\n});\n\nexport const reducer = slice.reducer;\nexport const { setSelectedId, clearSelection } = slice.actions;\n\nexport const selectSelectedId = (state: RootState) =>\n  state.selectedId || undefined;\n","import { createSelector } from \"@reduxjs/toolkit\";\nimport createMode from \"../../modes/createMode\";\nimport { selectFtp, selectRunningTimes, selectWeight } from \"./athlete\";\nimport { selectLengthType, selectSportType } from \"./meta\";\n\nexport const selectMode = createSelector(\n  selectSportType,\n  selectFtp,\n  selectWeight,\n  selectRunningTimes,\n  selectLengthType,\n  (sportType, ftp, weight, runningTimes, lengthType) => {\n    return createMode({ sportType, ftp, weight, runningTimes, lengthType });\n  }\n);\n","import { LengthType } from \"../types/LengthType\";\nimport { RunningTimes } from \"../types/RunningTimes\";\nimport { SportType } from \"../types/SportType\";\nimport BikeMode from \"./BikeMode\";\nimport RunMode from \"./RunMode\";\nimport { WorkoutMode } from \"./WorkoutMode\";\n\ninterface CreateModeParams {\n  sportType: SportType;\n  ftp: number;\n  weight: number;\n  runningTimes: RunningTimes;\n  lengthType: LengthType;\n}\n\n// Creates appropriate type of mode for current sport type\nexport default function createMode({\n  sportType,\n  ftp,\n  weight,\n  runningTimes,\n  lengthType,\n}: CreateModeParams): WorkoutMode {\n  switch (sportType) {\n    case \"bike\":\n      return new BikeMode(ftp, weight);\n    case \"run\":\n      return new RunMode(runningTimes, lengthType);\n  }\n}\n","import {\n  createAsyncThunk,\n  createSelector,\n  createSlice,\n  PayloadAction,\n} from \"@reduxjs/toolkit\";\nimport { Interval } from \"../../types/Interval\";\nimport { RootState } from \"../store\";\nimport { clearWorkout, loadWorkout } from \"./workout\";\nimport {\n  updateIntervalIntensity,\n  updateIntervalDuration,\n  moveInterval,\n} from \"../../interval/intervalUtils\";\nimport { replaceById } from \"../../utils/array\";\nimport { clearSelection, selectSelectedId } from \"./selectedId\";\nimport intervalFactory from \"../../interval/intervalFactory\";\nimport { Duration } from \"../../types/Length\";\nimport { selectMode } from \"./mode\";\nimport { PaceType } from \"../../types/PaceType\";\nimport { propEq } from \"ramda\";\nimport { Instruction } from \"../../types/Instruction\";\n\nconst initialState: Interval[] = [];\n\nconst slice = createSlice({\n  name: \"intervals\",\n  initialState,\n  reducers: {\n    setIntervals: (state, action: PayloadAction<Interval[]>) => action.payload,\n    addInterval: (state, action: PayloadAction<Interval>) => [\n      ...state,\n      action.payload,\n    ],\n    updateInterval: (intervals, { payload }: PayloadAction<Interval>) =>\n      replaceById(payload, intervals),\n    removeInterval: (\n      intervals,\n      { payload: id }: PayloadAction<string | undefined>\n    ) => intervals.filter((item) => item.id !== id),\n    removeInstruction: (\n      intervals,\n      { payload }: PayloadAction<{ intervalId: string; instructionId: string }>\n    ) => {\n      return updateInstructionsField({\n        intervals,\n        intervalId: payload.intervalId,\n        update: (instructions) =>\n          instructions.filter((i) => i.id !== payload.instructionId),\n      });\n    },\n    updateInstruction: (\n      intervals,\n      {\n        payload,\n      }: PayloadAction<{ intervalId: string; instruction: Instruction }>\n    ) => {\n      return updateInstructionsField({\n        intervals,\n        intervalId: payload.intervalId,\n        update: (instructions) =>\n          replaceById(payload.instruction, instructions),\n      });\n    },\n    addInstruction: (\n      intervals,\n      {\n        payload,\n      }: PayloadAction<{ intervalId: string; instruction: Instruction }>\n    ) => {\n      return updateInstructionsField({\n        intervals,\n        intervalId: payload.intervalId,\n        update: (instructions) => [...instructions, payload.instruction],\n      });\n    },\n  },\n  extraReducers: (builder) => {\n    builder\n      .addCase(clearWorkout, () => [])\n      .addCase(loadWorkout, (state, { payload }) => payload.intervals);\n  },\n});\n\ntype UpdateInstructionsFieldParams = {\n  intervalId: string;\n  update: (instructions: Instruction[]) => Instruction[];\n  intervals: Interval[];\n};\n\nconst updateInstructionsField = ({\n  intervals,\n  intervalId,\n  update,\n}: UpdateInstructionsFieldParams): Interval[] => {\n  const interval = intervals.find(propEq(\"id\", intervalId));\n  if (!interval) {\n    return intervals;\n  }\n  return replaceById(\n    {\n      ...interval,\n      instructions: update(interval.instructions),\n    },\n    intervals\n  );\n};\n\nexport const reducer = slice.reducer;\nexport const {\n  setIntervals,\n  addInterval,\n  updateInterval,\n  removeInterval,\n  removeInstruction,\n  updateInstruction,\n  addInstruction,\n} = slice.actions;\n\nexport const removeSelectedInterval = createAsyncThunk(\n  \"intervals/removeSelectedInterval\",\n  (_: void, { getState, dispatch }) => {\n    const selectedId = selectSelectedId(getState() as RootState);\n    dispatch(removeInterval(selectedId));\n    dispatch(clearSelection());\n  }\n);\n\nexport const duplicateSelectedInterval = createAsyncThunk(\n  \"intervals/duplicateSelectedInterval\",\n  (_: void, { getState, dispatch }) => {\n    const interval = selectSelectedInterval(getState() as RootState);\n    if (interval) {\n      dispatch(addInterval(intervalFactory.clone(interval)));\n    }\n    dispatch(clearSelection());\n  }\n);\n\nexport const adjustSelectedIntervalIntensity = createAsyncThunk(\n  \"intervals/adjustSelectedIntervalIntensity\",\n  (amount: number, { getState, dispatch }) => {\n    const selectedId = selectSelectedId(getState() as RootState);\n    if (selectedId) {\n      const intervals = selectIntervals(getState() as RootState);\n      dispatch(\n        setIntervals(updateIntervalIntensity(selectedId, amount, intervals))\n      );\n    }\n  }\n);\n\nexport const adjustSelectedIntervalDuration = createAsyncThunk(\n  \"intervals/adjustSelectedIntervalDuration\",\n  (amount: Duration, { getState, dispatch }) => {\n    const selectedId = selectSelectedId(getState() as RootState);\n    if (selectedId) {\n      const intervals = selectIntervals(getState() as RootState);\n      const mode = selectMode(getState() as RootState);\n      dispatch(\n        setIntervals(\n          updateIntervalDuration(selectedId, amount, intervals, mode)\n        )\n      );\n    }\n  }\n);\n\nexport const moveSelectedInterval = createAsyncThunk(\n  \"intervals/moveSelectedInterval\",\n  (direction: -1 | 1, { getState, dispatch }) => {\n    const selectedId = selectSelectedId(getState() as RootState);\n    if (selectedId) {\n      const intervals = selectIntervals(getState() as RootState);\n      dispatch(setIntervals(moveInterval(selectedId, direction, intervals)));\n    }\n  }\n);\n\nexport const setSelectedIntervalPace = createAsyncThunk(\n  \"intervals/setSelectedIntervalPace\",\n  (pace: PaceType, { getState, dispatch }) => {\n    const interval = selectSelectedInterval(getState() as RootState);\n    if (interval && interval.type === \"steady\") {\n      // TODO: Only steady?\n      dispatch(updateInterval({ ...interval, pace }));\n    }\n  }\n);\n\nexport const selectIntervals = (state: RootState) => state.intervals;\n\nexport const selectSelectedInterval = createSelector(\n  selectSelectedId,\n  selectIntervals,\n  (selectedId, intervals) => {\n    return intervals.find((interval) => interval.id === selectedId);\n  }\n);\n\nexport const selectSelectedIntervalPace = createSelector(\n  selectSelectedInterval,\n  (interval) => {\n    return interval && interval.type !== \"free\" ? interval.pace : undefined;\n  }\n);\n\nexport const selectSelectedIntervalId = createSelector(\n  selectSelectedInterval,\n  (interval) => interval?.id\n);\n","function _extends() { _extends = Object.assign || function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; }; return _extends.apply(this, arguments); }\n\nfunction _objectWithoutProperties(source, excluded) { if (source == null) return {}; var target = _objectWithoutPropertiesLoose(source, excluded); var key, i; if (Object.getOwnPropertySymbols) { var sourceSymbolKeys = Object.getOwnPropertySymbols(source); for (i = 0; i < sourceSymbolKeys.length; i++) { key = sourceSymbolKeys[i]; if (excluded.indexOf(key) >= 0) continue; if (!Object.prototype.propertyIsEnumerable.call(source, key)) continue; target[key] = source[key]; } } return target; }\n\nfunction _objectWithoutPropertiesLoose(source, excluded) { if (source == null) return {}; var target = {}; var sourceKeys = Object.keys(source); var key, i; for (i = 0; i < sourceKeys.length; i++) { key = sourceKeys[i]; if (excluded.indexOf(key) >= 0) continue; target[key] = source[key]; } return target; }\n\nimport React from \"react\";\n\nvar _ref2 = /*#__PURE__*/React.createElement(\"title\", null, \"Untitled\");\n\nvar _ref3 = /*#__PURE__*/React.createElement(\"desc\", null, \"Created with Sketch.\");\n\nvar _ref4 = /*#__PURE__*/React.createElement(\"defs\", null);\n\nvar _ref5 = /*#__PURE__*/React.createElement(\"g\", {\n  id: \"Page-1\",\n  stroke: \"none\",\n  strokeWidth: 1,\n  fill: \"none\",\n  fillRule: \"evenodd\"\n}, /*#__PURE__*/React.createElement(\"polygon\", {\n  id: \"Rectangle\",\n  fill: \"#7F7E7F\",\n  points: \"180 65.2104719 240 85.8538747 240 171.707749 180 171.707749\"\n}), /*#__PURE__*/React.createElement(\"polygon\", {\n  id: \"Rectangle\",\n  fill: \"#3F8FCF\",\n  points: \"120 43.4859336 180 65.1100145 180 171.707749 120 171.707749\"\n}), /*#__PURE__*/React.createElement(\"polygon\", {\n  id: \"Rectangle\",\n  fill: \"#58C073\",\n  points: \"60 22.1649934 120 43.597184 120 171.707749 60 171.707749\"\n}), /*#__PURE__*/React.createElement(\"polygon\", {\n  id: \"Rectangle\",\n  fill: \"#F8CC46\",\n  points: \"0 0 60 22.0976562 60 171.707749 0 171.707749\"\n}));\n\nvar SvgWarmdown = function SvgWarmdown(_ref) {\n  var svgRef = _ref.svgRef,\n      title = _ref.title,\n      props = _objectWithoutProperties(_ref, [\"svgRef\", \"title\"]);\n\n  return /*#__PURE__*/React.createElement(\"svg\", _extends({\n    viewBox: \"0 0 240 172\",\n    ref: svgRef\n  }, props), title === undefined ? _ref2 : title ? /*#__PURE__*/React.createElement(\"title\", null, title) : null, _ref3, _ref4, _ref5);\n};\n\nvar ForwardRef = /*#__PURE__*/React.forwardRef(function (props, ref) {\n  return /*#__PURE__*/React.createElement(SvgWarmdown, _extends({\n    svgRef: ref\n  }, props));\n});\nexport default __webpack_public_path__ + \"static/media/warmdown.a32c38a2.svg\";\nexport { ForwardRef as ReactComponent };","function _extends() { _extends = Object.assign || function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; }; return _extends.apply(this, arguments); }\n\nfunction _objectWithoutProperties(source, excluded) { if (source == null) return {}; var target = _objectWithoutPropertiesLoose(source, excluded); var key, i; if (Object.getOwnPropertySymbols) { var sourceSymbolKeys = Object.getOwnPropertySymbols(source); for (i = 0; i < sourceSymbolKeys.length; i++) { key = sourceSymbolKeys[i]; if (excluded.indexOf(key) >= 0) continue; if (!Object.prototype.propertyIsEnumerable.call(source, key)) continue; target[key] = source[key]; } } return target; }\n\nfunction _objectWithoutPropertiesLoose(source, excluded) { if (source == null) return {}; var target = {}; var sourceKeys = Object.keys(source); var key, i; for (i = 0; i < sourceKeys.length; i++) { key = sourceKeys[i]; if (excluded.indexOf(key) >= 0) continue; target[key] = source[key]; } return target; }\n\nimport React from \"react\";\n\nvar _ref2 = /*#__PURE__*/React.createElement(\"title\", null, \"Untitled\");\n\nvar _ref3 = /*#__PURE__*/React.createElement(\"desc\", null, \"Created with Sketch.\");\n\nvar _ref4 = /*#__PURE__*/React.createElement(\"defs\", null);\n\nvar _ref5 = /*#__PURE__*/React.createElement(\"g\", {\n  id: \"Page-1\",\n  stroke: \"none\",\n  strokeWidth: 1,\n  fill: \"none\",\n  fillRule: \"evenodd\"\n}, /*#__PURE__*/React.createElement(\"polygon\", {\n  id: \"Rectangle\",\n  fill: \"#7F7E7F\",\n  points: \"0 85.8538747 60 65.290624 60 171.707749 0 171.707749\"\n}), /*#__PURE__*/React.createElement(\"polygon\", {\n  id: \"Rectangle\",\n  fill: \"#3F8FCF\",\n  points: \"60 65.2906189 120 44 120 171.707749 60 171.707749\"\n}), /*#__PURE__*/React.createElement(\"polygon\", {\n  id: \"Rectangle\",\n  fill: \"#58C073\",\n  points: \"120 44 180 22 180 171.707749 120 171.707749\"\n}), /*#__PURE__*/React.createElement(\"polygon\", {\n  id: \"Rectangle\",\n  fill: \"#F8CC46\",\n  points: \"180 22 240 0 240 171.707749 180 171.707749\"\n}));\n\nvar SvgWarmup = function SvgWarmup(_ref) {\n  var svgRef = _ref.svgRef,\n      title = _ref.title,\n      props = _objectWithoutProperties(_ref, [\"svgRef\", \"title\"]);\n\n  return /*#__PURE__*/React.createElement(\"svg\", _extends({\n    viewBox: \"0 0 240 172\",\n    ref: svgRef\n  }, props), title === undefined ? _ref2 : title ? /*#__PURE__*/React.createElement(\"title\", null, title) : null, _ref3, _ref4, _ref5);\n};\n\nvar ForwardRef = /*#__PURE__*/React.forwardRef(function (props, ref) {\n  return /*#__PURE__*/React.createElement(SvgWarmup, _extends({\n    svgRef: ref\n  }, props));\n});\nexport default __webpack_public_path__ + \"static/media/warmup.edbffcc7.svg\";\nexport { ForwardRef as ReactComponent };","function _extends() { _extends = Object.assign || function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; }; return _extends.apply(this, arguments); }\n\nfunction _objectWithoutProperties(source, excluded) { if (source == null) return {}; var target = _objectWithoutPropertiesLoose(source, excluded); var key, i; if (Object.getOwnPropertySymbols) { var sourceSymbolKeys = Object.getOwnPropertySymbols(source); for (i = 0; i < sourceSymbolKeys.length; i++) { key = sourceSymbolKeys[i]; if (excluded.indexOf(key) >= 0) continue; if (!Object.prototype.propertyIsEnumerable.call(source, key)) continue; target[key] = source[key]; } } return target; }\n\nfunction _objectWithoutPropertiesLoose(source, excluded) { if (source == null) return {}; var target = {}; var sourceKeys = Object.keys(source); var key, i; for (i = 0; i < sourceKeys.length; i++) { key = sourceKeys[i]; if (excluded.indexOf(key) >= 0) continue; target[key] = source[key]; } return target; }\n\nimport React from \"react\";\n\nvar _ref2 = /*#__PURE__*/React.createElement(\"title\", null, \"interval\");\n\nvar _ref3 = /*#__PURE__*/React.createElement(\"desc\", null, \"Created with Sketch.\");\n\nvar _ref4 = /*#__PURE__*/React.createElement(\"defs\", null);\n\nvar _ref5 = /*#__PURE__*/React.createElement(\"g\", {\n  id: \"Page-1\",\n  stroke: \"none\",\n  strokeWidth: 1,\n  fill: \"none\",\n  fillRule: \"evenodd\"\n}, /*#__PURE__*/React.createElement(\"g\", {\n  id: \"interval\"\n}, /*#__PURE__*/React.createElement(\"rect\", {\n  id: \"Rectangle-2\",\n  fill: \"#F8CC46\",\n  x: 0,\n  y: 0,\n  width: 24,\n  height: 170\n}), /*#__PURE__*/React.createElement(\"rect\", {\n  id: \"Rectangle-2\",\n  fill: \"#F8CC46\",\n  x: 166,\n  y: 0,\n  width: 24,\n  height: 170\n}), /*#__PURE__*/React.createElement(\"rect\", {\n  id: \"Rectangle-2\",\n  fill: \"#F8CC46\",\n  x: 83,\n  y: 0,\n  width: 24,\n  height: 170\n}), /*#__PURE__*/React.createElement(\"rect\", {\n  id: \"Rectangle-3\",\n  fill: \"#3F8FCF\",\n  x: 24,\n  y: 63,\n  width: 59,\n  height: 107\n}), /*#__PURE__*/React.createElement(\"rect\", {\n  id: \"Rectangle-3\",\n  fill: \"#3F8FCF\",\n  x: 190,\n  y: 63,\n  width: 59,\n  height: 107\n}), /*#__PURE__*/React.createElement(\"rect\", {\n  id: \"Rectangle-3\",\n  fill: \"#3F8FCF\",\n  x: 107,\n  y: 63,\n  width: 59,\n  height: 107\n})));\n\nvar SvgInterval = function SvgInterval(_ref) {\n  var svgRef = _ref.svgRef,\n      title = _ref.title,\n      props = _objectWithoutProperties(_ref, [\"svgRef\", \"title\"]);\n\n  return /*#__PURE__*/React.createElement(\"svg\", _extends({\n    viewBox: \"0 0 249 170\",\n    ref: svgRef\n  }, props), title === undefined ? _ref2 : title ? /*#__PURE__*/React.createElement(\"title\", null, title) : null, _ref3, _ref4, _ref5);\n};\n\nvar ForwardRef = /*#__PURE__*/React.forwardRef(function (props, ref) {\n  return /*#__PURE__*/React.createElement(SvgInterval, _extends({\n    svgRef: ref\n  }, props));\n});\nexport default __webpack_public_path__ + \"static/media/interval.178113c8.svg\";\nexport { ForwardRef as ReactComponent };","function _extends() { _extends = Object.assign || function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; }; return _extends.apply(this, arguments); }\n\nfunction _objectWithoutProperties(source, excluded) { if (source == null) return {}; var target = _objectWithoutPropertiesLoose(source, excluded); var key, i; if (Object.getOwnPropertySymbols) { var sourceSymbolKeys = Object.getOwnPropertySymbols(source); for (i = 0; i < sourceSymbolKeys.length; i++) { key = sourceSymbolKeys[i]; if (excluded.indexOf(key) >= 0) continue; if (!Object.prototype.propertyIsEnumerable.call(source, key)) continue; target[key] = source[key]; } } return target; }\n\nfunction _objectWithoutPropertiesLoose(source, excluded) { if (source == null) return {}; var target = {}; var sourceKeys = Object.keys(source); var key, i; for (i = 0; i < sourceKeys.length; i++) { key = sourceKeys[i]; if (excluded.indexOf(key) >= 0) continue; target[key] = source[key]; } return target; }\n\nimport React from \"react\";\n\nvar _ref2 = /*#__PURE__*/React.createElement(\"title\", null, \"Rectangle\");\n\nvar _ref3 = /*#__PURE__*/React.createElement(\"desc\", null, \"Created with Sketch.\");\n\nvar _ref4 = /*#__PURE__*/React.createElement(\"defs\", null);\n\nvar _ref5 = /*#__PURE__*/React.createElement(\"g\", {\n  id: \"Page-1\",\n  stroke: \"none\",\n  strokeWidth: 1,\n  fill: \"none\",\n  fillRule: \"evenodd\"\n}, /*#__PURE__*/React.createElement(\"g\", {\n  id: \"warmup\",\n  fillRule: \"nonzero\",\n  fill: \"#F8CC46\"\n}, /*#__PURE__*/React.createElement(\"polygon\", {\n  id: \"Rectangle\",\n  points: \"0 0 40 0 40 121.707749 6.24500451e-16 121.707749\"\n})));\n\nvar SvgSteady = function SvgSteady(_ref) {\n  var svgRef = _ref.svgRef,\n      title = _ref.title,\n      props = _objectWithoutProperties(_ref, [\"svgRef\", \"title\"]);\n\n  return /*#__PURE__*/React.createElement(\"svg\", _extends({\n    viewBox: \"0 0 40 30\",\n    ref: svgRef\n  }, props), title === undefined ? _ref2 : title ? /*#__PURE__*/React.createElement(\"title\", null, title) : null, _ref3, _ref4, _ref5);\n};\n\nvar ForwardRef = /*#__PURE__*/React.forwardRef(function (props, ref) {\n  return /*#__PURE__*/React.createElement(SvgSteady, _extends({\n    svgRef: ref\n  }, props));\n});\nexport default __webpack_public_path__ + \"static/media/steady.7e9a2283.svg\";\nexport { ForwardRef as ReactComponent };","import React from \"react\";\nimport styled from \"styled-components\";\nimport { Label } from \"../Label/Label\";\nimport { Column } from \"../Layout/Column\";\n\n// Displays workut name, description & author\n\ninterface NumberFieldProps {\n  name: string;\n  label: string;\n  value: number;\n  onChange: (value: number) => void;\n}\n\nconst NumberField: React.FC<NumberFieldProps> = ({\n  name,\n  label,\n  value,\n  onChange,\n}) => {\n  return (\n    <Col>\n      <Label htmlFor={name}>{label}</Label>\n      <TextInput\n        type=\"number\"\n        name={name}\n        value={value}\n        onChange={(e) => onChange(parseInt(e.target.value))}\n      />\n    </Col>\n  );\n};\n\nconst TextInput = styled.input`\n  font-size: 20px;\n  border: 1px solid lightgray;\n  text-align: center;\n`;\n\nconst Col = styled(Column)`\n  max-width: 100px;\n`;\n\nexport default NumberField;\n","import styled from \"styled-components\";\n\nconst Button = styled.button`\n  display: inline-block;\n  background-color: white;\n  border: none;\n  text-align: center;\n  font-size: 13px;\n  border-radius: 5px;\n  min-width: 50px;\n  box-shadow: 2px 2px 5px #bbb;\n  cursor: pointer;\n\n  &:hover {\n    box-shadow: 2px 2px 5px #999;\n  }\n  &:active {\n    position: relative;\n    top: 1px;\n    left: 1px;\n  }\n`;\n\nexport default Button;\n","import React from \"react\";\nimport { FontAwesomeIcon } from \"@fortawesome/react-fontawesome\";\nimport { IconDefinition } from \"@fortawesome/free-solid-svg-icons\";\nimport Button from \"./Button\";\nimport styled from \"styled-components\";\n\ninterface IconButtonProps {\n  icon: IconDefinition;\n  children: string;\n  onClick: () => void;\n}\n\nconst IconButton: React.FC<IconButtonProps> = ({ icon, children, onClick }) => {\n  return (\n    <Button onClick={onClick}>\n      <StyledIcon icon={icon} size=\"lg\" fixedWidth /> {children}\n    </Button>\n  );\n};\n\nconst StyledIcon = styled(FontAwesomeIcon)`\n  display: block;\n  margin: 0 auto;\n`;\n\nexport default IconButton;\n","import Converter from \"xml-js\";\nimport { v4 as uuidv4 } from \"uuid\";\nimport intervalFactory from \"../interval/intervalFactory\";\nimport { createEmptyWorkout, Workout } from \"../types/Workout\";\nimport { Distance, Duration, Length } from \"../types/Length\";\nimport { WorkoutMode } from \"../modes/WorkoutMode\";\nimport { Instruction } from \"../types/Instruction\";\n\nexport default function parseWorkoutXml(\n  data: string,\n  mode: WorkoutMode\n): Workout {\n  const workout: Workout = createEmptyWorkout(mode.sportType, mode.lengthType);\n\n  data = data.replace(/<!--(.*?)-->/gm, \"\");\n\n  const workout_file = Converter.xml2js(data).elements[0];\n\n  if (workout_file.name !== \"workout_file\") {\n    throw new Error(\"Invalid ZWO file\");\n  }\n\n  const sportTypeIndex = workout_file.elements.findIndex(\n    (element: { name: string }) => element.name === \"sportType\"\n  );\n  if (sportTypeIndex !== -1 && workout_file.elements[sportTypeIndex].elements) {\n    workout.sportType = workout_file.elements[sportTypeIndex].elements[0].text;\n  }\n\n  const lengthTypeIndex = workout_file.elements.findIndex(\n    (element: { name: string }) => element.name === \"durationType\"\n  );\n  if (\n    lengthTypeIndex !== -1 &&\n    workout_file.elements[lengthTypeIndex].elements\n  ) {\n    workout.lengthType =\n      workout_file.elements[lengthTypeIndex].elements[0].text;\n  }\n\n  const authorIndex = workout_file.elements.findIndex(\n    (element: { name: string }) => element.name === \"author\"\n  );\n  if (authorIndex !== -1 && workout_file.elements[authorIndex].elements) {\n    workout.author = workout_file.elements[authorIndex].elements[0].text;\n  }\n\n  const nameIndex = workout_file.elements.findIndex(\n    (element: { name: string }) => element.name === \"name\"\n  );\n  if (nameIndex !== -1 && workout_file.elements[nameIndex].elements) {\n    workout.name = workout_file.elements[nameIndex].elements[0].text;\n  }\n\n  const descriptionIndex = workout_file.elements.findIndex(\n    (element: { name: string }) => element.name === \"description\"\n  );\n  if (\n    descriptionIndex !== -1 &&\n    workout_file.elements[descriptionIndex].elements\n  ) {\n    workout.description =\n      workout_file.elements[descriptionIndex].elements[0].text;\n  }\n\n  const tagsIndex = workout_file.elements.findIndex(\n    (element: { name: string }) => element.name === \"tags\"\n  );\n  if (tagsIndex !== -1 && workout_file.elements[tagsIndex].elements) {\n    workout.tags = workout_file.elements[tagsIndex].elements.map(\n      (el: { attributes: { name: string } }) => el.attributes.name\n    );\n  }\n\n  const workoutEl = workout_file.elements.find(\n    (element: { name: string }) =>\n      element.name === \"workout\" && \"elements\" in element\n  );\n  if (!workoutEl) {\n    return workout;\n  }\n\n  const toLength = (x: number) =>\n    workout.lengthType === \"time\" ? Duration(x) : Distance(x);\n\n  workoutEl.elements.map(\n    (w: {\n      name: string;\n      attributes: {\n        Power: any;\n        PowerLow: string;\n        Duration: string;\n        PowerHigh: string;\n        Cadence?: string;\n        CadenceResting?: string;\n        Repeat: string;\n        OnDuration: string;\n        OffDuration: string;\n        OnPower: string;\n        OffPower: string;\n        pace: string;\n      };\n      elements: any;\n    }) => {\n      if (w.name === \"SteadyState\") {\n        workout.intervals.push(\n          intervalFactory.steady(\n            {\n              intensity: parseFloat(\n                w.attributes.Power || w.attributes.PowerLow\n              ),\n              length: toLength(parseFloat(w.attributes.Duration)),\n              cadence: w.attributes.Cadence\n                ? parseFloat(w.attributes.Cadence)\n                : undefined,\n              pace: parseInt(w.attributes.pace || \"0\"),\n              instructions: textEventsToInstructions(w.elements, toLength),\n            },\n            mode\n          )\n        );\n      }\n      if (w.name === \"Ramp\" || w.name === \"Warmup\" || w.name === \"Cooldown\") {\n        workout.intervals.push(\n          intervalFactory.ramp(\n            {\n              startIntensity: parseFloat(w.attributes.PowerLow),\n              endIntensity: parseFloat(w.attributes.PowerHigh),\n              length: toLength(parseFloat(w.attributes.Duration)),\n              pace: parseInt(w.attributes.pace || \"0\"),\n              cadence: w.attributes.Cadence\n                ? parseFloat(w.attributes.Cadence)\n                : undefined,\n              instructions: textEventsToInstructions(w.elements, toLength),\n            },\n            mode\n          )\n        );\n      }\n      if (w.name === \"IntervalsT\") {\n        workout.intervals.push(\n          intervalFactory.repetition(\n            {\n              repeat: parseFloat(w.attributes.Repeat),\n              onLength: toLength(parseFloat(w.attributes.OnDuration)),\n              offLength: toLength(parseFloat(w.attributes.OffDuration)),\n              onIntensity: parseFloat(w.attributes.OnPower),\n              offIntensity: parseFloat(w.attributes.OffPower),\n              onCadence: w.attributes.Cadence\n                ? parseFloat(w.attributes.Cadence)\n                : undefined,\n              offCadence: w.attributes.CadenceResting\n                ? parseFloat(w.attributes.CadenceResting)\n                : undefined,\n              pace: parseInt(w.attributes.pace || \"0\"),\n              instructions: textEventsToInstructions(w.elements, toLength),\n            },\n            mode\n          )\n        );\n      }\n      if (w.name === \"FreeRide\") {\n        workout.intervals.push(\n          intervalFactory.free(\n            {\n              length: toLength(parseFloat(w.attributes.Duration)),\n              cadence: w.attributes.Cadence\n                ? parseFloat(w.attributes.Cadence)\n                : undefined,\n              instructions: textEventsToInstructions(w.elements, toLength),\n            },\n            mode\n          )\n        );\n      }\n\n      // map functions expect return value\n      return false;\n    }\n  );\n\n  return workout;\n}\n\ntype TextElement = {\n  name: string;\n  attributes: { message: string | undefined; timeoffset: string };\n};\n\nfunction textEventsToInstructions(\n  textElements: TextElement[] | undefined,\n  toLength: (n: number) => Length\n): Instruction[] {\n  if (!textElements || textElements.length === 0) {\n    return [];\n  }\n\n  return textElements\n    .filter((t) => t.name.toLowerCase() === \"textevent\")\n    .map((t) => ({\n      text: t.attributes.message || \"\",\n      offset: toLength(parseFloat(t.attributes.timeoffset)),\n      id: uuidv4(),\n    }));\n}\n","import { SportType } from \"./SportType\";\nimport { Interval } from \"./Interval\";\nimport { LengthType } from \"./LengthType\";\n\nexport interface Workout {\n  author: string;\n  name: string;\n  description: string;\n  sportType: SportType;\n  lengthType: LengthType;\n  tags: string[];\n  intervals: Array<Interval>;\n}\n\nexport function createEmptyWorkout(\n  sportType: SportType,\n  lengthType: LengthType\n): Workout {\n  return {\n    author: \"\",\n    name: \"\",\n    description: \"\",\n    sportType: sportType,\n    lengthType: lengthType,\n    tags: [],\n    intervals: [],\n  };\n}\n","import React from \"react\";\nimport { faUpload } from \"@fortawesome/free-solid-svg-icons\";\nimport IconButton from \"../Button/IconButton\";\nimport parseWorkoutXml from \"../../xml/parseWorkoutXml\";\nimport { WorkoutMode } from \"../../modes/WorkoutMode\";\nimport { Workout } from \"../../types/Workout\";\n\ninterface UploadButtonProps {\n  mode: WorkoutMode;\n  onUpload: (workout: Workout) => void;\n}\n\nconst UploadButton: React.FC<UploadButtonProps> = ({ mode, onUpload }) => {\n  async function handleUpload(file: File) {\n    try {\n      onUpload(parseWorkoutXml(await file.text(), mode));\n    } catch (e) {\n      console.error(e);\n    }\n  }\n\n  return (\n    <>\n      <input\n        accept=\".xml,.zwo\"\n        id=\"contained-button-file\"\n        type=\"file\"\n        style={{ display: \"none\" }}\n        onChange={(e) => handleUpload(e.target.files![0])}\n      />\n      <IconButton\n        icon={faUpload}\n        onClick={() =>\n          document.getElementById(\"contained-button-file\")!.click()\n        }\n      >\n        Upload\n      </IconButton>\n    </>\n  );\n};\n\nexport default UploadButton;\n","import styled from \"styled-components\";\nimport Button from \"./Button\";\n\nconst ColorButton = styled(Button)<{ color: string }>`\n  color: white;\n  width: 50px;\n  height: 50px;\n  background-color: ${(props) => props.color};\n`;\n\nexport default ColorButton;\n","import Builder from \"xmlbuilder\";\nimport RunMode from \"../modes/RunMode\";\nimport { WorkoutMode } from \"../modes/WorkoutMode\";\nimport { Instruction } from \"../types/Instruction\";\nimport { Interval } from \"../types/Interval\";\nimport { Workout } from \"../types/Workout\";\n\nexport default function createWorkoutXml(\n  {\n    author,\n    name,\n    description,\n    sportType,\n    lengthType,\n    tags,\n    intervals,\n  }: Workout,\n  mode: WorkoutMode\n): string {\n  let xml = Builder.begin()\n    .ele(\"workout_file\")\n    .ele(\"author\", author)\n    .up()\n    .ele(\"name\", name)\n    .up()\n    .ele(\"description\", description)\n    .up()\n    .ele(\"sportType\", sportType)\n    .up()\n    .ele(\"durationType\", lengthType)\n    .up()\n    .ele(\"tags\");\n\n  tags.forEach((tag: string) => {\n    var t: Builder.XMLNode;\n    t = Builder.create(\"tag\").att(\"name\", tag);\n    xml.importDocument(t);\n  });\n\n  xml = xml.up().ele(\"workout\");\n\n  intervals.forEach((interval, index) => {\n    var segment: Builder.XMLNode;\n    var ramp;\n\n    if (interval.type === \"steady\") {\n      segment = Builder.create(\"SteadyState\")\n        .att(\"Duration\", mode.fromLength(interval.length))\n        .att(\"Power\", interval.intensity)\n        .att(\"pace\", interval.pace);\n\n      // add cadence if not zero\n      interval.cadence !== 0 && segment.att(\"Cadence\", interval.cadence);\n    } else if (\n      interval.type === \"ramp\" &&\n      interval.startIntensity &&\n      interval.endIntensity\n    ) {\n      // index 0 is warmup\n      // last index is cooldown\n      // everything else is ramp\n\n      ramp = \"Ramp\";\n      if (index === 0) ramp = \"Warmup\";\n      if (index === intervals.length - 1) ramp = \"Cooldown\";\n\n      if (interval.startIntensity < interval.endIntensity) {\n        // warmup\n        segment = Builder.create(ramp)\n          .att(\"Duration\", mode.fromLength(interval.length))\n          .att(\"PowerLow\", interval.startIntensity)\n          .att(\"PowerHigh\", interval.endIntensity)\n          .att(\"pace\", interval.pace);\n        interval.cadence !== undefined &&\n          segment.att(\"Cadence\", interval.cadence);\n      } else {\n        // cooldown\n        segment = Builder.create(ramp)\n          .att(\"Duration\", mode.fromLength(interval.length))\n          .att(\"PowerLow\", interval.startIntensity) // these 2 values are inverted\n          .att(\"PowerHigh\", interval.endIntensity) // looks like a bug on zwift editor\n          .att(\"pace\", interval.pace);\n        interval.cadence !== undefined &&\n          segment.att(\"Cadence\", interval.cadence);\n      }\n    } else if (interval.type === \"repetition\") {\n      // <IntervalsT Repeat=\"5\" OnDuration=\"60\" OffDuration=\"300\" OnPower=\"0.8844353\" OffPower=\"0.51775455\" pace=\"0\"/>\n      segment = Builder.create(\"IntervalsT\")\n        .att(\"Repeat\", interval.repeat)\n        .att(\"OnDuration\", mode.fromLength(interval.onLength))\n        .att(\"OffDuration\", mode.fromLength(interval.offLength))\n        .att(\"OnPower\", interval.onIntensity)\n        .att(\"OffPower\", interval.offIntensity)\n        .att(\"pace\", interval.pace);\n      interval.onCadence !== undefined &&\n        segment.att(\"Cadence\", interval.onCadence);\n      interval.offCadence !== undefined &&\n        segment.att(\"CadenceResting\", interval.offCadence);\n    } else {\n      // free ride\n      segment = Builder.create(\"FreeRide\")\n        .att(\"Duration\", mode.fromLength(interval.length))\n        .att(\"FlatRoad\", 0); // Without this, Zwift will adjust resistance when gradient changes\n      interval.cadence !== undefined &&\n        segment.att(\"Cadence\", interval.cadence);\n    }\n\n    const intervalLength = (interval: Interval): number =>\n      mode instanceof RunMode && mode.lengthType === \"distance\"\n        ? mode.intervalDistance(interval).meters\n        : mode.intervalDuration(interval).seconds;\n\n    const instructionInsideInterval = (instruction: Instruction): boolean =>\n      mode.fromLength(instruction.offset) >= 0 &&\n      mode.fromLength(instruction.offset) < intervalLength(interval);\n\n    // add instructions if present\n    interval.instructions.filter(instructionInsideInterval).forEach((i) => {\n      segment.ele(\"textevent\", {\n        timeoffset: mode.fromLength(i.offset),\n        message: i.text,\n      });\n    });\n\n    xml.importDocument(segment);\n  });\n\n  return xml.end({ pretty: true });\n}\n","import React from \"react\";\nimport { connect } from \"react-redux\";\nimport { faDownload } from \"@fortawesome/free-solid-svg-icons\";\nimport createWorkoutXml from \"../../xml/createWorkoutXml\";\nimport IconButton from \"../Button/IconButton\";\nimport {\n  selectAuthor,\n  selectDescription,\n  selectName,\n  selectTags,\n  selectSportType,\n  selectLengthType,\n} from \"../../rdx/state/meta\";\nimport { RootState } from \"../../rdx/store\";\nimport { selectIntervals } from \"../../rdx/state/intervals\";\nimport { selectMode } from \"../../rdx/state/mode\";\nimport { ConnectedProps } from \"../../types/ConnectedProps\";\n\nconst mapStateToProps = (state: RootState) => ({\n  name: selectName(state),\n  author: selectAuthor(state),\n  description: selectDescription(state),\n  tags: selectTags(state),\n  sportType: selectSportType(state),\n  lengthType: selectLengthType(state),\n  intervals: selectIntervals(state),\n  mode: selectMode(state),\n});\n\ntype DownloadButtonProps = ConnectedProps<typeof mapStateToProps>;\n\nconst DownloadButton = (props: DownloadButtonProps) => {\n  function createZwoFile() {\n    const xml = createWorkoutXml(\n      {\n        name: props.name,\n        author: props.author,\n        description: props.description,\n        tags: props.tags,\n        sportType: props.sportType,\n        lengthType: props.lengthType,\n        intervals: props.intervals,\n      },\n      props.mode\n    );\n\n    return new Blob([xml], { type: \"application/xml\" });\n  }\n\n  function downloadWorkout() {\n    const tempFile = createZwoFile();\n    const url = window.URL.createObjectURL(tempFile);\n\n    var a = document.createElement(\"a\");\n    document.body.appendChild(a);\n    a.style.display = \"none\";\n    a.href = url;\n    a.download = `workout.zwo`;\n    a.click();\n    window.URL.revokeObjectURL(url);\n  }\n\n  return (\n    <IconButton icon={faDownload} onClick={downloadWorkout}>\n      Download\n    </IconButton>\n  );\n};\n\nexport default connect(mapStateToProps)(DownloadButton);\n","import React from \"react\";\nimport styled from \"styled-components\";\nimport Button from \"./Button\";\n\ntype SvgComponent = React.FunctionComponent<\n  React.SVGProps<SVGSVGElement> & { title?: string }\n>;\n\ninterface SvgButtonProps {\n  svg: SvgComponent;\n  onClick: () => void;\n}\n\nconst SvgButton: React.FC<SvgButtonProps> = ({ svg, children, onClick }) => {\n  return (\n    <Button onClick={onClick}>\n      <StyledSvg as={svg} /> {children}\n    </Button>\n  );\n};\n\nconst StyledSvg = styled.svg`\n  width: 30px;\n  margin: 0 auto;\n  display: block;\n  margin: 0 auto;\n`;\n\nexport default SvgButton;\n","import React from \"react\";\nimport { connect } from \"react-redux\";\nimport { ZoneColor, Zones } from \"../../types/Zones\";\nimport {\n  faFile,\n  faBicycle,\n  faRunning,\n} from \"@fortawesome/free-solid-svg-icons\";\nimport { ReactComponent as WarmdownLogo } from \"../../assets/warmdown.svg\";\nimport { ReactComponent as WarmupLogo } from \"../../assets/warmup.svg\";\nimport { ReactComponent as IntervalLogo } from \"../../assets/interval.svg\";\nimport { ReactComponent as SteadyLogo } from \"../../assets/steady.svg\";\nimport intervalFactory from \"../../interval/intervalFactory\";\nimport NumberField from \"./NumberField\";\nimport UploadButton from \"./UploadButton\";\nimport IconButton from \"../Button/IconButton\";\nimport ColorButton from \"../Button/ColorButton\";\nimport { selectSportType } from \"../../rdx/state/meta\";\nimport { RootState } from \"../../rdx/store\";\nimport {\n  selectFtp,\n  selectWeight,\n  setFtp,\n  setWeight,\n} from \"../../rdx/state/athlete\";\nimport { addInterval } from \"../../rdx/state/intervals\";\nimport { selectMode } from \"../../rdx/state/mode\";\nimport { clearWorkout, loadWorkout } from \"../../rdx/state/workout\";\nimport DownloadButton from \"./DownloadButton\";\nimport styled from \"styled-components\";\nimport { ConnectedProps } from \"../../types/ConnectedProps\";\nimport SvgButton from \"../Button/SvgButton\";\n\nconst mapStateToProps = (state: RootState) => ({\n  sportType: selectSportType(state),\n  ftp: selectFtp(state),\n  weight: selectWeight(state),\n  mode: selectMode(state),\n});\n\nconst mapDispatchToProps = {\n  setFtp,\n  setWeight,\n  addInterval,\n  clearWorkout,\n  loadWorkout,\n};\n\ntype ToolbarProps = ConnectedProps<\n  typeof mapStateToProps,\n  typeof mapDispatchToProps\n>;\n\nconst Toolbar = ({ mode, addInterval, ...props }: ToolbarProps) => {\n  return (\n    <Container>\n      {props.sportType === \"bike\" ? (\n        <>\n          <ColorButton\n            color={ZoneColor.GRAY}\n            onClick={() =>\n              addInterval(intervalFactory.steady({ intensity: 0.5 }, mode))\n            }\n          >\n            Z1\n          </ColorButton>\n          <ColorButton\n            color={ZoneColor.BLUE}\n            onClick={() =>\n              addInterval(\n                intervalFactory.steady({ intensity: Zones.Z2.min }, mode)\n              )\n            }\n          >\n            Z2\n          </ColorButton>\n          <ColorButton\n            color={ZoneColor.GREEN}\n            onClick={() =>\n              addInterval(\n                intervalFactory.steady({ intensity: Zones.Z3.min }, mode)\n              )\n            }\n          >\n            Z3\n          </ColorButton>\n          <ColorButton\n            color={ZoneColor.YELLOW}\n            onClick={() =>\n              addInterval(\n                intervalFactory.steady({ intensity: Zones.Z4.min }, mode)\n              )\n            }\n          >\n            Z4\n          </ColorButton>\n          <ColorButton\n            color={ZoneColor.ORANGE}\n            onClick={() =>\n              addInterval(\n                intervalFactory.steady({ intensity: Zones.Z5.min }, mode)\n              )\n            }\n          >\n            Z5\n          </ColorButton>\n          <ColorButton\n            color={ZoneColor.RED}\n            onClick={() =>\n              addInterval(\n                intervalFactory.steady({ intensity: Zones.Z6.min }, mode)\n              )\n            }\n          >\n            Z6\n          </ColorButton>\n        </>\n      ) : (\n        <SvgButton\n          svg={SteadyLogo}\n          onClick={() => addInterval(intervalFactory.steady({}, mode))}\n        >\n          Steady Pace\n        </SvgButton>\n      )}\n\n      <SvgButton\n        svg={WarmupLogo}\n        onClick={() =>\n          addInterval(\n            intervalFactory.ramp(\n              { startIntensity: 0.25, endIntensity: 0.75 },\n              mode\n            )\n          )\n        }\n      >\n        Warm up\n      </SvgButton>\n      <SvgButton\n        svg={WarmdownLogo}\n        onClick={() =>\n          addInterval(\n            intervalFactory.ramp(\n              { startIntensity: 0.75, endIntensity: 0.25 },\n              mode\n            )\n          )\n        }\n      >\n        Cool down\n      </SvgButton>\n      <SvgButton\n        svg={IntervalLogo}\n        onClick={() => addInterval(intervalFactory.repetition({}, mode))}\n      >\n        Interval\n      </SvgButton>\n      <IconButton\n        icon={props.sportType === \"bike\" ? faBicycle : faRunning}\n        onClick={() => addInterval(intervalFactory.free({}, mode))}\n      >\n        {props.sportType === \"bike\" ? \"Free Ride\" : \"Free Run\"}\n      </IconButton>\n      {props.sportType === \"bike\" && (\n        <NumberField\n          name=\"ftp\"\n          label={\"FTP (W)\"}\n          value={props.ftp}\n          onChange={props.setFtp}\n        />\n      )}\n      {props.sportType === \"bike\" && (\n        <NumberField\n          name=\"weight\"\n          label={\"Body Weight (kg)\"}\n          value={props.weight}\n          onChange={props.setWeight}\n        />\n      )}\n      <IconButton\n        icon={faFile}\n        onClick={() => {\n          if (window.confirm(\"Are you sure you want to create a new workout?\"))\n            props.clearWorkout();\n        }}\n      >\n        New\n      </IconButton>\n      <DownloadButton />\n      <UploadButton mode={mode} onUpload={props.loadWorkout} />\n    </Container>\n  );\n};\n\nconst Container = styled.div`\n  display: flex;\n  flex-direction: row;\n  flex-wrap: wrap;\n  margin: 10px auto;\n  padding: 20px;\n  background-color: white;\n\n  -webkit-box-shadow: 0px 0px 27px -9px rgba(0, 0, 0, 0.35);\n  -moz-box-shadow: 0px 0px 27px -9px rgba(0, 0, 0, 0.35);\n  box-shadow: 0px 0px 27px -9px rgba(0, 0, 0, 0.35);\n  border-radius: 5px;\n\n  & > * {\n    margin-right: 5px;\n  }\n  & > *:last-child {\n    margin-right: 0;\n  }\n`;\n\nexport default connect(mapStateToProps, mapDispatchToProps)(Toolbar);\n","import React, { useState } from \"react\";\nimport { FontAwesomeIcon } from \"@fortawesome/react-fontawesome\";\nimport { faBolt, faClock, faRuler } from \"@fortawesome/free-solid-svg-icons\";\nimport styled from \"styled-components\";\nimport {\n  FreeInterval,\n  RampInterval,\n  SteadyInterval,\n} from \"../../types/Interval\";\nimport { WorkoutMode } from \"../../modes/WorkoutMode\";\nimport BikeMode from \"../../modes/BikeMode\";\nimport RunMode from \"../../modes/RunMode\";\nimport * as format from \"../../utils/format\";\nimport cadenceImage from \"../../assets/cadence.png\";\n\ninterface TooltipProps {\n  interval: SteadyInterval | RampInterval | FreeInterval;\n  mode: WorkoutMode;\n  onCadenceChange: (cadence: number | undefined) => void;\n}\n\nconst Tooltip = ({ mode, ...props }: TooltipProps) => {\n  return (\n    <TooltipContainer>\n      <div>\n        <FontAwesomeIcon icon={faClock} fixedWidth />{\" \"}\n        {format.duration(mode.intervalDuration(props.interval))}\n      </div>\n      {mode instanceof BikeMode ? (\n        <BikeData mode={mode} {...props} />\n      ) : (\n        <RunData mode={mode} {...props} />\n      )}\n    </TooltipContainer>\n  );\n};\n\nconst TooltipContainer = styled.div`\n  position: absolute;\n  z-index: 100;\n  top: -95px;\n  left: 0;\n  color: white;\n  background-color: rgba(0, 0, 0, 0.7);\n  width: 150px;\n  border-radius: 5px;\n  margin: 5px 0;\n  font-size: 14px;\n  padding: 5px;\n`;\n\nfunction BikeData({\n  interval,\n  mode,\n  onCadenceChange,\n}: TooltipProps & { mode: BikeMode }) {\n  return (\n    <>\n      {interval.type === \"steady\" && (\n        <>\n          <div>\n            <FontAwesomeIcon icon={faBolt} fixedWidth />{\" \"}\n            {format.power(mode.power(interval.intensity))}\n          </div>\n          <div>\n            {format.wkg(mode.wkg(interval.intensity))} &middot;{\" \"}\n            {format.percentage(interval.intensity)} FTP\n          </div>\n        </>\n      )}\n      {interval.type === \"ramp\" && (\n        <>\n          <div>\n            <FontAwesomeIcon icon={faBolt} fixedWidth />{\" \"}\n            {format.power(mode.power(interval.startIntensity))} -{\" \"}\n            {format.power(mode.power(interval.endIntensity))}\n          </div>\n          <div>\n            {format.percentage(interval.startIntensity)} -{\" \"}\n            {format.percentage(interval.endIntensity)} FTP\n          </div>\n        </>\n      )}\n      <CadenceItem cadence={interval.cadence} onChange={onCadenceChange} />\n    </>\n  );\n}\n\ntype CadenceItemProps = {\n  cadence?: number;\n  onChange: (v: number | undefined) => void;\n};\n\nconst CadenceItem: React.FC<CadenceItemProps> = ({ cadence, onChange }) => {\n  const [hover, setHover] = useState(false);\n  const [focus, setFocus] = useState(false);\n\n  return (\n    <CadenceRow\n      onMouseOver={() => setHover(true)}\n      onMouseOut={() => setHover(false)}\n    >\n      <CadenceLabel>\n        <img src={cadenceImage} width=\"16\" alt=\"Cadence\" />\n      </CadenceLabel>\n      {hover || focus ? (\n        <CadenceInput\n          $cadence={cadence}\n          $onCadenceChange={onChange}\n          onFocus={() => setFocus(true)}\n          onBlur={() => setFocus(false)}\n        />\n      ) : (\n        <CadenceValue>{cadence ? cadence + \" rpm\" : \"\"}</CadenceValue>\n      )}\n    </CadenceRow>\n  );\n};\n\nfunction RunData({ interval, mode }: TooltipProps & { mode: RunMode }) {\n  return (\n    <>\n      <div>\n        <FontAwesomeIcon icon={faRuler} fixedWidth />{\" \"}\n        {format.distance(mode.intervalDistance(interval))}\n      </div>\n      {interval.type === \"steady\" && (\n        <>\n          <div>\n            {format.percentage(interval.intensity)}{\" \"}\n            {format.shortPaceName(interval.pace)}\n          </div>\n          <div>\n            {format.runningPace(mode.speed(interval.intensity, interval.pace))}\n          </div>\n        </>\n      )}\n      {interval.type === \"ramp\" && (\n        <>\n          <div>\n            {format.percentage(interval.startIntensity)} to{\" \"}\n            {format.percentage(interval.endIntensity)}{\" \"}\n            {format.shortPaceName(interval.pace)}\n          </div>\n          <div>\n            {format.runningPace(\n              mode.speed(interval.startIntensity, interval.pace)\n            )}{\" \"}\n            to{\" \"}\n            {format.runningPace(\n              mode.speed(interval.endIntensity, interval.pace)\n            )}\n          </div>\n        </>\n      )}\n    </>\n  );\n}\n\nconst CadenceRow = styled.div`\n  display: flex;\n`;\n\nconst CadenceLabel = styled.label`\n  font-size: 14px;\n  padding-right: 5px;\n`;\n\ntype CadenceInputProps = {\n  $cadence?: number;\n  $onCadenceChange: (v: number | undefined) => void;\n};\n\nconst CadenceInput = styled.input.attrs<CadenceInputProps>((props) => ({\n  type: \"number\",\n  min: \"40\",\n  max: \"150\",\n  step: \"5\",\n  value: props.$cadence || \"\",\n  onChange: (e: React.ChangeEvent<HTMLInputElement>) => {\n    props.$onCadenceChange(\n      e.target.value ? parseInt(e.target.value) : undefined\n    );\n  },\n  onClick: (e: React.MouseEvent<HTMLInputElement>) => {\n    e.stopPropagation();\n  },\n}))<CadenceInputProps>`\n  background-color: rgba(255, 255, 255, 0.1);\n  color: white;\n  border: 0;\n  border-bottom: 0px solid white;\n  font-size: 14px;\n  min-width: 1px;\n  flex: 1;\n`;\n\nconst CadenceValue = styled.span`\n  flex: 1;\n  display: inline-block;\n  font-size: 14px;\n  height: 19px;\n`;\n\nexport default Tooltip;\n","import React from \"react\";\nimport styled from \"styled-components\";\nimport { Instruction } from \"../../types/Instruction\";\nimport { FontAwesomeIcon } from \"@fortawesome/react-fontawesome\";\nimport cadenceImage from \"../../assets/cadence.png\";\nimport { faComment } from \"@fortawesome/free-solid-svg-icons\";\n\nexport const BarIcons: React.FC<{\n  cadence?: number;\n  instructions: Instruction[];\n  height: number;\n  className?: string;\n}> = ({ cadence, instructions, height, className }) => (\n  <IconsWrap className={className} $height={height}>\n    {cadence && (\n      <IconLine>\n        <img src={cadenceImage} alt=\"Has cadence\" width=\"16\" />\n        <span>{cadence}</span>\n      </IconLine>\n    )}\n    {instructions.length > 0 && (\n      <IconLine>\n        <FontAwesomeIcon\n          icon={faComment}\n          size=\"sm\"\n          fixedWidth={true}\n          color=\"white\"\n        />\n        <span>{instructions.length}</span>\n      </IconLine>\n    )}\n  </IconsWrap>\n);\n\nconst IconsWrap = styled.div<{ $height: number }>`\n  position: absolute;\n  bottom: 0;\n  box-sizing: border-box;\n  padding: 2px;\n  color: white;\n  height: ${(p) => p.$height}px;\n`;\n\nconst IconLine = styled.div`\n  display: flex;\n  align-items: center;\n  & > span {\n    padding-left: 5px;\n  }\n`;\n","import React, { useState } from \"react\";\nimport styled from \"styled-components\";\nimport { Resizable } from \"re-resizable\";\nimport \"moment-duration-format\";\nimport Tooltip from \"../Tooltip/Tooltip\";\nimport { FreeInterval } from \"../../types/Interval\";\nimport { durationMultiplier } from \"./multipliers\";\nimport { WorkoutMode } from \"../../modes/WorkoutMode\";\nimport freerideSvg from \"../../assets/freeride.svg\";\nimport { BarIcons } from \"./BarIcons\";\n\ninterface FreeBarProps {\n  interval: FreeInterval;\n  mode: WorkoutMode;\n  onChange: (interval: FreeInterval) => void;\n  onClick: (id: string) => void;\n  selected: boolean;\n}\n\nconst FreeBar = ({ interval, mode, ...props }: FreeBarProps) => {\n  const [width, setWidth] = useState(mode.lengthToWidth(interval.length));\n\n  const [showTooltip, setShowTooltip] = useState(false);\n\n  const handleCadenceChange = (cadence: number | undefined) => {\n    props.onChange({ ...interval, cadence });\n  };\n\n  // standard height\n  const height = 160;\n\n  const handleResizeStop = (dWidth: number) => {\n    setWidth(width + dWidth);\n    notifyChange(dWidth);\n  };\n\n  const notifyChange = (dWidth: number) => {\n    props.onChange({ ...interval, length: mode.widthToLength(width + dWidth) });\n  };\n\n  return (\n    <Container\n      onMouseEnter={() => setShowTooltip(true)}\n      onMouseLeave={() => setShowTooltip(false)}\n      style={props.selected ? { zIndex: 1 } : {}}\n      onClick={() => props.onClick(interval.id)}\n    >\n      {(props.selected || showTooltip) && (\n        <Tooltip\n          interval={interval}\n          mode={mode}\n          onCadenceChange={(cadence) => handleCadenceChange(cadence)}\n        />\n      )}\n      <ResizableFreeBar\n        size={{\n          width: mode.lengthToWidth(interval.length),\n          height: height,\n        }}\n        minWidth={durationMultiplier}\n        minHeight={height}\n        maxHeight={height}\n        enable={{ right: true }}\n        grid={[1, 1]}\n        onResizeStop={(e, direction, ref, d) => handleResizeStop(d.width)}\n        onResize={(e, direction, ref, d) => notifyChange(d.width)}\n      >\n        <FreeBarIcons\n          height={height}\n          cadence={interval.cadence}\n          instructions={interval.instructions}\n        />\n      </ResizableFreeBar>\n    </Container>\n  );\n};\n\nconst Container = styled.div`\n  position: relative;\n`;\n\nconst ResizableFreeBar = styled(Resizable)`\n  border: 1px solid white;\n  background-image: url(\"${freerideSvg}\");\n`;\n\nconst FreeBarIcons = styled(BarIcons)`\n  padding-top: 25px;\n`;\n\nexport default FreeBar;\n","import React, { useState, useEffect } from \"react\";\nimport styled from \"styled-components\";\nimport { zoneColor, Zones } from \"../../types/Zones\";\nimport { Resizable } from \"re-resizable\";\nimport Tooltip from \"../Tooltip/Tooltip\";\nimport { SteadyInterval } from \"../../types/Interval\";\nimport { intensityMultiplier } from \"./multipliers\";\nimport { WorkoutMode } from \"../../modes/WorkoutMode\";\nimport { BarIcons } from \"./BarIcons\";\n\ninterface SteadyBarProps {\n  interval: SteadyInterval;\n  mode: WorkoutMode;\n  onChange: (interval: SteadyInterval) => void;\n  onClick: (id: string) => void;\n  selected: boolean;\n  showTooltip: boolean;\n}\n\nconst SteadyBar = ({ interval, mode, ...props }: SteadyBarProps) => {\n  const style = {\n    backgroundColor: zoneColor(interval.intensity),\n  };\n\n  const [width, setWidth] = useState(mode.lengthToWidth(interval.length));\n\n  const [height, setHeight] = useState(\n    mode.intensityToHeight(interval.intensity)\n  );\n\n  const [showTooltip, setShowTooltip] = useState(false);\n\n  const [selected, setSelected] = useState(props.selected);\n\n  useEffect(() => {\n    setSelected(props.selected);\n  }, [props.selected]);\n\n  const handleCadenceChange = (cadence: number | undefined) => {\n    props.onChange({ ...interval, cadence });\n  };\n\n  const handleResizeStop = (dWidth: number, dHeight: number) => {\n    setWidth(width + dWidth);\n    setHeight(height + dHeight);\n\n    notifyChange(dWidth, dHeight);\n  };\n\n  const notifyChange = (dWidth: number, dHeight: number) => {\n    props.onChange({\n      ...interval,\n      length: mode.widthToLength(width + dWidth),\n      intensity: mode.heightToIntensity(height + dHeight),\n    });\n  };\n\n  return (\n    <Container\n      onMouseEnter={() => setShowTooltip(true)}\n      onMouseLeave={() => setShowTooltip(false)}\n      onClick={() => props.onClick(interval.id)}\n      style={props.selected ? { zIndex: 10 } : {}}\n    >\n      {(selected || showTooltip) && props.showTooltip && (\n        <Tooltip\n          interval={interval}\n          mode={mode}\n          onCadenceChange={(cadence) => handleCadenceChange(cadence)}\n        />\n      )}\n      <RoundedResizable\n        size={{\n          width: mode.lengthToWidth(interval.length),\n          height: mode.intensityToHeight(interval.intensity),\n        }}\n        minWidth={3}\n        minHeight={intensityMultiplier * Zones.Z1.min}\n        maxHeight={intensityMultiplier * Zones.Z6.max}\n        enable={{ top: true, right: true }}\n        grid={[1, 1]}\n        onResizeStop={(e, direction, ref, d) =>\n          handleResizeStop(d.width, d.height)\n        }\n        onResize={(e, direction, ref, d) => notifyChange(d.width, d.height)}\n        style={style}\n      >\n        <BarIcons\n          height={mode.intensityToHeight(interval.intensity)}\n          cadence={interval.cadence}\n          instructions={interval.instructions}\n        />\n      </RoundedResizable>\n    </Container>\n  );\n};\n\nconst Container = styled.div`\n  position: relative;\n`;\n\nconst RoundedResizable = styled(Resizable)`\n  border-radius: 10px;\n  border: 1px solid white;\n`;\n\nexport default SteadyBar;\n","import React, { useState } from \"react\";\nimport styled from \"styled-components\";\nimport { zoneColor, ZoneColor, Zones, ZonesArray } from \"../../types/Zones\";\nimport { Resizable } from \"re-resizable\";\nimport Tooltip from \"../Tooltip/Tooltip\";\nimport { RampInterval } from \"../../types/Interval\";\nimport { intensityMultiplier } from \"./multipliers\";\nimport { WorkoutMode } from \"../../modes/WorkoutMode\";\nimport { BarIcons } from \"./BarIcons\";\n\ninterface IDictionary {\n  [index: string]: number;\n}\n\ninterface RampBarProps {\n  interval: RampInterval;\n  mode: WorkoutMode;\n  onChange: (interval: RampInterval) => void;\n  onClick: (id: string) => void;\n  selected: boolean;\n}\n\nconst RampBar = ({ interval, mode, ...props }: RampBarProps) => {\n  const [showTooltip, setShowTooltip] = useState(false);\n\n  const handleCadenceChange = (cadence: number | undefined) => {\n    props.onChange({ ...interval, cadence: cadence });\n  };\n\n  const width = mode.lengthToWidth(interval.length);\n  const [resizableWidth, setResizableWidth] = useState(width);\n\n  const startHeight = mode.intensityToHeight(interval.startIntensity);\n  const [resizableStartHeight, setResizableStartHeight] = useState(startHeight);\n\n  const endHeight = mode.intensityToHeight(interval.endIntensity);\n  const [resizableEndHeight, setResizableEndHeight] = useState(endHeight);\n\n  const handleStartResizeStop = (dHeight: number) => {\n    setResizableStartHeight(resizableStartHeight + dHeight);\n  };\n  const handleEndResizeStop = (dWidth: number, dHeight: number) => {\n    setResizableWidth(resizableWidth + dWidth);\n    setResizableEndHeight(resizableEndHeight + dHeight);\n  };\n\n  const handleStartResize = (dHeight: number) => {\n    props.onChange({\n      ...interval,\n      startIntensity: mode.heightToIntensity(resizableStartHeight + dHeight),\n    });\n  };\n  const handleEndResize = (dWidth: number, dHeight: number) => {\n    props.onChange({\n      ...interval,\n      length: mode.widthToLength(resizableWidth + dWidth),\n      startIntensity: mode.heightToIntensity(resizableStartHeight),\n      endIntensity: mode.heightToIntensity(resizableEndHeight + dHeight),\n    });\n  };\n\n  return (\n    <Container\n      onMouseEnter={() => setShowTooltip(true)}\n      onMouseLeave={() => setShowTooltip(false)}\n      style={props.selected ? { zIndex: 1 } : {}}\n      onClick={() => props.onClick(interval.id)}\n    >\n      {(props.selected || showTooltip) && (\n        <Tooltip\n          interval={interval}\n          mode={mode}\n          onCadenceChange={(cadence) => handleCadenceChange(cadence)}\n        />\n      )}\n      <Ramp onClick={() => props.onClick(interval.id)}>\n        <ResizableRamp\n          size={{\n            width: resizableWidth / 2,\n            height: resizableStartHeight,\n          }}\n          minWidth={3}\n          minHeight={intensityMultiplier * Zones.Z1.min}\n          maxHeight={intensityMultiplier * Zones.Z6.max}\n          enable={{ top: true, right: true }}\n          grid={[1, 1]}\n          onResizeStop={(e, direction, ref, d) =>\n            handleStartResizeStop(d.height)\n          }\n          onResize={(e, direction, ref, d) => handleStartResize(d.height)}\n        >\n          <BarIcons\n            height={startHeight > endHeight ? endHeight : startHeight}\n            cadence={interval.cadence}\n            instructions={interval.instructions}\n          />\n        </ResizableRamp>\n        <ResizableRamp\n          size={{\n            width: resizableWidth / 2,\n            height: resizableEndHeight,\n          }}\n          minWidth={3}\n          minHeight={intensityMultiplier * Zones.Z1.min}\n          maxHeight={intensityMultiplier * Zones.Z6.max}\n          enable={{ top: true, right: true }}\n          grid={[1, 1]}\n          onResizeStop={(e, direction, ref, d) =>\n            handleEndResizeStop(d.width, d.height)\n          }\n          onResize={(e, direction, ref, d) =>\n            handleEndResize(d.width, d.height)\n          }\n        ></ResizableRamp>\n      </Ramp>\n      <Rainbow\n        interval={interval}\n        startHeight={startHeight}\n        endHeight={endHeight}\n      />\n      <SvgPolygons\n        width={width}\n        startHeight={startHeight}\n        endHeight={endHeight}\n      />\n    </Container>\n  );\n};\n\nconst Container = styled.div`\n  position: relative;\n`;\n\nconst Ramp = styled.div`\n  display: flex;\n  align-items: flex-end;\n`;\n\nconst ResizableRamp = styled(Resizable)`\n  border-top: 1px dotted gray;\n  z-index: 5;\n`;\n\nconst Rainbow: React.FC<{\n  interval: RampInterval;\n  startHeight: number;\n  endHeight: number;\n}> = ({ interval, startHeight, endHeight }) => {\n  const trapezeHeight = endHeight > startHeight ? endHeight : startHeight;\n  const bars =\n    endHeight > startHeight\n      ? calculateColors(interval.startIntensity, interval.endIntensity)\n      : calculateColors(interval.endIntensity, interval.startIntensity);\n  const flexDirection = endHeight > startHeight ? \"row\" : \"row-reverse\";\n\n  return (\n    <RampColors\n      style={{\n        height: trapezeHeight,\n        flexDirection: flexDirection,\n        backgroundColor: zoneColor(interval.startIntensity),\n      }}\n    >\n      <Color\n        style={{\n          backgroundColor: ZoneColor.GRAY,\n          width: `${\n            (bars[\"Z1\"] * 100) /\n            Math.abs(interval.endIntensity - interval.startIntensity)\n          }%`,\n        }}\n      />\n      <Color\n        style={{\n          backgroundColor: ZoneColor.BLUE,\n          width: `${\n            (bars[\"Z2\"] * 100) /\n            Math.abs(interval.endIntensity - interval.startIntensity)\n          }%`,\n        }}\n      />\n      <Color\n        style={{\n          backgroundColor: ZoneColor.GREEN,\n          width: `${\n            (bars[\"Z3\"] * 100) /\n            Math.abs(interval.endIntensity - interval.startIntensity)\n          }%`,\n        }}\n      />\n      <Color\n        style={{\n          backgroundColor: ZoneColor.YELLOW,\n          width: `${\n            (bars[\"Z4\"] * 100) /\n            Math.abs(interval.endIntensity - interval.startIntensity)\n          }%`,\n        }}\n      />\n      <Color\n        style={{\n          backgroundColor: ZoneColor.ORANGE,\n          width: `${\n            (bars[\"Z5\"] * 100) /\n            Math.abs(interval.endIntensity - interval.startIntensity)\n          }%`,\n        }}\n      />\n      <Color\n        style={{\n          backgroundColor: ZoneColor.RED,\n          width: `${\n            (bars[\"Z6\"] * 100) /\n            Math.abs(interval.endIntensity - interval.startIntensity)\n          }%`,\n        }}\n      />\n    </RampColors>\n  );\n};\n\nconst RampColors = styled.div`\n  position: absolute;\n  bottom: 0px;\n  left: 0;\n  width: 100%;\n  display: flex;\n`;\n\nconst Color = styled.div`\n  &:first-child {\n    border-bottom-left-radius: 5px;\n  }\n  &:last-child {\n    border-bottom-right-radius: 5px;\n  }\n`;\n\nfunction calculateColors(start: number, end: number): IDictionary {\n  const bars = {} as IDictionary;\n\n  ZonesArray.forEach((zone, index) => {\n    if (start >= zone[0] && start < zone[1]) {\n      bars[\"Z\" + (index + 1)] = zone[1] - start;\n    } else if (end >= zone[0] && end < zone[1]) {\n      bars[\"Z\" + (index + 1)] = end - zone[0];\n    } else if (end >= zone[1] && start < zone[0]) {\n      bars[\"Z\" + (index + 1)] = zone[1] - zone[0];\n    } else {\n      bars[\"Z\" + (index + 1)] = 0;\n    }\n  });\n  return bars;\n}\n\nconst SvgPolygons: React.FC<{\n  width: number;\n  startHeight: number;\n  endHeight: number;\n}> = ({ width, startHeight, endHeight }) => {\n  const trapezeHeight = endHeight > startHeight ? endHeight : startHeight;\n  const trapezeTop =\n    endHeight > startHeight ? endHeight - startHeight : startHeight - endHeight;\n\n  const vertexB = endHeight > startHeight ? 0 : width;\n  const vertexA = endHeight > startHeight ? trapezeTop : 0;\n  const vertexD = endHeight > startHeight ? 0 : trapezeTop;\n\n  return (\n    <RampSvg height={`${trapezeHeight}`} width={`${width}`}>\n      <TransparentPolygon\n        points={`0,${vertexA} 0,${trapezeHeight} ${width},${trapezeHeight} ${width},${vertexD}`}\n      />\n      <HiddenPolygon points={`0,0 ${vertexB},${trapezeTop} ${width},0`} />\n    </RampSvg>\n  );\n};\n\nconst RampSvg = styled.svg`\n  position: absolute;\n  bottom: 0;\n  left: 0;\n`;\n\nconst TransparentPolygon = styled.polygon`\n  fill: transparent;\n`;\n\nconst HiddenPolygon = styled.polygon`\n  fill: white;\n  display: hidden;\n`;\n\nexport default RampBar;\n","import { range } from \"ramda\";\nimport { WorkoutMode } from \"../modes/WorkoutMode\";\nimport { Instruction } from \"../types/Instruction\";\nimport { RepetitionInterval, SteadyInterval } from \"../types/Interval\";\nimport intervalFactory from \"./intervalFactory\";\n\nexport function repetitionToSteadyIntervals(\n  interval: RepetitionInterval,\n  mode: WorkoutMode\n): SteadyInterval[] {\n  return range(0, interval.repeat).flatMap((n) => {\n    const onSize: number = mode.fromLength(interval.onLength);\n    const offSize: number = mode.fromLength(interval.offLength);\n    const precedingSize: number = (onSize + offSize) * n;\n\n    return [\n      intervalFactory.steady(\n        {\n          length: interval.onLength,\n          intensity: interval.onIntensity,\n          cadence: interval.onCadence,\n          pace: interval.pace,\n          instructions: interval.instructions.filter(\n            withinRange(precedingSize, precedingSize + onSize, mode)\n          ),\n        },\n        mode\n      ),\n      intervalFactory.steady(\n        {\n          length: interval.offLength,\n          intensity: interval.offIntensity,\n          cadence: interval.offCadence,\n          pace: interval.pace,\n          instructions: interval.instructions.filter(\n            withinRange(\n              precedingSize + onSize,\n              precedingSize + onSize + offSize,\n              mode\n            )\n          ),\n        },\n        mode\n      ),\n    ];\n  });\n}\n\nfunction withinRange(\n  from: number,\n  to: number,\n  mode: WorkoutMode\n): (ins: Instruction) => boolean {\n  return (ins: Instruction) =>\n    mode.fromLength(ins.offset) >= from && mode.fromLength(ins.offset) < to;\n}\n","import React, { useMemo } from \"react\";\nimport SteadyBar from \"./SteadyBar\";\nimport styled from \"styled-components\";\nimport { RepetitionInterval, SteadyInterval } from \"../../types/Interval\";\nimport { WorkoutMode } from \"../../modes/WorkoutMode\";\nimport { repetitionToSteadyIntervals } from \"../../interval/repetition\";\n\ninterface RepetitionBarProps {\n  interval: RepetitionInterval;\n  mode: WorkoutMode;\n  onChange: (interval: RepetitionInterval) => void;\n  onClick: (id: string) => void;\n  selected: boolean;\n}\n\nconst RepetitionBar = ({ interval, ...props }: RepetitionBarProps) => {\n  const subIntervals = useMemo(() => {\n    return repetitionToSteadyIntervals(interval, props.mode);\n    // eslint-disable-next-line\n  }, [interval.repeat, interval.instructions]);\n\n  function handleOnChange(values: SteadyInterval) {\n    const index = subIntervals.findIndex((sub) => sub.id === values.id);\n\n    for (var i = 0; i < subIntervals.length; i++) {\n      if (index % 2 === i % 2) {\n        subIntervals[i].length = values.length;\n        subIntervals[i].intensity = values.intensity;\n        subIntervals[i].cadence = values.cadence;\n      }\n    }\n\n    props.onChange({\n      ...interval,\n      onCadence: subIntervals[0].cadence,\n      offCadence: subIntervals[1].cadence,\n      repeat: interval.repeat,\n      onLength: subIntervals[0].length,\n      offLength: subIntervals[1].length,\n      onIntensity: subIntervals[0].intensity,\n      offIntensity: subIntervals[1].intensity,\n    });\n  }\n\n  function handleAddInterval() {\n    props.onChange({\n      ...interval,\n      repeat: interval.repeat + 1,\n    });\n  }\n\n  function handleRemoveInterval() {\n    if (interval.repeat > 1) {\n      props.onChange({\n        ...interval,\n        repeat: interval.repeat - 1,\n      });\n    }\n  }\n\n  const renderBar = (subInterval: SteadyInterval, withTooltip: boolean) => (\n    <SteadyBar\n      key={subInterval.id}\n      interval={subInterval}\n      mode={props.mode}\n      onChange={handleOnChange}\n      onClick={() => props.onClick(interval.id)}\n      selected={props.selected}\n      showTooltip={withTooltip}\n    />\n  );\n\n  return (\n    <div>\n      <Buttons>\n        <button onClick={handleAddInterval}>+</button>\n        <button onClick={handleRemoveInterval}>-</button>\n      </Buttons>\n      <SubIntervals>\n        {subIntervals.map((sub, index) =>\n          renderBar(sub, index === 0 || index === subIntervals.length - 1)\n        )}\n      </SubIntervals>\n    </div>\n  );\n};\n\nconst Buttons = styled.div`\n  position: absolute;\n  margin-top: -30px;\n`;\n\nconst SubIntervals = styled.div`\n  display: flex;\n  flex-direction: row;\n  align-items: flex-end;\n`;\n\nexport default RepetitionBar;\n","import React, { useState } from \"react\";\nimport Draggable from \"react-draggable\";\nimport styled from \"styled-components\";\nimport { FontAwesomeIcon } from \"@fortawesome/react-fontawesome\";\nimport { faComment, faTrashAlt } from \"@fortawesome/free-solid-svg-icons\";\nimport { Instruction } from \"../../types/Instruction\";\nimport * as format from \"../../utils/format\";\nimport { isDuration, Length } from \"../../types/Length\";\nimport { WorkoutMode } from \"../../modes/WorkoutMode\";\n\ninterface InstructionEditorProps {\n  instruction: Instruction;\n  width: number;\n  onChange: (instruction: Instruction) => void;\n  onDelete: (id: string) => void;\n  index: number;\n  mode: WorkoutMode;\n}\n\nconst roundingPrecision = { meters: 10, seconds: 5 };\n\nconst InstructionEditor = (props: InstructionEditorProps) => {\n  const [text, setText] = useState(props.instruction.text);\n  const [xPosition, setXPosition] = useState(\n    props.mode.lengthToWidth(props.instruction.offset)\n  );\n\n  const [showInput, setShowInput] = useState(false);\n\n  function handleTouch(position: number) {\n    props.onChange({\n      id: props.instruction.id,\n      text: text,\n      offset: props.mode.widthToLength(position, roundingPrecision),\n    });\n  }\n\n  function handleDragging(position: number) {\n    setShowInput(false);\n    setXPosition(position);\n  }\n\n  function handleInputChange(value: string) {\n    setText(value);\n\n    props.onChange({\n      id: props.instruction.id,\n      text: value,\n      offset: props.mode.widthToLength(xPosition, roundingPrecision),\n    });\n  }\n\n  function handleDelete() {\n    if (\n      text === \"\" ||\n      window.confirm(\"Are you sure you want to delete this comment?\")\n    ) {\n      props.onDelete(props.instruction.id);\n    }\n  }\n\n  const renderOffset = (offset: Length): string =>\n    isDuration(offset) ? format.duration(offset) : `${offset.meters} m`;\n\n  return (\n    <Draggable\n      axis=\"x\"\n      handle=\".handle\"\n      defaultPosition={{ x: xPosition, y: (props.index % 5) * 20 }}\n      bounds={{ left: 0, right: props.width }}\n      scale={1}\n      onStop={(e, data) => handleTouch(data.x)}\n      onDrag={(e, data) => handleDragging(data.x)}\n    >\n      <DraggableItem>\n        <DragHandle onMouseDown={() => setShowInput(!showInput)} />\n        {showInput && (\n          <EditorContainer>\n            <DeleteButton onClick={() => handleDelete()} />\n            <Offset>{renderOffset(props.instruction.offset)}</Offset>\n            <TextEditor\n              value={text}\n              onChange={(e) => handleInputChange(e.target.value)}\n            />\n          </EditorContainer>\n        )}\n        <VerticalLine />\n      </DraggableItem>\n    </Draggable>\n  );\n};\n\nconst DraggableItem = styled.div`\n  position: absolute;\n`;\n\nconst DragHandle = styled(FontAwesomeIcon).attrs(() => ({\n  icon: faComment,\n  size: \"lg\",\n  fixedWidth: true,\n  className: \"handle\", // Referenced by Draggable\n}))`\n  display: block;\n  opacity: 0.7;\n  &:hover {\n    opacity: 0.8;\n  }\n`;\n\nconst EditorContainer = styled.div`\n  position: relative;\n  padding: 5px;\n`;\n\nconst VerticalLine = styled.div`\n  position: absolute;\n  top: 30px;\n  left: 0px;\n  right: 0;\n  height: 90vh;\n  width: 1px;\n  border-left: 1px dotted gray;\n  z-index: 0;\n`;\n\nconst Offset = styled.span`\n  font-size: 13px;\n`;\n\nconst TextEditor = styled.textarea`\n  display: block;\n  padding: 5px;\n  width: 250px;\n  background-color: white;\n`;\n\nconst DeleteButton = styled(FontAwesomeIcon).attrs(() => ({\n  icon: faTrashAlt,\n  fixedWidth: true,\n}))`\n  color: gray;\n  &:hover {\n    color: #666;\n  }\n`;\n\nexport default InstructionEditor;\n","import React from \"react\";\nimport { Interval } from \"../../types/Interval\";\nimport FreeBar from \"./FreeBar\";\nimport SteadyBar from \"./SteadyBar\";\nimport RampBar from \"./RampBar\";\nimport RepetitionBar from \"./RepetitionBar\";\nimport { WorkoutMode } from \"../../modes/WorkoutMode\";\nimport InstructionEditor from \"../InstructionEditor/InstructionEditor\";\nimport styled from \"styled-components\";\nimport { Instruction } from \"../../types/Instruction\";\n\ninterface GenericBarProps {\n  interval: Interval;\n  mode: WorkoutMode;\n  selected: boolean;\n  onChange: (interval: Interval) => void;\n  onClick: (id: string) => void;\n  onInstructionChange: (payload: {\n    intervalId: string;\n    instruction: Instruction;\n  }) => void;\n  onInstructionDelete: (payload: {\n    intervalId: string;\n    instructionId: string;\n  }) => void;\n}\n\nconst GenericBar = (props: GenericBarProps) => {\n  return (\n    <div>\n      <IntervalBar {...props} />\n      {props.selected && (\n        <InstructionsList\n          instructions={props.interval.instructions}\n          mode={props.mode}\n          width={props.mode.lengthToWidth(\n            props.mode.intervalLength(props.interval)\n          )}\n          onChange={(instruction) =>\n            props.onInstructionChange({\n              intervalId: props.interval.id,\n              instruction,\n            })\n          }\n          onDelete={(instructionId) =>\n            props.onInstructionDelete({\n              intervalId: props.interval.id,\n              instructionId,\n            })\n          }\n        />\n      )}\n    </div>\n  );\n};\n\nconst InstructionsList: React.FC<{\n  instructions: Instruction[];\n  mode: WorkoutMode;\n  width: number;\n  onChange: (instruction: Instruction) => void;\n  onDelete: (instructionId: string) => void;\n}> = ({ instructions, mode, width, onChange, onDelete }) => (\n  <InstructionsWrap>\n    {instructions.map((instruction, index) => (\n      <InstructionEditor\n        key={instruction.id}\n        instruction={instruction}\n        width={width}\n        onChange={onChange}\n        onDelete={onDelete}\n        index={index}\n        mode={mode}\n      />\n    ))}\n  </InstructionsWrap>\n);\n\nconst InstructionsWrap = styled.div`\n  position: absolute;\n  top: 80px;\n  z-index: 11;\n`;\n\nconst IntervalBar = ({\n  interval,\n  mode,\n  selected,\n  onChange,\n  onClick,\n}: GenericBarProps) => {\n  switch (interval.type) {\n    case \"steady\":\n      return (\n        <SteadyBar\n          interval={interval}\n          mode={mode}\n          onChange={onChange}\n          onClick={onClick}\n          selected={selected}\n          showTooltip={true}\n        />\n      );\n    case \"ramp\":\n      return (\n        <RampBar\n          interval={interval}\n          mode={mode}\n          onChange={onChange}\n          onClick={onClick}\n          selected={selected}\n        />\n      );\n    case \"free\":\n      return (\n        <FreeBar\n          interval={interval}\n          mode={mode}\n          onChange={onChange}\n          onClick={onClick}\n          selected={selected}\n        />\n      );\n    case \"repetition\":\n      return (\n        <RepetitionBar\n          interval={interval}\n          mode={mode}\n          onChange={onChange}\n          onClick={onClick}\n          selected={selected}\n        />\n      );\n  }\n};\n\nexport default GenericBar;\n","import styled from \"styled-components\";\n\nexport const XAxis = styled.div<{ width: number }>`\n  position: absolute;\n  bottom: 0px;\n  border-top: 1px solid gray;\n  overflow: hidden;\n  min-width: 1320px;\n  width: ${({ width }) => width}px;\n`;\n\nexport const XAxisValue = styled.span`\n  position: relative;\n  display: inline-block;\n  margin-top: 20px;\n  padding: 0;\n\n  &::before {\n    content: \"\";\n    position: absolute;\n    width: 1px;\n    height: 10px;\n    top: -20px;\n    left: 0;\n    background-color: gray;\n  }\n`;\n","import React from \"react\";\nimport styled from \"styled-components\";\nimport { XAxis, XAxisValue } from \"./XAxis\";\n\nconst hoursBy10Minutes = (hours: number): string[] =>\n  [...new Array(hours)].flatMap((v, h) =>\n    [\"00\", \"10\", \"20\", \"30\", \"40\", \"50\"].map((m) => `${h}:${m}`)\n  );\n\nconst TimeAxis = ({ width }: { width: number }) => (\n  <XAxis width={width}>\n    {hoursBy10Minutes(6).map((time) => (\n      <TimeAxisValue key={time}>{time}</TimeAxisValue>\n    ))}\n  </XAxis>\n);\n\nconst TimeAxisValue = styled(XAxisValue)`\n  width: 200px;\n`;\n\nexport default TimeAxis;\n","import React from \"react\";\nimport styled from \"styled-components\";\nimport { Zones } from \"../../types/Zones\";\n\nconst ZoneAxis = () => (\n  <Container>\n    {Object.entries(Zones)\n      .reverse()\n      .map(([name, zone]) => (\n        <ZoneItem key={name} zone={zone}>\n          {name}\n        </ZoneItem>\n      ))}\n  </Container>\n);\n\nconst Container = styled.div`\n  position: absolute;\n  bottom: 50px;\n  left: 2px;\n  color: gray;\n`;\n\nconst ZoneItem = styled.div<{ zone: { max: number } }>`\n  position: absolute;\n  bottom: 0;\n  left: 0;\n  height: ${({ zone }) => zone.max * 250}px;\n\n  /* Zone 6 has no upper bound */\n  &:not(:first-child) {\n    border-top: 1px solid gray;\n  }\n`;\n\nexport default ZoneAxis;\n","import React from \"react\";\nimport styled from \"styled-components\";\nimport { XAxis, XAxisValue } from \"./XAxis\";\n\nconst DistanceAxis = ({ width }: { width: number }) => (\n  <XAxis width={width}>\n    {[...new Array(44)].map((e, i) => (\n      <DistanceAxisValue key={i}>{i}K</DistanceAxisValue>\n    ))}\n  </XAxis>\n);\n\nconst DistanceAxisValue = styled(XAxisValue)`\n  width: 100px;\n`;\n\nexport default DistanceAxis;\n","import React from \"react\";\nimport styled from \"styled-components\";\nimport { PaceType } from \"../../types/PaceType\";\n\ninterface PaceSelectorProps {\n  value?: PaceType;\n  onChange: (value: PaceType) => void;\n}\n\nconst PaceSelector = ({ value, onChange }: PaceSelectorProps) => (\n  <StyledSelect\n    name=\"pace\"\n    value={value}\n    onChange={(e) => onChange(parseInt(e.target.value))}\n  >\n    <option value=\"0\">1 Mile Pace</option>\n    <option value=\"1\">5K Pace</option>\n    <option value=\"2\">10K Pace</option>\n    <option value=\"3\">Half Marathon Pace</option>\n    <option value=\"4\">Marathon Pace</option>\n  </StyledSelect>\n);\n\nconst StyledSelect = styled.select`\n  font-size: 16px;\n  background-color: rgba(0, 0, 0, 0.7);\n  color: white;\n  padding: 10px;\n  border-radius: 5px;\n`;\n\nexport default PaceSelector;\n","import React from \"react\";\nimport { IconDefinition } from \"@fortawesome/fontawesome-svg-core\";\nimport { FontAwesomeIcon } from \"@fortawesome/react-fontawesome\";\nimport styled from \"styled-components\";\n\ninterface ActionButtonProps {\n  title: string;\n  icon: IconDefinition;\n  onClick: () => void;\n}\n\nconst ActionButton: React.FC<ActionButtonProps> = ({\n  title,\n  icon,\n  onClick,\n}) => {\n  return (\n    <RoundButton onClick={onClick} title={title}>\n      <FontAwesomeIcon icon={icon} size=\"lg\" fixedWidth />\n    </RoundButton>\n  );\n};\n\nconst RoundButton = styled.button`\n  padding: 20px;\n  margin: 0 5px;\n  background-color: rgba(0, 0, 0, 0.7);\n  color: white;\n  border: 0;\n  border-radius: 50%;\n  cursor: pointer;\n\n  &:hover {\n    background-color: rgba(0, 0, 0, 0.8);\n  }\n`;\n\nexport default ActionButton;\n","import { v4 as uuidv4 } from \"uuid\";\nimport { WorkoutMode } from \"../modes/WorkoutMode\";\nimport { Distance, Duration, Length } from \"./Length\";\n\nexport interface Instruction {\n  id: string;\n  text: string;\n  offset: Length;\n}\n\nexport function createInstruction(\n  fields: Partial<Instruction>,\n  mode: WorkoutMode\n): Instruction {\n  return {\n    id: uuidv4(),\n    text: \"\",\n    offset: mode.lengthType === \"time\" ? Duration(0) : Distance(0),\n    ...fields,\n  };\n}\n","import React from \"react\";\nimport { connect } from \"react-redux\";\nimport {\n  faTrash,\n  faArrowRight,\n  faArrowLeft,\n  faCopy,\n  faComment,\n} from \"@fortawesome/free-solid-svg-icons\";\nimport PaceSelector from \"./PaceSelector\";\nimport ActionButton from \"../Button/ActionButton\";\nimport { selectSportType } from \"../../rdx/state/meta\";\nimport { RootState } from \"../../rdx/store\";\nimport {\n  removeSelectedInterval,\n  duplicateSelectedInterval,\n  moveSelectedInterval,\n  selectSelectedIntervalPace,\n  setSelectedIntervalPace,\n  addInstruction,\n  selectSelectedIntervalId,\n} from \"../../rdx/state/intervals\";\nimport { ConnectedProps } from \"../../types/ConnectedProps\";\nimport styled from \"styled-components\";\nimport { createInstruction } from \"../../types/Instruction\";\nimport { selectMode } from \"../../rdx/state/mode\";\n\nconst mapStateToProps = (state: RootState) => ({\n  mode: selectMode(state),\n  sportType: selectSportType(state),\n  selectedIntervalPace: selectSelectedIntervalPace(state),\n  selectedIntervalId: selectSelectedIntervalId(state),\n});\n\nconst mapDispatchToProps = {\n  setSelectedIntervalPace,\n  removeSelectedInterval,\n  duplicateSelectedInterval,\n  moveSelectedInterval,\n  addInstruction,\n};\n\ntype SelectionToolbarProps = ConnectedProps<\n  typeof mapStateToProps,\n  typeof mapDispatchToProps\n>;\n\nconst SelectionToolbar = (props: SelectionToolbarProps) => {\n  const {\n    mode,\n    sportType,\n    selectedIntervalPace,\n    selectedIntervalId,\n    setSelectedIntervalPace,\n    removeSelectedInterval,\n    duplicateSelectedInterval,\n    moveSelectedInterval,\n    addInstruction,\n  } = props;\n\n  return (\n    <ActionsContainer>\n      <ActionButton\n        title=\"Move Left\"\n        icon={faArrowLeft}\n        onClick={() => moveSelectedInterval(-1)}\n      />\n      <ActionButton\n        title=\"Move Right\"\n        icon={faArrowRight}\n        onClick={() => moveSelectedInterval(+1)}\n      />\n      <ActionButton\n        title=\"Delete\"\n        icon={faTrash}\n        onClick={removeSelectedInterval}\n      />\n      <ActionButton\n        title=\"Duplicate\"\n        icon={faCopy}\n        onClick={duplicateSelectedInterval}\n      />\n      <ActionButton\n        title=\"Add text event\"\n        icon={faComment}\n        onClick={() => {\n          selectedIntervalId &&\n            addInstruction({\n              intervalId: selectedIntervalId,\n              instruction: createInstruction({}, mode),\n            });\n        }}\n      />\n      {sportType === \"run\" && (\n        <PaceSelector\n          value={selectedIntervalPace}\n          onChange={setSelectedIntervalPace}\n        />\n      )}\n    </ActionsContainer>\n  );\n};\n\nconst ActionsContainer = styled.div`\n  position: absolute;\n  top: 0;\n  left: 0;\n  right: 0;\n  width: 220px;\n  margin: 0 auto;\n  padding: 5px;\n  z-index: 10;\n`;\n\nexport default connect(mapStateToProps, mapDispatchToProps)(SelectionToolbar);\n","import React, { useState, useEffect, useRef } from \"react\";\nimport { connect } from \"react-redux\";\nimport GenericBar from \"../Bar/GenericBar\";\nimport TimeAxis from \"../Axis/TimeAxis\";\nimport ZoneAxis from \"../Axis/ZoneAxis\";\nimport DistanceAxis from \"../Axis/DistanceAxis\";\nimport { selectLengthType } from \"../../rdx/state/meta\";\nimport { RootState } from \"../../rdx/store\";\nimport {\n  removeInstruction,\n  selectIntervals,\n  updateInstruction,\n  updateInterval,\n} from \"../../rdx/state/intervals\";\nimport { selectMode } from \"../../rdx/state/mode\";\nimport { ConnectedProps } from \"../../types/ConnectedProps\";\nimport {\n  selectSelectedId,\n  clearSelection,\n  setSelectedId,\n} from \"../../rdx/state/selectedId\";\nimport SelectionToolbar from \"../SelectionToolbar/SelectionToolbar\";\nimport styled from \"styled-components\";\nimport { debounce } from \"lodash\";\n\nconst mapStateToProps = (state: RootState) => ({\n  lengthType: selectLengthType(state),\n  intervals: selectIntervals(state),\n  mode: selectMode(state),\n  selectedId: selectSelectedId(state),\n});\n\nconst mapDispatchToProps = {\n  updateInterval,\n  setSelectedId,\n  clearSelection,\n  updateInstruction,\n  removeInstruction,\n};\n\ntype EditorProps = ConnectedProps<\n  typeof mapStateToProps,\n  typeof mapDispatchToProps\n>;\n\nconst Editor = ({\n  lengthType,\n  intervals,\n  mode,\n  selectedId,\n  updateInterval,\n  setSelectedId,\n  clearSelection,\n  updateInstruction,\n  removeInstruction,\n}: EditorProps) => {\n  const segmentsRef = useRef<HTMLDivElement>(null);\n  const [xAxisWidth, setXAxisWidth] = useState(1320);\n\n  useEffect(\n    debounce(() => {\n      setXAxisWidth(segmentsRef.current?.scrollWidth || 1320);\n    }, 200),\n    [segmentsRef, intervals]\n  );\n\n  function toggleSelection(id: string) {\n    if (id === selectedId) {\n      clearSelection();\n    } else {\n      setSelectedId(id);\n    }\n  }\n\n  return (\n    <Container>\n      {selectedId && <SelectionToolbar />}\n\n      <Canvas>\n        {selectedId && (\n          <Fader style={{ width: xAxisWidth }} onClick={clearSelection} />\n        )}\n        <Segments ref={segmentsRef}>\n          {intervals.map((interval) => (\n            <GenericBar\n              key={interval.id}\n              interval={interval}\n              mode={mode}\n              onChange={updateInterval}\n              onClick={toggleSelection}\n              onInstructionChange={updateInstruction}\n              onInstructionDelete={removeInstruction}\n              selected={interval.id === selectedId}\n            />\n          ))}\n        </Segments>\n\n        {lengthType === \"time\" ? (\n          <TimeAxis width={xAxisWidth} />\n        ) : (\n          <DistanceAxis width={xAxisWidth} />\n        )}\n      </Canvas>\n      <ZoneAxis />\n    </Container>\n  );\n};\n\nconst Container = styled.div`\n  flex: 1;\n  position: relative;\n  white-space: nowrap;\n  background-color: white;\n\n  padding: 0px 40px;\n  margin: 10px auto;\n  overflow-x: hidden;\n  width: 100%;\n  max-width: 1280px;\n  -webkit-box-shadow: 0px 0px 27px -9px rgba(0, 0, 0, 0.35);\n  -moz-box-shadow: 0px 0px 27px -9px rgba(0, 0, 0, 0.35);\n  box-shadow: 0px 0px 27px -9px rgba(0, 0, 0, 0.35);\n  border-radius: 5px;\n`;\n\nconst Canvas = styled.div`\n  position: absolute;\n  width: 100%;\n  max-width: 1320px;\n  height: 100%;\n  overflow-y: hidden;\n  overflow-x: visible;\n  bottom: 10px;\n`;\n\nconst Segments = styled.div`\n  position: absolute;\n  display: flex;\n  flex-wrap: nowrap;\n  justify-content: flex-start;\n  align-items: flex-end;\n  bottom: 0px;\n  top: 0px;\n  padding-bottom: 40px;\n  margin-right: 100px;\n`;\n\nconst Fader = styled.div`\n  position: absolute;\n  background-color: rgba(255, 255, 255, 0.9);\n  top: 0;\n  left: 0;\n  right: 0;\n  bottom: 0;\n  width: 50000px;\n  height: 100%;\n  z-index: 1;\n`;\n\nexport default connect(mapStateToProps, mapDispatchToProps)(Editor);\n","import React, { useState } from \"react\";\nimport { connect } from \"react-redux\";\nimport Popup from \"../Popup/Popup\";\nimport Footer from \"../Footer/Footer\";\nimport {\n  faBiking,\n  faRunning,\n  faClock,\n  faRuler,\n} from \"@fortawesome/free-solid-svg-icons\";\nimport SaveForm from \"../Forms/SaveForm\";\nimport Head from \"../Head/Head\";\nimport RunningTimesEditor from \"./RunningTimesEditor\";\nimport LeftRightToggle from \"./LeftRightToggle\";\nimport Keyboard from \"../Keyboard/Keyboard\";\nimport Stats from \"./Stats\";\nimport Title from \"./Title\";\nimport { SportType } from \"../../types/SportType\";\nimport { Duration } from \"../../types/Length\";\nimport { LengthType } from \"../../types/LengthType\";\nimport {\n  selectAuthor,\n  selectDescription,\n  selectName,\n  selectSportType,\n  selectLengthType,\n  setSportType,\n  setLengthType,\n} from \"../../rdx/state/meta\";\nimport { RootState } from \"../../rdx/store\";\nimport {\n  selectFtp,\n  selectRunningTimes,\n  setRunningTimes,\n} from \"../../rdx/state/athlete\";\nimport {\n  selectIntervals,\n  adjustSelectedIntervalIntensity,\n  adjustSelectedIntervalDuration,\n  updateInterval,\n  removeSelectedInterval,\n  setIntervals,\n} from \"../../rdx/state/intervals\";\nimport { selectMode } from \"../../rdx/state/mode\";\nimport Toolbar from \"../Toolbar/Toolbar\";\nimport { ConnectedProps } from \"../../types/ConnectedProps\";\nimport { clearSelection, setSelectedId } from \"../../rdx/state/selectedId\";\nimport Editor from \"../Editor/Editor\";\nimport styled from \"styled-components\";\n\nconst mapStateToProps = (state: RootState) => ({\n  name: selectName(state),\n  author: selectAuthor(state),\n  description: selectDescription(state),\n  sportType: selectSportType(state),\n  lengthType: selectLengthType(state),\n  ftp: selectFtp(state),\n  runningTimes: selectRunningTimes(state),\n  intervals: selectIntervals(state),\n  mode: selectMode(state),\n});\n\nconst mapDispatchToProps = {\n  setSportType,\n  setLengthType,\n  setRunningTimes,\n  setIntervals,\n  adjustSelectedIntervalIntensity,\n  adjustSelectedIntervalDuration,\n  updateInterval,\n  setSelectedId,\n  clearSelection,\n  removeSelectedInterval,\n};\n\ntype EditorPageProps = ConnectedProps<\n  typeof mapStateToProps,\n  typeof mapDispatchToProps\n>;\n\nconst EditorPage = ({\n  name,\n  author,\n  description,\n  sportType,\n  lengthType,\n  ftp,\n  runningTimes,\n  intervals,\n  mode,\n  setSportType,\n  setLengthType,\n  setRunningTimes,\n  setIntervals,\n  adjustSelectedIntervalIntensity,\n  adjustSelectedIntervalDuration,\n  removeSelectedInterval,\n}: EditorPageProps) => {\n  const [savePopupIsVisile, setSavePopupVisibility] = useState(false);\n\n  const isEmpty = () => intervals.length === 0;\n\n  function switchSportType(newSportType: SportType) {\n    if (\n      isEmpty() ||\n      window.confirm(\n        `Switching from ${sportType} to ${newSportType} will clear current workout. Are you sure?`\n      )\n    ) {\n      setIntervals([]);\n      setSportType(newSportType);\n    }\n  }\n\n  function switchLengthType(newLengthType: LengthType) {\n    if (\n      isEmpty() ||\n      window.confirm(\n        `Switching from ${lengthType} to ${newLengthType} will clear current workout. Are you sure?`\n      )\n    ) {\n      setIntervals([]);\n      setLengthType(newLengthType);\n    }\n  }\n\n  return (\n    <KeyboardContainer\n      onBackspacePress={removeSelectedInterval}\n      onUpPress={() => adjustSelectedIntervalIntensity(0.01)}\n      onDownPress={() => adjustSelectedIntervalIntensity(-0.01)}\n      onLeftPress={() => adjustSelectedIntervalDuration(Duration(-5))}\n      onRightPress={() => adjustSelectedIntervalDuration(Duration(5))}\n    >\n      <Head name={name} description={description} />\n\n      {savePopupIsVisile && (\n        <Popup width=\"500px\" onClose={() => setSavePopupVisibility(false)}>\n          <SaveForm />\n        </Popup>\n      )}\n      <Header>\n        <Title\n          name={name}\n          author={author}\n          description={description}\n          onClick={() => setSavePopupVisibility(true)}\n        />\n        <HeaderRight>\n          <Stats intervals={intervals} ftp={ftp} mode={mode} />\n          {sportType === \"run\" && (\n            <LeftRightToggle<\"time\", \"distance\">\n              label=\"Duration Type\"\n              leftValue=\"time\"\n              rightValue=\"distance\"\n              leftIcon={faClock}\n              rightIcon={faRuler}\n              selected={lengthType}\n              onChange={switchLengthType}\n            />\n          )}\n          <LeftRightToggle<\"bike\", \"run\">\n            label=\"Sport Type\"\n            leftValue=\"bike\"\n            rightValue=\"run\"\n            leftIcon={faBiking}\n            rightIcon={faRunning}\n            selected={sportType}\n            onChange={switchSportType}\n          />\n        </HeaderRight>\n      </Header>\n      {sportType === \"run\" && (\n        <RunningTimesEditor times={runningTimes} onChange={setRunningTimes} />\n      )}\n\n      <Editor />\n\n      <Toolbar />\n      <Footer />\n    </KeyboardContainer>\n  );\n};\n\nconst KeyboardContainer = styled(Keyboard)`\n  display: flex;\n  flex-direction: column;\n  min-height: 100%;\n  margin: 0px;\n  background-color: #eaeaea;\n  overflow-x: hidden;\n`;\n\nconst Header = styled.div`\n  margin: 0 auto;\n  text-align: left;\n  max-width: 1360px;\n  width: 100%;\n  display: flex;\n  flex-direction: row;\n`;\n\nconst HeaderRight = styled.div`\n  padding: 10px;\n  display: flex;\n  flex-direction: row;\n`;\n\nexport default connect(mapStateToProps, mapDispatchToProps)(EditorPage);\n","import React from \"react\";\nimport { BrowserRouter as Router, Switch, Route } from \"react-router-dom\";\nimport EditorPage from \"./components/EditorPage/EditorPage\";\n\nexport default function App() {\n  return (\n    <Router>\n      <Switch>\n        <Route path=\"/\">\n          <EditorPage />\n        </Route>\n      </Switch>\n    </Router>\n  );\n}\n","// This optional code is used to register a service worker.\n// register() is not called by default.\n\n// This lets the app load faster on subsequent visits in production, and gives\n// it offline capabilities. However, it also means that developers (and users)\n// will only see deployed updates on subsequent visits to a page, after all the\n// existing tabs open on the page have been closed, since previously cached\n// resources are updated in the background.\n\n// To learn more about the benefits of this model and instructions on how to\n// opt-in, read https://bit.ly/CRA-PWA\n\nconst isLocalhost = Boolean(\n  window.location.hostname === \"localhost\" ||\n    // [::1] is the IPv6 localhost address.\n    window.location.hostname === \"[::1]\" ||\n    // 127.0.0.0/8 are considered localhost for IPv4.\n    window.location.hostname.match(\n      /^127(?:\\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/\n    )\n);\n\nexport function register(config) {\n  if (process.env.NODE_ENV === \"production\" && \"serviceWorker\" in navigator) {\n    // The URL constructor is available in all browsers that support SW.\n    const publicUrl = new URL(process.env.PUBLIC_URL, window.location.href);\n    if (publicUrl.origin !== window.location.origin) {\n      // Our service worker won't work if PUBLIC_URL is on a different origin\n      // from what our page is served on. This might happen if a CDN is used to\n      // serve assets; see https://github.com/facebook/create-react-app/issues/2374\n      return;\n    }\n\n    window.addEventListener(\"load\", () => {\n      const swUrl = `${process.env.PUBLIC_URL}/service-worker.js`;\n\n      if (isLocalhost) {\n        // This is running on localhost. Let's check if a service worker still exists or not.\n        checkValidServiceWorker(swUrl, config);\n\n        // Add some additional logging to localhost, pointing developers to the\n        // service worker/PWA documentation.\n        navigator.serviceWorker.ready.then(() => {\n          console.log(\n            \"This web app is being served cache-first by a service \" +\n              \"worker. To learn more, visit https://bit.ly/CRA-PWA\"\n          );\n        });\n      } else {\n        // Is not localhost. Just register service worker\n        registerValidSW(swUrl, config);\n      }\n    });\n  }\n}\n\nfunction registerValidSW(swUrl, config) {\n  navigator.serviceWorker\n    .register(swUrl)\n    .then((registration) => {\n      registration.onupdatefound = () => {\n        const installingWorker = registration.installing;\n        if (installingWorker == null) {\n          return;\n        }\n        installingWorker.onstatechange = () => {\n          if (installingWorker.state === \"installed\") {\n            if (navigator.serviceWorker.controller) {\n              // At this point, the updated precached content has been fetched,\n              // but the previous service worker will still serve the older\n              // content until all client tabs are closed.\n              console.log(\n                \"New content is available and will be used when all \" +\n                  \"tabs for this page are closed. See https://bit.ly/CRA-PWA.\"\n              );\n\n              // Execute callback\n              if (config && config.onUpdate) {\n                config.onUpdate(registration);\n              }\n            } else {\n              // At this point, everything has been precached.\n              // It's the perfect time to display a\n              // \"Content is cached for offline use.\" message.\n              console.log(\"Content is cached for offline use.\");\n\n              // Execute callback\n              if (config && config.onSuccess) {\n                config.onSuccess(registration);\n              }\n            }\n          }\n        };\n      };\n    })\n    .catch((error) => {\n      console.error(\"Error during service worker registration:\", error);\n    });\n}\n\nfunction checkValidServiceWorker(swUrl, config) {\n  // Check if the service worker can be found. If it can't reload the page.\n  fetch(swUrl, {\n    headers: { \"Service-Worker\": \"script\" },\n  })\n    .then((response) => {\n      // Ensure service worker exists, and that we really are getting a JS file.\n      const contentType = response.headers.get(\"content-type\");\n      if (\n        response.status === 404 ||\n        (contentType != null && contentType.indexOf(\"javascript\") === -1)\n      ) {\n        // No service worker found. Probably a different app. Reload the page.\n        navigator.serviceWorker.ready.then((registration) => {\n          registration.unregister().then(() => {\n            window.location.reload();\n          });\n        });\n      } else {\n        // Service worker found. Proceed as normal.\n        registerValidSW(swUrl, config);\n      }\n    })\n    .catch(() => {\n      console.log(\n        \"No internet connection found. App is running in offline mode.\"\n      );\n    });\n}\n\nexport function unregister() {\n  if (\"serviceWorker\" in navigator) {\n    navigator.serviceWorker.ready\n      .then((registration) => {\n        registration.unregister();\n      })\n      .catch((error) => {\n        console.error(error.message);\n      });\n  }\n}\n","import { reducer as meta } from \"./state/meta\";\nimport { reducer as athlete } from \"./state/athlete\";\nimport { reducer as intervals } from \"./state/intervals\";\nimport { reducer as selectedId } from \"./state/selectedId\";\nimport { persistCombineReducers } from \"redux-persist\";\nimport storage from \"redux-persist/lib/storage\";\n\nexport const reducer = persistCombineReducers(\n  {\n    key: \"root\",\n    storage,\n  },\n  {\n    meta,\n    athlete,\n    intervals,\n    selectedId,\n  }\n);\n","import { configureStore } from \"@reduxjs/toolkit\";\nimport { reducer } from \"./reducer\";\nimport { persistStore } from \"redux-persist\";\n\nexport type RootState = ReturnType<typeof reducer>;\n\nexport const store = configureStore({\n  reducer,\n});\n\nexport const persistor = persistStore(store);\n","import React from \"react\";\nimport ReactDOM from \"react-dom\";\nimport { Provider } from \"react-redux\";\nimport \"./index.css\";\nimport App from \"./App\";\nimport * as serviceWorker from \"./serviceWorker\";\nimport { store } from \"./rdx/store\";\n\nReactDOM.render(\n  <React.StrictMode>\n    <Provider store={store}>\n      <App />\n    </Provider>\n  </React.StrictMode>,\n  document.getElementById(\"root\")\n);\n\n// If you want your app to work offline and load faster, you can change\n// unregister() to register() below. Note this comes with some pitfalls.\n// Learn more about service workers: https://bit.ly/CRA-PWA\nserviceWorker.unregister();\n","module.exports = __webpack_public_path__ + \"static/media/cadence.b638b56b.png\";"],"sourceRoot":""}